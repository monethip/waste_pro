(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-107ba588"],{"5b1b":function(e,t,a){"use strict";a("82ff")},"82ff":function(e,t,a){},d3df:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-breadcrumbs",{attrs:{large:""}},[e._v("Add Customer")]),a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Add User")])]),a("v-card-text",[a("v-container",[a("v-form",{ref:"form",attrs:{"lazy-validation":""}},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-file-input",{ref:"file",attrs:{placeholder:"Upload your image",label:"Image input",multiple:"","prepend-icon":"mdi-paperclip",accept:"image/png, image/jpeg, image/svg",type:"file"},scopedSlots:e._u([{key:"selection",fn:function(t){var s=t.text;return[a("v-chip",{attrs:{small:"",label:"",color:"primary"}},[e._v(" "+e._s(s)+" ")])]}}]),model:{value:e.data.media.id,callback:function(t){e.$set(e.data.media,"id",t)},expression:"data.media.id"}}),a("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.images)+" ")])],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"Name *",required:"",rules:e.nameRules},model:{value:e.data.name,callback:function(t){e.$set(e.data,"name",t)},expression:"data.name"}}),a("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.name)+" ")])],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"Surname *",required:"",rules:e.nameRules},model:{value:e.data.surname,callback:function(t){e.$set(e.data,"surname",t)},expression:"data.surname"}}),a("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.surname)+" ")])],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{staticClass:"input-number",attrs:{label:"ເຮືອນເລກທີ *",required:"",rules:e.houseNumberRules,type:"number"},model:{value:e.data.house_number,callback:function(t){e.$set(e.data,"house_number",t)},expression:"data.house_number"}}),a("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.house_number)+" ")])],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{staticClass:"input-number",attrs:{label:"ເບີໂທ *",required:"",rules:e.phoneRules,type:"number"},model:{value:e.data.user.phone,callback:function(t){e.$set(e.data.user,"phone",t)},expression:"data.user.phone"}}),a("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.phone)+" ")])],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{label:"Email *",required:"",rules:e.emailRules},model:{value:e.data.user.email,callback:function(t){e.$set(e.data.user,"email",t)},expression:"data.user.email"}}),a("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.email)+" ")])],1),a("v-col",{attrs:{cols:"4"}},[a("v-autocomplete",{attrs:{required:"",items:e.districts,"item-text":"name","item-value":"id",label:"District *",rulesDistrict:e.rulePermission},model:{value:e.selectedDistrict,callback:function(t){e.selectedDistrict=t},expression:"selectedDistrict"}}),a("p",{staticClass:"errors"},[e._v(" "+e._s(e.errormsg)+" ")])],1),a("v-col",{attrs:{cols:"4"}},[a("v-autocomplete",{attrs:{required:"",items:e.villages,"item-text":"name","item-value":"id",label:"Village *",rules:e.rulePermission},model:{value:e.data.village_id,callback:function(t){e.$set(e.data,"village_id",t)},expression:"data.village_id"}}),a("p",{staticClass:"errors"},[e._v(" "+e._s(e.errormsg)+" ")])],1),a("v-col",{attrs:{cols:"4"}},[a("v-select",{attrs:{required:"",items:e.village_details,"item-text":"name","item-value":"id",label:"Village Detail *",multiple:"",rules:e.rulePermission},model:{value:e.selectedVillageDetail,callback:function(t){e.selectedVillageDetail=t},expression:"selectedVillageDetail"}}),a("p",{staticClass:"errors"},[e._v(" "+e._s(e.errormsg)+" ")])],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{staticClass:"input-number",attrs:{label:"Latitude",type:"number"},model:{value:e.data.latitude,callback:function(t){e.$set(e.data,"latitude",t)},expression:"data.latitude"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{staticClass:"input-number",attrs:{label:"Longitude",type:"number"},model:{value:e.data.longitude,callback:function(t){e.$set(e.data,"longitude",t)},expression:"data.longitude"}})],1),a("v-col",{attrs:{cols:"12"}},[a("gmap-autocomplete",{ref:"searchInput",staticClass:"input text-field",attrs:{placeholder:"ຄົ້ນຫາເເຜນທີ່...",options:{fields:["geometry","formatted_address","name"]}},on:{place_changed:e.setPlace}}),a("span",{staticClass:"horizontal-divider"})],1),a("v-col",{staticClass:"mb-4",attrs:{cols:"12"}},[a("GmapMap",{staticStyle:{width:"100%",height:"450px"},attrs:{center:e.latlng,zoom:16,disableDefaultUI:!0}},e._l(e.markers,(function(t,s){return a("GmapMarker",{key:s,ref:"markers",refInFor:!0,attrs:{position:t.position,draggable:!0,icon:e.markerOptions,animation:2},on:{click:function(a){e.latlng=t.position},dragend:e.onLocation}})})),1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.backPrevios()}}},[e._v(" Back ")]),a("v-btn",{attrs:{color:"blue darken-1",text:"",loading:e.loading,disabled:e.loading},on:{click:function(t){return e.UpdateData()}}},[e._v(" Update ")])],1)],1)],1)],1)},r=[],i=a("3835"),n=(a("4fad"),a("d81d"),a("b0c0"),a("99af"),{data:function(){return{data:{},loading:!1,server_errors:{},provinces:[],districts:[],selectedDistrict:"",villages:[],selectedVillage:"",village_details:[],selectedVillageDetail:"",address:[],errormsg:"",files:[],latlng:{lat:18.1189434,lng:102.290218},markers:[],currentPlace:null,markerOptions:{url:a("56a2"),size:{width:35,height:55,f:"px",b:"px"},scaledSize:{width:35,height:55,f:"px",b:"px"}},emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],passwordRules:[function(e){return!!e||"Password is required"},function(e){return e&&e.length>=8||"Password must be more than 8 characters"}],passwordConfirmRules:[function(e){return!!e||"Password Confirm is required"},function(e){return e&&e.length>=8||"Password must be more than 8 characters"}],nameRules:[function(e){return!!e||"Name is required"},function(e){return e&&e.length>=2||"Name must be less than 2 characters"}],phoneRules:[function(e){return!!e||"Phone is required"},function(e){return e&&e.length>=4&&e.length<=11||"Phone number must be  4 - 11 numbers"}],houseNumberRules:[function(e){return!!e||"House number is required"}],rulePermission:[function(e){return!!e||"Permission is required"}],rulePermissionRole:[function(e){return!!e||"Role is required"}],rulesDistrict:[function(e){return!!e||"District is required"}],rules:[function(e){return!!e||"File is required"},function(e){return e&&e.size>0||"File is required"}]}},methods:{fetchData:function(){var e=this;this.loading=!0,this.$axios.get("customer/"+this.$route.params.id).then((function(t){200==t.data.code&&setTimeout((function(){e.loading=!1,e.data=t.data.data}),300)})).catch((function(t){if(e.loading=!1,e.fetchData(),422==t.response.status)for(var a=t.response.data.errors,s=0,r=Object.entries(a);s<r.length;s++){var n=Object(i["a"])(r[s],2),l=n[0],o=n[1];e.server_errors[l]=o[0]}}))},fetchAddress:function(){var e=this;this.$axios.get("info/address",{params:{filter:"ນະຄອນຫລວງວຽງຈັນ"}}).then((function(t){200==t.data.code&&setTimeout((function(){e.address=t.data.data,e.address.map((function(t){e.districts=t.districts,e.selectedDistrict=e.districts[0].id})),e.fetchVillage()}),300)})).catch((function(){}))},fetchVillage:function(){var e=this;this.$axios.get("info/district/"+this.selectedDistrict+"/village").then((function(t){200==t.data.code&&setTimeout((function(){e.villages=t.data.data,e.selectedVillage=e.villages[0].id,e.fetchVillageDetail()}),300)})).catch((function(){}))},fetchVillageDetail:function(){var e=this;this.$axios.get("info/village/"+this.selectedVillage+"/village-detail").then((function(t){200==t.data.code&&setTimeout((function(){e.village_details=t.data.data}),300)})).catch((function(){}))},listFiles:function(){this.files=[];for(var e=0;e<this.$refs.files.files.length;e++)this.files.push(this.$refs.files.files[e].name)},uploadHere:function(){var e=new FormData;e.append("imageFile",this.files),console.log("Uploaded"),this.files=e},backPrevios:function(){this.$router.go(-1)},UpdateData:function(){var e=this,t=new FormData;this.files.map((function(a){t.append("name",e.data.name),t.append("surname",e.data.surname),t.append("village_id",e.selectedVillage),t.append("house_number",e.data.house_number),t.append("vilage_details[]",e.selectedVillageDetail),t.append("vilage_details[]",e.selectedVillageDetail),t.append("latitude",e.latlng.lat),t.append("longitude",e.latlng.lng),t.append("phone",e.data.user.phone),t.append("email",e.data.user.email),t.append("images[]",a)})),1==this.$refs.form.validate()&&(this.loading=!0,this.$axios.put("customer/"+this.$route.params.id,t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){200==t.data.code&&setTimeout((function(){e.$store.commit("Toast_State",t.data.message),e.$router.push({name:"Customer"})}),300)})).catch((function(t){if(422==t.response.status)for(var a=t.response.data.errors,s=0,r=Object.entries(a);s<r.length;s++){var n=Object(i["a"])(r[s],2),l=n[0],o=n[1];e.server_errors[l]=o[0]}e.loading=!1,e.fetchData(),e.$store.commit("Toast_State",e.toast_error)})))},createNewAddressName:function(){var e="#CUSTOM ADDRESS:";return this.isCreate?this.currentAddress:"".concat(e," ").concat(this.latlng.lat,", ").concat(this.latlng.lng)},onLocation:function(e){this.latlng.lat=e.latLng.lat(),this.latlng.lng=e.latLng.lng(),this.address=this.createNewAddressName()},setPlace:function(e){this.currentPlace=e,this.placeMarker()},placeMarker:function(){if(this.markers=[],this.places=[],this.currentPlace){var e={lat:this.currentPlace.geometry.location.lat(),lng:this.currentPlace.geometry.location.lng()};this.markers.push({position:e}),this.latlng=e,this.animateMarker()}else{var t={lat:this.latlng.lat,lng:this.latlng.lng};this.markers.push({position:t}),this.animateMarker()}this.$refs.searchInput&&(this.address=this.$refs.searchInput.$el.value),this.onDataChange()},animateMarker:function(){this.$nextTick((function(){}))},geolocate:function(){var e=this;navigator.geolocation.getCurrentPosition((function(t){e.latlng={lat:t.coords.latitude,lng:t.coords.longitude},e.placeMarker()}))},onDataChange:function(){this.$emit("onDataChange",{address:this.address,position:this.latlng})},onSave:function(){this.$emit("onSave",{address:this.address||this.currentAddress||"Unnamed Location",position:this.latlng,isCreate:this.isCreate})}},watch:{selectedDistrict:function(){this.fetchVillage()},selectedVillage:function(){this.fetchVillageDetail()},"data.name":function(){this.server_errors.name=""},"data.surname":function(){this.server_errors.surname=""},"data.house_number":function(){this.server_errors.house_number=""},"data.phone":function(){this.server_errors.phone="",this.server_errors.email=""},"data.email":function(){this.server_errors.email=""},"data.password":function(){this.server_errors.password=""},"data.password_confirmation":function(){this.server_errors.password=""}},mounted:function(){this.geolocate()},created:function(){this.fetchAddress(),this.fetchData()}}),l=n,o=(a("5b1b"),a("2877")),c=a("6544"),u=a.n(c),d=a("c6a6"),m=a("2bc5"),h=a("8336"),f=a("b0af"),p=a("99d9"),v=a("cc20"),g=a("62ad"),b=a("a523"),_=a("23a7"),k=a("4bd4"),x=a("0fd9"),C=a("b974"),D=a("2fa4"),V=a("8654"),$=Object(o["a"])(l,s,r,!1,null,null,null);t["default"]=$.exports;u()($,{VAutocomplete:d["a"],VBreadcrumbs:m["a"],VBtn:h["a"],VCard:f["a"],VCardActions:p["a"],VCardText:p["b"],VCardTitle:p["c"],VChip:v["a"],VCol:g["a"],VContainer:b["a"],VFileInput:_["a"],VForm:k["a"],VRow:x["a"],VSelect:C["a"],VSpacer:D["a"],VTextField:V["a"]})}}]);
//# sourceMappingURL=chunk-107ba588.7afa62fe.js.map