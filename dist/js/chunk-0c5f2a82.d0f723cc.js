(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c5f2a82"],{"33d6":function(t,a,e){"use strict";e("d466")},"5cceb":function(t,a,e){"use strict";e("ee65")},"6eceb":function(t,a,e){"use strict";e.d(a,"a",(function(){return o}));e("ac1f"),e("841c");var o=function(t){""!==t.search?""!==t.oldVal?t.oldVal!==t.search&&(t.oldVal=t.search,t.pagination.current_page=1,t.fetchData()):(""!==t.search&&(t.pagination.current_page=1,t.fetchData()),t.oldVal=t.search):t.oldVal=""}},ab17:function(t,a,e){"use strict";e("f951")},d466:function(t,a,e){},e21c5:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-container",[e("v-breadcrumbs",{staticClass:"pt-0",attrs:{large:""}},[t._v("ລາຍງານຂໍ້ມູນບິນ")]),e("v-row",{staticClass:"mb-n6"},[e("v-col",[e("v-btn",{staticClass:"btn-primary",on:{click:function(a){return t.exportData()}}},[t._v("Export ")])],1),e("v-col",[e("v-select",{attrs:{outlined:"",dense:"",items:t.duration,"item-text":"name","item-value":"duration",label:"ຊ່ວງເວລາ"},model:{value:t.selectedDuration,callback:function(a){t.selectedDuration=a},expression:"selectedDuration"}})],1),"year"==t.selectedDuration?e("v-col",[e("section",[e("date-picker",{staticStyle:{height:"40px"},attrs:{type:"year",placeholder:"ເລີ່ມປີ"},model:{value:t.year_from,callback:function(a){t.year_from=a},expression:"year_from"}})],1)]):t._e(),"year"==t.selectedDuration?e("v-col",[e("section",[e("date-picker",{attrs:{type:"year",placeholder:"ຫາປີ"},model:{value:t.year_to,callback:function(a){t.year_to=a},expression:"year_to"}})],1)]):t._e(),"month"==t.selectedDuration?e("v-col",[e("section",[e("date-picker",{attrs:{type:"month",placeholder:"ເລີ່ມເດືອນ"},model:{value:t.month_from,callback:function(a){t.month_from=a},expression:"month_from"}})],1)]):t._e(),"month"==t.selectedDuration?e("v-col",[e("section",[e("date-picker",{attrs:{type:"month",placeholder:"ຫາເດືອນ"},model:{value:t.month_to,callback:function(a){t.month_to=a},expression:"month_to"}})],1)]):t._e(),e("v-col",[e("v-text-field",{attrs:{outlined:"",dense:"",clearable:"","prepend-inner-icon":"mdi-magnify",label:"ຊື່ລູກຄ້າ,ເລກບິນ",type:"text"},on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.Search()}},model:{value:t.search,callback:function(a){t.search=a},expression:"search"}})],1)],1),e("v-card",{attrs:{elevation:"1"}},[e("v-card-text",[e("v-tabs",{model:{value:t.tab,callback:function(a){t.tab=a},expression:"tab"}},[e("v-tab",{attrs:{href:"#tab-1"}},[t._v(" ຄົວເຮືອນ ")]),e("v-tab",{attrs:{href:"#tab-2"}},[t._v(" ບໍລິສັດ ")])],1),e("v-tabs-items",{model:{value:t.tab,callback:function(a){t.tab=a},expression:"tab"}},[e("v-tab-item",{attrs:{value:"tab-1"}},[e("HomeInvoice",{attrs:{tab:t.tab}})],1)],1),e("v-tabs-items",{model:{value:t.tab,callback:function(a){t.tab=a},expression:"tab"}},[e("v-tab-item",{attrs:{value:"tab-2"}},[e("v-card",{attrs:{flat:""}},[e("v-card-text",[e("CompanyInvoice",{attrs:{tab:t.tab}})],1)],1)],1)],1)],1)],1)],1)},n=[],s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-container",[e("div",[t._l(t.summary,(function(a,o){return e("v-row",{key:o},[e("v-col",[e("h3",[t._v("ປີ "+t._s(a.year))])]),e("v-col",[e("p",[t._v(" ສ້າງບິນ "),e("span",{staticClass:"success--text"},[t._v(t._s(Intl.NumberFormat().format(a.home.total_created)))])])]),e("v-col",[e("p",[t._v(" ອະນຸມັດ "),e("span",{staticClass:"success--text"},[t._v(t._s(Intl.NumberFormat().format(a.home.total_approved)))])])]),e("v-col",[e("p",[t._v(" ຍົກເລີກ "),e("span",{staticClass:"success--text"},[t._v(t._s(Intl.NumberFormat().format(a.home.total_rejected)))])])]),e("v-col",[e("p",[t._v(" ຊຳລະສຳເລັດ "),e("span",{staticClass:"success--text"},[t._v(t._s(Intl.NumberFormat().format(a.home.total_to_confirm_payment)))])])]),e("v-col",[e("p",[t._v(" ສຳເລັດທັງໝົດ "),e("span",{staticClass:"success--text"},[t._v(t._s(Intl.NumberFormat().format(a.home.total_success)))])])]),e("v-col",[e("p",[t._v(" ລວມ "),e("span",{staticClass:"success--text"},[t._v(t._s(Intl.NumberFormat().format(a.home.sum_total))+" ")])])])],1)})),e("v-data-table",{attrs:{headers:t.headers,items:t.invoices,search:t.search,"disable-pagination":!0,"hide-default-footer":""},scopedSlots:t._u([{key:"item.sub_total",fn:function(a){var o=a.item;return[e("div",[t._v(" "+t._s(Intl.NumberFormat().format(o.sub_total))+" ")])]}},{key:"item.total",fn:function(a){var o=a.item;return[e("div",[t._v(" "+t._s(Intl.NumberFormat().format(o.total))+" ")])]}},{key:"item.status",fn:function(a){var o=a.item;return[e("v-chip",{attrs:{label:"",color:t.statusColor(o.status)}},[t._v(t._s(o.status))])]}},{key:"item.created_at",fn:function(a){var o=a.item;return[e("div",[e("span",[t._v(t._s(t.moment(o.created_at).format("DD-MM-YY")))])])]}}])}),e("br"),[t.pagination.total_pages>1?e("Pagination",{attrs:{pagination:t.pagination,offset:t.offset},on:{paginate:function(a){return t.fetchData()}}}):t._e()]],2)])},r=[],i=e("6eceb"),c=e("c1df"),l=e.n(c),m={title:function(){return"Vientiane Waste Co-Dev|Report Invoice"},data:function(){return{tab:"tab-1",customers:[],loading:!1,customerId:"",year_from:"",year_to:"",month_from:"",month_to:"",offset:12,pagination:{},per_page:15,search:"",oldVal:"",invoices:[],summary:{},selectedDuration:"year",duration:[{name:"ປີ",duration:"year"},{name:"ເດືອນ",duration:"month"}],invoiceType:"home"}},methods:{fetchData:function(){var t=this,a=new FormData;a.append("page",this.pagination.current_page),a.append("per_page",this.per_page),a.append("type",this.invoiceType),a.append("duration",this.selectedDuration),""!==this.year_from&&""!==this.year_to&&"year"==this.selectedDuration&&(a.append("year_from",this.moment(this.year_from).format("YYYY")),a.append("year_to",this.moment(this.year_to).format("YYYY"))),""!==this.month_from&&""!==this.month_to&&"month"==this.selectedDuration&&(a.append("month_from",this.moment(this.month_from).format("YYYY-MM")),a.append("month_to",this.moment(this.month_to).format("YYYY-MM"))),this.$store.commit("Loading_State",!0),this.$axios.post("report-invoice",a).then((function(a){200==a.data.code&&setTimeout((function(){t.$store.commit("Loading_State",!1),t.invoices=a.data.data.details.data,t.summary=a.data.data.summary,console.log(t.summary),t.pagination=a.data.data.details.pagination}),300)})).catch((function(a){t.$store.commit("Loading_State",!1),t.$store.commit("Toast_State",{value:!0,color:"error",msg:a.response.data.message})}))},exportData:function(){var t=this,a=new FormData;a.append("type",this.invoiceType),a.append("duration",this.selectedDuration),a.append("download",1),""!==this.year_from&&""!==this.year_to&&"year"==this.selectedDuration&&(a.append("year_from",this.moment(this.year_from).format("YYYY")),a.append("year_to",this.moment(this.year_to).format("YYYY"))),""!==this.month_from&&""!==this.month_to&&"month"==this.selectedDuration&&(a.append("month_from",this.moment(this.month_from).format("YYYY-MM")),a.append("month_to",this.moment(this.month_to).format("YYYY-MM"))),this.loading=!0,this.$axios.post("report-invoice",a).then((function(a){200==a.status&&(null!=a.data.data.download_link&&window.open(a.data.data.download_link),t.loading=!1)})).catch((function(a){t.$store.commit("Toast_State",{value:!0,color:"error",msg:a.response.data.message}),t.loading=!1}))},editPage:function(t){this.$router.push({name:"InvoiceDetail",params:{id:t}})},viewPage:function(t){this.$router.push({name:"InvoiceDetail",params:{id:t}})},Search:function(){Object(i["a"])(this)}},watch:{selectedDuration:function(){this.pagination.current_page="",this.fetchData()},search:function(t){this.pagination.current_page="",""==t&&this.fetchData()},year_from:function(t){var a=l()(t).format("YYYY"),e=l()(this.year_to).format("YYYY");this.pagination.current_page="",""!==a&&""!==e&&a>e&&(this.year_from=""),this.fetchData()},year_to:function(t){var a=l()(t).format("YYYY"),e=l()(this.year_from).format("YYYY");this.pagination.current_page="",""!==a&&""!==e&&a<e&&(this.year_to=""),this.fetchData()},month_from:function(t){var a=l()(t).format("YYYY-MM"),e=l()(this.month_to).format("YYYY-MM");""!==a&&""!==e&&a>e&&(this.month_from=""),this.pagination.current_page="",this.fetchData()},month_to:function(t){var a=l()(this.month_from).format("YYYY-MM"),e=l()(t).format("YYYY-MM");this.pagination.current_page="",""!==a&&""!==e&&e<a&&(this.month_to=""),this.pagination.current_page="",this.fetchData()},tab:function(t){"tab-1"==t?(this.fetchData(),this.invoiceType="home",this.$router.push({name:"Report-Invoice",query:{tab:"home"}}).catch((function(){}))):"tab-2"==t&&(this.fetchData(),this.invoiceType="company",this.$router.push({name:"Report-Invoice",query:{tab:"company"}}).catch((function(){})))}},created:function(){"home"==this.$route.query.tab?(this.tab="tab-1",this.invoiceType="home",this.fetchData()):"company"==this.$route.query.tab&&(this.tab="tab-2",this.invoiceType="company",this.fetchData()),this.pagination=[]}},u={mixins:[m],name:"HomeInvoice",title:function(){return"Vientiane Waste Co-Dev|Report Invoice"},data:function(){return{customers:[],loading:!1,customerId:"",offset:12,pagination:{},per_page:15,search:"",oldVal:"",headers:[{text:"Invoice Id",value:"invoice_id",sortable:!1},{text:"ວັນທີ",value:"month",sortable:!1},{text:"ລູກຄ້າ",value:"full_name"},{text:"ຈຳນວນເກັບ",value:"total_time",sortable:!1},{text:"ຈຳນວນຖົງ",value:"total_bag",sortable:!1},{text:"ສ່ວນຫຼຸດ",value:"discount"},{text:"SubTotal",value:"sub_total",sortable:!1},{text:"Total",value:"total",sortable:!1},{text:"ສະຖານະ",value:"status",sortable:!1},{text:"Type",value:"type",sortable:!1}]}},methods:{Search:function(){Object(i["a"])(this)},statusColor:function(t){return"success"==t?"success":"pending"==t?"primary":"info"}},watch:{tab:function(){this.tab}},created:function(){this.fetchData()}},h=u,p=(e("ab17"),e("2877")),f=e("6544"),_=e.n(f),d=e("cc20"),v=e("62ad"),b=e("a523"),y=e("8fea"),g=e("0fd9"),Y=Object(p["a"])(h,s,r,!1,null,null,null),x=Y.exports;_()(Y,{VChip:d["a"],VCol:v["a"],VContainer:b["a"],VDataTable:y["a"],VRow:g["a"]});var D=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-container",[e("div",[t._l(t.summary,(function(a,o){return e("v-row",{key:o},[e("v-col",[e("h3",[t._v("ປີ "+t._s(a.year))])]),e("v-col",[a.company?e("p",[t._v(" ສ້າງບິນ "),e("span",{staticClass:"success--text"},[t._v(t._s(Intl.NumberFormat().format(a.company.total_created)))])]):t._e()]),e("v-col",[a.company?e("p",[t._v(" ອະນຸມັດ "),e("span",{staticClass:"success--text"},[t._v(t._s(Intl.NumberFormat().format(a.company.total_approved)))])]):t._e()]),e("v-col",[a.company?e("p",[t._v(" ຍົກເລີກ "),e("span",{staticClass:"success--text"},[t._v(t._s(Intl.NumberFormat().format(a.company.total_rejected)))])]):t._e()]),e("v-col",[a.company?e("p",[t._v(" ຊຳລະສຳເລັດ "),e("span",{staticClass:"success--text"},[t._v(t._s(Intl.NumberFormat().format(a.company.total_to_confirm_payment)))])]):t._e()]),e("v-col",[a.company?e("p",[t._v(" ສຳເລັດທັງໝົດ "),e("span",{staticClass:"success--text"},[t._v(t._s(Intl.NumberFormat().format(a.company.total_success)))])]):t._e()]),e("v-col",[a.company?e("p",[t._v(" ລວມ "),e("span",{staticClass:"success--text"},[t._v(t._s(Intl.NumberFormat().format(a.company.sum_total)))])]):t._e()])],1)})),e("v-data-table",{attrs:{headers:t.headers,items:t.invoices,search:t.search,"disable-pagination":!0,"hide-default-footer":""},scopedSlots:t._u([{key:"item.sub_total",fn:function(a){var o=a.item;return[e("div",[t._v(" "+t._s(Intl.NumberFormat().format(o.sub_total))+" ")])]}},{key:"item.total",fn:function(a){var o=a.item;return[e("div",[t._v(" "+t._s(Intl.NumberFormat().format(o.total))+" ")])]}},{key:"item.status",fn:function(a){var o=a.item;return[e("v-chip",{attrs:{label:"",color:t.statusColor(o.status)}},[t._v(t._s(o.status))])]}},{key:"item.created_at",fn:function(a){var o=a.item;return[e("div",[e("span",[t._v(t._s(t.moment(o.created_at).format("DD-MM-YY")))])])]}}])}),e("br"),[t.pagination.total_pages>1?e("Pagination",{attrs:{pagination:t.pagination,offset:t.offset},on:{paginate:function(a){return t.fetchData()}}}):t._e()]],2)])},C=[],I={mixins:[m],title:function(){return"Vientiane Waste Co-Dev|Report Invoice"},data:function(){return{customers:[],loading:!1,customerId:"",offset:12,pagination:{},per_page:15,search:"",oldVal:"",headers:[{text:"Invoice Id",value:"invoice_id",sortable:!1},{text:"ວັນທີ",value:"month",sortable:!1},{text:"ລູກຄ້າ",value:"company_name"},{text:"ຈຳນວນເກັບ",value:"total_time",sortable:!1},{text:"ຈຳນວນ Container",value:"total_container",sortable:!1,align:"center"},{text:"ຈຳນວນຄັ້ງ",value:"total_time",sortable:!1,align:"center"},{text:"ສ່ວນຫຼຸດ",value:"discount"},{text:"SubTotal",value:"sub_total",sortable:!1},{text:"Total",value:"total",sortable:!1},{text:"ສະຖານະ",value:"status",sortable:!1},{text:"Type",value:"type",sortable:!1}]}},methods:{Search:function(){Object(i["a"])(this)},statusColor:function(t){return"success"==t?"success":"pending"==t?"primary":"info"}},watch:{tab:function(){this.tab}},created:function(){}},k=I,V=(e("5cceb"),Object(p["a"])(k,D,C,!1,null,null,null)),w=V.exports;_()(V,{VChip:d["a"],VCol:v["a"],VContainer:b["a"],VDataTable:y["a"],VRow:g["a"]});var T={title:function(){return"Vientiane Waste Co-Dev|Calendar"},mixins:[m],components:{HomeInvoice:x,CompanyInvoice:w},data:function(){return{data:{}}},methods:{backPrevios:function(){this.$router.go(-1)}},watch:{}},M=T,F=(e("33d6"),e("2bc5")),$=e("8336"),N=e("b0af"),S=e("99d9"),j=e("b974"),R=e("71a3"),O=e("c671"),E=e("fe57"),P=e("aac8"),q=e("8654"),W=Object(p["a"])(M,o,n,!1,null,null,null);a["default"]=W.exports;_()(W,{VBreadcrumbs:F["a"],VBtn:$["a"],VCard:N["a"],VCardText:S["b"],VCol:v["a"],VContainer:b["a"],VRow:g["a"],VSelect:j["a"],VTab:R["a"],VTabItem:O["a"],VTabs:E["a"],VTabsItems:P["a"],VTextField:q["a"]})},ee65:function(t,a,e){},f951:function(t,a,e){}}]);
//# sourceMappingURL=chunk-0c5f2a82.d0f723cc.js.map