(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-000cbf6d"],{"0af3":function(t,e,a){"use strict";var s=a("1455");e["a"]=s["a"].extend({name:"v-tab-item",props:{id:String},methods:{genWindowItem(){const t=s["a"].options.methods.genWindowItem.call(this);return t.data.domProps=t.data.domProps||{},t.data.domProps.id=this.id||this.value,t}}})},1455:function(t,e,a){"use strict";var s=a("59f4"),i=a("c91b"),n=a("385b"),r=a("dd08"),o=a("9c0c");const c=Object(o["a"])(s["a"],Object(i["a"])("windowGroup","v-window-item","v-window"));e["a"]=c.extend().extend().extend({name:"v-window-item",directives:{Touch:n["a"]},props:{disabled:Boolean,reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},value:{required:!1}},data(){return{isActive:!1,inTransition:!1}},computed:{classes(){return this.groupClasses},computedTransition(){return this.windowGroup.internalReverse?"undefined"!==typeof this.reverseTransition?this.reverseTransition||"":this.windowGroup.computedTransition:"undefined"!==typeof this.transition?this.transition||"":this.windowGroup.computedTransition}},methods:{genDefaultSlot(){return this.$slots.default},genWindowItem(){return this.$createElement("div",{staticClass:"v-window-item",class:this.classes,directives:[{name:"show",value:this.isActive}],on:this.$listeners},this.genDefaultSlot())},onAfterTransition(){this.inTransition&&(this.inTransition=!1,this.windowGroup.transitionCount>0&&(this.windowGroup.transitionCount--,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=void 0)))},onBeforeTransition(){this.inTransition||(this.inTransition=!0,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=Object(r["h"])(this.windowGroup.$el.clientHeight)),this.windowGroup.transitionCount++)},onTransitionCancelled(){this.onAfterTransition()},onEnter(t){this.inTransition&&this.$nextTick(()=>{this.computedTransition&&this.inTransition&&(this.windowGroup.transitionHeight=Object(r["h"])(t.clientHeight))})}},render(t){return t("transition",{props:{name:this.computedTransition},on:{beforeEnter:this.onBeforeTransition,afterEnter:this.onAfterTransition,enterCancelled:this.onTransitionCancelled,beforeLeave:this.onBeforeTransition,afterLeave:this.onAfterTransition,leaveCancelled:this.onTransitionCancelled,enter:this.onEnter}},this.showLazyContent(()=>[this.genWindowItem()]))}})},"17d0":function(t,e,a){"use strict";a("a434")},"1d3e":function(t,e,a){"use strict";a("59b4")},3102:function(t,e,a){"use strict";a("8328")},3149:function(t,e,a){},"471d":function(t,e,a){},5562:function(t,e,a){"use strict";a("3149")},"565c":function(t,e,a){"use strict";a("558b");var s=a("9c0c"),i=a("68c4"),n=a("944a");e["a"]=Object(s["a"])(i["a"],Object(n["b"])("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(t){const e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput(t){const e=t=>t.$watch("hasError",e=>{this.$set(this.errorBag,t._uid,e)},{immediate:!0}),a={_uid:t._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?a.shouldValidate=t.$watch("shouldValidate",s=>{s&&(this.errorBag.hasOwnProperty(t._uid)||(a.valid=e(t)))}):a.valid=e(t),a},validate(){return 0===this.inputs.filter(t=>!t.validate(!0)).length},reset(){this.inputs.forEach(t=>t.reset()),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout(()=>{this.errorBag={}},0)},resetValidation(){this.inputs.forEach(t=>t.resetValidation()),this.resetErrorBag()},register(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister(t){const e=this.inputs.find(e=>e._uid===t._uid);if(!e)return;const a=this.watchers.find(t=>t._uid===e._uid);a&&(a.valid(),a.shouldValidate()),this.watchers=this.watchers.filter(t=>t._uid!==e._uid),this.inputs=this.inputs.filter(t=>t._uid!==e._uid),this.$delete(this.errorBag,e._uid)}},render(t){return t("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:t=>this.$emit("submit",t)}},this.$slots.default)}})},"59b4":function(t,e,a){},"6ece":function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));const s=t=>{""!==t.search?""!==t.oldVal?t.oldVal!==t.search&&(t.oldVal=t.search,t.pagination.current_page=1,t.fetchData()):(""!==t.search&&(t.pagination.current_page=1,t.fetchData()),t.oldVal=t.search):t.oldVal=""}},8328:function(t,e,a){},a434:function(t,e,a){},afc3:function(t,e,a){"use strict";a("471d")},c5c0:function(t,e,a){"use strict";a("ca80")},ca80:function(t,e,a){},f0d1:function(t,e,a){"use strict";a.r(e);var s=a("4932"),i=a("8447"),n=a("07b0"),r=a("db5a"),o=a("0f35"),c=a("1da9"),l=a("1789"),u=a("1d7d"),d=a("15e9"),m=a("cf5d"),h=a("bf41"),_=a("fde7"),p=a("d62f"),f=a("2f5e"),g=a("0af3"),v=a("a151"),b=a("e28e"),y=function(){var t=this,e=t._self._c;return e(l["a"],[e(i["a"],{staticClass:"pt-0",attrs:{large:""}},[e(n["a"],{staticClass:"text-primary",attrs:{text:""},on:{click:function(e){return t.backPrevios()}}},[e(u["a"],[t._v("mdi-chevron-left")])],1),t._v(" ລາຍລະອຽດແຜນ ")],1),e(p["a"],[e(c["a"],[t.data.plan_month?e("p",[t._v(" "+t._s(t.data.plan_month.name)+" - "+t._s(t.data.route_plan.name)+" - "+t._s(t.data.plan_month.name)+" "),e("span",{staticClass:"primary-color"},[t._v("("+t._s(t.data.driver.name)+"),")]),t._v(" ວັນທີ "+t._s(t.data.date)+" ")]):t._e()]),e(c["a"],{attrs:{cols:"3"}},[e(_["a"],{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(n["a"],t._g(t._b({attrs:{color:"primary"}},"v-btn",s,!1),a),[e(u["a"],{staticClass:"mr-2",attrs:{dark:"",medium:""}},[t._v(" mdi-refresh ")]),t._v(" Update ເປັນແຜນລ່າສຸດ ")],1)]}}])},[e(d["a"],[e(m["a"],{attrs:{link:""},on:{click:function(e){return t.updatePlanCalendar()}}},[e(h["d"],[e(u["a"],{staticClass:"mr-2",attrs:{small:""}},[t._v(" mdi-check ")]),t._v(" ຢືນຢັນ ")],1)],1)],1)],1)],1)],1),e(r["a"],{attrs:{elevation:"1"}},[e(o["b"],[e(p["a"],[e(c["a"],[e(v["a"],{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e(f["a"],{attrs:{href:"#tab-1"}},[t._v(" ທັງໝົດ ")]),e(f["a"],{attrs:{href:"#tab-2"}},[e(s["a"],{attrs:{color:"info",content:t.summary.pending_count}},[t._v(" ລໍຖ້າເກັບ ")])],1),e(f["a"],{attrs:{href:"#tab-3"}},[e(s["a"],{attrs:{color:"warning",content:t.summary.wait_to_confirm_count}},[t._v(" ລໍຖ້າຢືນຢັນ ")])],1),e(f["a"],{attrs:{href:"#tab-4"}},[e(s["a"],{attrs:{color:"success",content:t.summary.success_count}},[t._v(" ສຳເລັດ ")])],1),e(f["a"],{attrs:{href:"#tab-5"}},[e(s["a"],{attrs:{color:"red",content:t.summary.reject_count}},[t._v(" ປະຕິເສດການເກັບ ")])],1),e(f["a"],{attrs:{href:"#tab-6"}},[e(s["a"],{attrs:{color:"orange",content:t.summary.canceled_count}},[t._v(" ຍົກເລີກການເກັບ ")])],1)],1),e(b["a"],{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e(g["a"],{attrs:{value:"tab-1"}},[e("allTrash")],1)],1),e(b["a"],{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e(g["a"],{attrs:{value:"tab-2"}},[e(r["a"],{attrs:{flat:""}},[e(o["b"],[e("pendingTrash")],1)],1)],1)],1),e(b["a"],{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e(g["a"],{attrs:{value:"tab-3"}},[e(r["a"],{attrs:{flat:""}},[e(o["b"],[e("waitToConfirmTrash")],1)],1)],1)],1),e(b["a"],{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e(g["a"],{attrs:{value:"tab-4"}},[e(r["a"],{attrs:{flat:""}},[e(o["b"],[e("successTrash")],1)],1)],1)],1),e(b["a"],{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e(g["a"],{attrs:{value:"tab-5"}},[e(r["a"],{attrs:{flat:""}},[e(o["b"],[e("rejectTrash")],1)],1)],1)],1),e(b["a"],{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e(g["a"],{attrs:{value:"tab-6"}},[e(r["a"],{attrs:{flat:""}},[e(o["b"],[e("cancel-trash")],1)],1)],1)],1)],1)],1)],1)],1)],1)},x=[],$=(a("558b"),a("28e8")),w=a("0cb6"),k=a("ab58"),D=a("6733"),C=a("9b44"),T=function(){var t=this,e=t._self._c;return e(l["a"],[e(p["a"],[e(c["a"],[e(i["a"],{staticClass:"pa-0",attrs:{large:""}},[t._v(" ຂີ້ເຫື້ຍອທັງໝົດ ")])],1),e(c["a"],[e($["a"],{attrs:{color:"orange",dark:""}},[t._v(" "+t._s(t.countPause)+" ຢຸດ ")])],1),t.dragEnabled?t._e():e(c["a"],{staticClass:"text-right"},[e(n["a"],{attrs:{color:"yellow"},on:{click:t.showDrag}},[t._v(" ແກ້ໄຂລຳດັບ ")])],1),t.dragEnabled?e(c["a"],{staticClass:"text-right"},[e(p["a"],[e(c["a"],[e(n["a"],{attrs:{color:"primary",width:"100%"},on:{click:t.updatePriority}},[t._v(" ບັນທຶກ ")])],1),e(c["a"],[e(n["a"],{attrs:{width:"100%"},on:{click:t.closeDrag}},[t._v(" ປິດ ")])],1)],1)],1):t._e()],1),e(p["a"],[e(c["a"],[e(C["a"],{attrs:{outlined:"",dense:"",clearable:"","prepend-inner-icon":"mdi-magnify",label:"ຄົ້ນຫາ",type:"text"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1),e("div",[t.optimizedCalendars.length?e(w["a"],{attrs:{"disable-pagination":!0,headers:t.headers,items:t.optimizedCalendars,search:t.search,"hide-default-footer":""},scopedSlots:t._u([{key:"item.full_name",fn:function({item:a}){return[e("a",{attrs:{href:"#"},on:{click:function(e){return t.openRoute(a)}}},[t._v(t._s(a.route_plan_detail.customer.full_name))])]}},{key:"item.phone",fn:function({item:a}){return[e("span",[t._v(t._s(a.route_plan_detail.customer.user.phone))])]}},{key:"item.customer_id",fn:function({item:a}){return[e("span",[t._v(t._s(a.route_plan_detail.customer.customer_id))])]}},{key:"item.status",fn:function({item:a}){return[e($["a"],{attrs:{color:a.status_color,label:""}},[t._v(" "+t._s(a.status)+" ")])]}},{key:"item.can_collect",fn:function({item:a}){return[e($["a"],{attrs:{color:a.customer_can_collect_color,label:""}},[t._v(" "+t._s(a.customer_can_collect_la)+" ")])]}},{key:"item.amount",fn:function({item:a}){return[e($["a"],{attrs:{color:a.amount_color}},[t._v(" "+t._s(a.amount)+" ")]),e("span",[t._v(t._s(a.amount_collection_type))])]}},{key:"item.is_pause",fn:function({item:a}){return[e($["a"],{attrs:{color:a.is_pause_color,dark:"",label:""},on:{click:function(e){return t.switchPause(a.id)}}},[t._v(" "+t._s(a.is_pause_la)+" ")])]}},{key:"item.actions",fn:function({item:a}){return[e(u["a"],{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.viewPage(a.plan_calendar_id,a.id)}}},[t._v(" mdi-eye ")]),e(u["a"],{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.openDialog(a)}}},[t._v(" mdi-plus ")])]}}],null,!1,2217607410)}):t._e(),e("br"),[t.pagination.total_pages>1?e("Pagination",{attrs:{offset:t.offset,pagination:t.pagination},on:{paginate:function(e){return t.fetchData()}}}):t._e()]],2),e(k["a"],{attrs:{"max-width":"300px",scrollable:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(r["a"],[e(o["c"],[t._v("ເພີ່ມຈຳນວນຮອບໃນມື້")]),e(D["a"]),e(o["b"],[e(C["a"],{attrs:{type:"number"},model:{value:t.round,callback:function(e){t.round=e},expression:"round"}})],1),e(D["a"]),e(o["a"],[e(n["a"],{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.cancelDialog()}}},[t._v(" Close ")]),e(n["a"],{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.addRoundDialog()}}},[t._v(" Save ")])],1)],1)],1)],1)},S=[],P=a("6ece"),L=a("bb03"),j=a.n(L),U={name:"Customer",data(){return{loading:!1,calendarId:"",calendars:[],allCalendars:[],successes:[],offset:12,pagination:{},per_page:15,search:"",oldVal:"",summary:{},countPause:{},statuses:[],plan_monthId:this.$route.params.id}},computed:{dragCalendars(){return this.allCalendars.filter(t=>!t.is_pause&&"pending"==t.status)},optimizedCalendars(){return this.mergedCalendars},mergedCalendars(){return this.calendars.map(t=>{let e=0,a="primary";switch(t.collection_type){case"bag":case"chartered":case"32km":case"infect":e=t.bag;break;case"fix_cost":e="";break;default:e=t.container,a="success";break}const s=this.statusColor(t.status),i=this.getUnit(t.collection_type),n=t.is_pause?"orange":"green",r=t.is_pause?"ຢຸດກ່ອນ":"ໃຫ້ເກັບ",o=t.route_plan_detail.customer.can_collect?"success":"error",c=t.route_plan_detail.customer.can_collect?"ເກັບໄດ້":"ເກັບບໍ່ໄດ້";return{...t,created_at:j()(t.created_at).format("DD-MM-YY hh:mm"),date:j()(t.date).format("DD-MM-YY hh:mm:ss"),status_color:s,amount:e,amount_color:a,amount_collection_type:i,is_pause_color:n,is_pause_la:r,customer_can_collect_color:o,customer_can_collect_la:c}})}},methods:{fetchData(){this.$store.commit("Loading_State",!0),this.$axios.get(`plan-calendar/${this.$route.params.id}/detail`,{params:{statuses:this.statuses,without_month_info:!0}}).then(t=>{200==t.data.code&&setTimeout(()=>{this.$store.commit("Loading_State",!1),this.calendars=[],this.calendars=t.data.data.data,this.summary=t.data.data.summary,this.countPause=t.data.count_pause},100)}).catch(t=>{this.$store.commit("Loading_State",!1),this.$store.commit("Toast_State",{value:!0,color:"error",msg:t.response.data.message})})},fetchAllData(){console.log(11),this.$store.commit("Loading_State",!0),this.$axios.get(`plan-calendar/${this.$route.params.id}/detail?without_month_info=true`).then(t=>{200==t.data.code&&setTimeout(()=>{this.$store.commit("Loading_State",!1),this.allCalendars=t.data.data.data},100)}).catch(t=>{this.$store.commit("Loading_State",!1),this.$store.commit("Toast_State",{value:!0,color:"error",msg:t.response.data.message})})},statusColor(t){return"pending"==t?"info":"success"==t?"success":"error"},getUnit(t){return"bag"==t||"chartered"==t||"32km"==t||"infect"==t?"ຖົງ":"fix_cost"==t?"ຖ້ຽວ":"container"==t?"ຄອນເທັນເນີ":""},Search(){Object(P["a"])(this)},viewPage(t,e){this.$openRoute({name:"TrashDetail",params:{plan_calendar:t,id:e}})}},watch:{},created(){this.fetchData()}},M={name:"Trash",components:{},mixins:[U],data(){return{enabled:!0,list:[{name:"John",id:0},{name:"Joao",id:1},{name:"Jean",id:2}],search:"",dragging:!1,dragEnabled:!1,dialog:!1,round:0,server_errors:{},headers:[{text:"ລຳດັບຄວາມສຳຄັນ",value:"priority"},{text:"ໄອດີ",value:"customer_id"},{text:"ລູກຄ້າ",value:"full_name"},{text:"ເບີໂທ",value:"phone"},{text:"ສະຖານະເກັບ",value:"can_collect"},{text:"ຈຳນວນຂີ້ເຫື້ຍອ",value:"amount",align:"center"},{text:"ສະຖານະ",value:"status",align:"center"},{text:"ວັນທີສ້າງ",value:"created_at",align:"center"},{text:"ວັນທີເກັບ",value:"collected_at",align:"center"},{text:"ເປີດ/ຢຸດ",value:"is_pause",align:"center"},{text:"",value:"actions",sortable:!1},{text:"",value:"add_round",sortable:!1}],selectedRound:""}},watch:{},created(){},methods:{openDialog(t){this.selectedRound=t.id,this.dialog=!0},openRoute(t){const e="home"==t.route_plan_detail.customer.customer_type?"ViewClient":"ViewCompanyDetail",a=this.$router.resolve({name:e,params:{id:t.route_plan_detail.customer.id}});window.open(a.href)},switchPause(t){this.$store.commit("Loading_State",!0),this.$axios.post("plan-calendar-pause/"+t).then(t=>{200==t.data.code&&(setTimeout(()=>{this.$store.commit("Loading_State",!1),this.$store.commit("Toast_State",{value:!0,color:"success",msg:t.data.message})},100),this.fetchData())}).catch(t=>{this.$store.commit("Loading_State",!1),t.response&&422==t.response.status&&(this.toast.msg=t.message)})},checkMove(t){window.console.log("Future index: "+t.draggedContext.futureIndex)},showDrag(){this.dragEnabled=!0,this.fetchAllData()},closeDrag(){this.dragEnabled=!1,this.fetchData()},updatePriority(){this.$store.commit("Loading_State",!0);const t=[];for(const e of this.allCalendars)e.is_pause&&t.length>=e.priority?t.splice(e.priority-1,0,e.id):t.push(e.id);this.$axios.post("plan-calendar-priority/"+this.$route.params.id,{plan_calendar_details:t}).then(t=>{200==t.data.code&&(setTimeout(()=>{this.$store.commit("Loading_State",!1),this.$store.commit("Toast_State",{value:!0,color:"success",msg:t.data.message})},100),this.fetchAllData())}).catch(t=>{this.$store.commit("Loading_State",!1),this.$store.commit("Toast_State",{value:!0,color:"error",msg:t.response?t.response.data.message:"Something went wrong"})})},backPrevios(){this.$router.go(-1)},cancelDialog(){this.dialog=!1},addRoundDialog(){this.round>0?(this.$store.commit("Loading_State",!0),this.$axios.post("plan-calendar-detail-round/"+this.selectedRound,{round:this.round}).then(t=>{200==t.data.code&&setTimeout(()=>{this.$store.commit("Loading_State",!1),this.round=0,this.dialog=!1,this.selectedRound="",this.fetchData()},100)}).catch(t=>{if(this.$store.commit("Loading_State",!1),this.round=0,this.dialog=!1,this.selectedRound="",this.$store.commit("Toast_State",{value:!0,color:"error",msg:t.response?t.response.data.message:"Something went wrong"}),t.response&&422==t.response.status){const e=t.response.data.errors;for(const[t,a]of Object.entries(e))this.server_errors[t]=a[0]}})):this.dialog=!1},formatDate(t,e="DD-MM-YY hh:mm"){return j()(t).format(e)},getAmountTemplate(t,e,a){return"bag"===t||"chartered"===t||"32km"===t||"infect"===t?`${e} ${this.getUnit(t)}`:"fix_cost"===t?""+this.getUnit(t):`${a} ${this.getUnit(t)}\n      `}},computed:{filteredData(){return this.calendars.filter(t=>t.route_plan_detail.customer.customer_id.includes(this.search)||t.route_plan_detail.customer.full_name.includes(this.search)||t.route_plan_detail.customer.user.phone.includes(this.search))},calendarTable(){const t=[];for(const e of this.calendars){const a={id:e.id,priority:e.priority,customer_id:e.route_plan_detail.customer.customer_id,full_name:e.route_plan_detail.customer.full_name,phone:e.route_plan_detail.customer.user.phone,can_collect:e.route_plan_detail.customer.can_collect?"ເກັບໄດ້":"ເກັບບໍ່ໄດ້",can_collect_color:e.route_plan_detail.customer.can_collect?"success":"errorr",amount:this.getAmountTemplate(e.collection_type,e.bag,e.container),status:e.status_la,status_color:this.statusColor(e.status),created_at:this.formatDate(e.created_at),collected_at:this.formatDate(e.collected_at),is_pause:e.is_pause?"ຢຸດກ່ອນ":"ໃຫ້ເກັບ",is_pause_color:e.is_pause?"orange":"green"};t.push(a)}return t},formattedCalendars(){return this.calendars?this.calendars.map(t=>({...t,created_at:this.formatDate(t.created_at),date:this.formatDate(t.date,"hh:mm:ss"),amount:this.getAmountTemplate(t)})):[]}}},V=M,Y=(a("afc3"),a("4a4e")),O=Object(Y["a"])(V,T,S,!1,null,null,null),R=O.exports,I=function(){var t=this,e=t._self._c;return e(l["a"],[e(p["a"],[e(c["a"],[e(i["a"],{staticClass:"pa-0",attrs:{large:""}},[t._v(" ຂີ້ເຫື້ຍອທີ່ລໍຖ້າເກັບ ")])],1)],1),e(p["a"],[e(c["a"],[e(C["a"],{attrs:{outlined:"",dense:"",clearable:"","prepend-inner-icon":"mdi-magnify",label:"ຄົ້ນຫາ",type:"text"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1),e("div",[t.pending?e(w["a"],{attrs:{headers:t.headers,items:t.pending,search:t.search,"disable-pagination":!0,"hide-default-footer":""},scopedSlots:t._u([{key:"item.created_at",fn:function({item:a}){return[e("div",[t._v(" "+t._s(t.moment(a.created_at).format("DD-MM-YY hh:mm "))+" ")])]}},{key:"item.date",fn:function({item:a}){return[e("div",[t._v(" "+t._s(t.moment(a.date).format("DD-MM-YY hh:mm:ss"))+" ")])]}},{key:"item.route_plan_detail.customer.full_name",fn:function({item:a}){return[e("a",{attrs:{href:"#"},on:{click:function(e){return t.openRoute(a)}}},[t._v(t._s(a.route_plan_detail.customer.full_name))])]}},{key:"item.status",fn:function({item:a}){return[e($["a"],{attrs:{color:"info"}},[t._v(" "+t._s(a.status)+" ")])]}},{key:"item.amount",fn:function({item:a}){return["bag"==a.collection_type||"chartered"==a.collection_type||"32km"==a.collection_type||"infect"==a.collection_type?e("div",[e($["a"],{attrs:{color:"primary"}},[t._v(" "+t._s(a.bag)+" ")]),e("span",[t._v(" "+t._s(t.getUnit(a.collection_type)))])],1):"fix_cost"==a.collection_type?e("div",[e("span",[t._v(" "+t._s(t.getUnit(a.collection_type)))])]):e("div",[e($["a"],{attrs:{color:"success"}},[t._v(" "+t._s(a.container)+" ")]),e("span",[t._v(" "+t._s(t.getUnit(a.collection_type)))])],1)]}},{key:"item.actions",fn:function({item:a}){return[e(u["a"],{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.viewPage(a.plan_calendar_id,a.id)}}},[t._v(" mdi-eye ")])]}}],null,!1,1600022269)}):t._e(),e("br"),[t.pagination.total_pages>1?e("Pagination",{attrs:{pagination:t.pagination,offset:t.offset},on:{paginate:function(e){return t.fetchData()}}}):t._e()]],2)],1)},B=[],E={name:"Trash",data(){return{pending:[],loading:!1,calendarId:"",offset:12,pagination:{},per_page:100,search:"",oldVal:"",statuses:["pending"],headers:[{text:"ລຳດັບຄວາມສຳຄັນ",value:"priority"},{text:"ໄອດີ",value:"route_plan_detail.customer.customer_id"},{text:"ລູກຄ້າ",value:"route_plan_detail.customer.full_name"},{text:"ເບີໂທ",value:"route_plan_detail.customer.user.phone"},{text:"ຈຳນວນຂີ້ເຫື້ຍອ",value:"amount",align:"center",sortable:!1},{text:"ສະຖານະ",value:"status",align:"center",sortable:!1},{text:"ວັນທີສ້າງ",value:"created_at",align:"center",sortable:!1},{text:"ວັນທີເກັບ",value:"collected_at",align:"center",sortable:!1},{text:"",value:"actions",sortable:!1}]}},watch:{search(t){""==t&&this.fetchData()}},created(){this.fetchData()},methods:{openRoute(t){const e="home"==t.route_plan_detail.customer.customer_type?"ViewClient":"ViewCompanyDetail/",a=this.$router.resolve({name:e,params:{id:t.route_plan_detail.customer.id}});window.open(a.href)},backPrevios(){this.$router.go(-1)},fetchData(){this.$store.commit("Loading_State",!0),this.$axios.get(`plan-calendar/${this.$route.params.id}/detail`,{params:{page:this.pagination.current_page,per_page:this.per_page,statuses:this.statuses,order_by:"piority"}}).then(t=>{200==t.data.code&&setTimeout(()=>{this.$store.commit("Loading_State",!1),this.pending=t.data.data.data,this.summary=t.data.data.summary,this.pagination=t.data.data.pagination},100)}).catch(t=>{this.$store.commit("Loading_State",!1),t.response&&422==t.response.status&&(this.toast.msg=t.message)})},statusColor(t){return"pending"==t?"info":"success"==t?"success":"error"},getUnit(t){return"bag"==t||"32km"==t||"infect"==t||"chartered"==t?"ຖົງ":"fix_cost"==t?"ຖ້ຽວ":"container"==t?"ຄອນເທັນເນີ":""},Search(){Object(P["a"])(this)},viewPage(t,e){this.$router.push({name:"TrashDetail",params:{plan_calendar:t,id:e}})}}},q=E,A=(a("17d0"),Object(Y["a"])(q,I,B,!1,null,null,null)),G=A.exports,z=function(){var t=this,e=t._self._c;return e(l["a"],[e(p["a"],[e(c["a"],[e(i["a"],{staticClass:"pa-0",attrs:{large:""}},[t._v(" ຂີ້ເຫື້ຍອທີ່ເກັບສຳເລັດແລ້ວ ")])],1)],1),e(p["a"],[e(c["a"],[e(C["a"],{attrs:{outlined:"",dense:"",clearable:"","prepend-inner-icon":"mdi-magnify",label:"ຄົ້ນຫາ",type:"text"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1),e("div",[t.successes?e(w["a"],{attrs:{headers:t.headers,items:t.successes,search:t.search,"disable-pagination":!0,"hide-default-footer":""},scopedSlots:t._u([{key:"item.route_plan_detail.customer.full_name",fn:function({item:a}){return[e("a",{attrs:{href:"#"},on:{click:function(e){return t.openRoute(a)}}},[t._v(t._s(a.route_plan_detail.customer.full_name))])]}},{key:"item.created_at",fn:function({item:a}){return[e("div",[t._v(" "+t._s(t.moment(a.created_at).format("DD-MM-YY hh:mm "))+" ")])]}},{key:"item.date",fn:function({item:a}){return[e("div",[t._v(" "+t._s(t.moment(a.date).format("DD-MM-YY hh:mm:ss"))+" ")])]}},{key:"item.status",fn:function({item:a}){return[e($["a"],{attrs:{label:"",color:"success"}},[t._v(" "+t._s(a.status)+" ")])]}},{key:"item.amount",fn:function({item:a}){return["bag"==a.collection_type||"chartered"==a.collection_type||"32km"==a.collection_type||"infect"==a.collection_type?e("div",[e($["a"],{attrs:{color:"primary"}},[t._v(" "+t._s(a.bag)+" ")]),e("span",[t._v(" "+t._s(t.getUnit(a.collection_type)))])],1):"fix_cost"==a.collection_type?e("div",[e("span",[t._v(" "+t._s(t.getUnit(a.collection_type)))])]):e("div",[e($["a"],{attrs:{color:"success"}},[t._v(" "+t._s(a.container)+" ")]),e("span",[t._v(" "+t._s(t.getUnit(a.collection_type)))])],1)]}},{key:"item.actions",fn:function({item:a}){return[e(u["a"],{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.viewPage(a.plan_calendar_id,a.id)}}},[t._v(" mdi-eye ")])]}}],null,!1,2007485760)}):t._e(),e("br"),[t.pagination.total_pages>1?e("Pagination",{attrs:{pagination:t.pagination,offset:t.offset},on:{paginate:function(e){return t.fetchData()}}}):t._e()]],2)],1)},H=[],J={name:"Trash",data(){return{offset:12,successes:[],pagination:{},per_page:100,search:"",summary:{},statuses:["success"],headers:[{text:"ລຳດັບຄວາມສຳຄັນ",value:"priority"},{text:"ໄອດີ",value:"route_plan_detail.customer.customer_id"},{text:"ລູກຄ້າ",value:"route_plan_detail.customer.full_name"},{text:"ເບີໂທ",value:"route_plan_detail.customer.user.phone"},{text:"ຈຳນວນຂີ້ເຫື້ຍອ",value:"amount",align:"center",sortable:!1},{text:"ສະຖານະ",value:"status",align:"center",sortable:!1},{text:"ວັນທີສ້າງ",value:"created_at",align:"center",sortable:!1},{text:"ວັນທີເກັບ",value:"collected_at",align:"center",sortable:!1},{text:"",value:"actions",sortable:!1}]}},watch:{search(t){""==t&&this.fetchData()}},created(){this.fetchData()},methods:{backPrevios(){this.$router.go(-1)},fetchData(){this.$store.commit("Loading_State",!0),this.$axios.get(`plan-calendar/${this.$route.params.id}/detail`,{params:{page:this.pagination.current_page,per_page:this.per_page,statuses:this.statuses}}).then(t=>{200==t.data.code&&setTimeout(()=>{this.$store.commit("Loading_State",!1),this.successes=t.data.data.data,this.summary=t.data.data.summary,this.pagination=t.data.data.pagination},100)}).catch(t=>{this.$store.commit("Loading_State",!1),t.response&&422==t.response.status&&(this.toast.msg=t.message)})},statusColor(t){return"pending"==t?"info":"success"==t?"success":"error"},getUnit(t){return"bag"==t||"32km"==t||"infect"==t||"chartered"==t?"ຖົງ":"fix_cost"==t?"ຖ້ຽວ":"container"==t?"ຄອນເທັນເນີ":""},Search(){Object(P["a"])(this)},viewPage(t,e){this.$router.push({name:"TrashDetail",params:{plan_calendar:t,id:e}})}}},W=J,F=(a("3102"),Object(Y["a"])(W,z,H,!1,null,null,null)),K=F.exports,N=a("565c"),Q=a("26bf"),X=function(){var t=this,e=t._self._c;return e(l["a"],[e(p["a"],[e(c["a"],[e(i["a"],{staticClass:"pa-0",attrs:{large:""}},[t._v(" ຂີ້ເຫື້ຍອທີ່ລໍຖ້າເກັບ ")])],1)],1),e(p["a"],[e(c["a"],[e(C["a"],{attrs:{outlined:"",dense:"",clearable:"","prepend-inner-icon":"mdi-magnify",label:"ຄົ້ນຫາ",type:"text"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1),e("div",[t.pending?e(w["a"],{attrs:{headers:t.headers,items:t.pending,search:t.search,"disable-pagination":!0,"hide-default-footer":""},scopedSlots:t._u([{key:"item.created_at",fn:function({item:a}){return[e("div",[t._v(" "+t._s(t.moment(a.created_at).format("DD-MM-YY hh:mm "))+" ")])]}},{key:"item.date",fn:function({item:a}){return[e("div",[t._v(" "+t._s(t.moment(a.date).format("DD-MM-YY hh:mm:ss"))+" ")])]}},{key:"item.route_plan_detail.customer.full_name",fn:function({item:a}){return[e("a",{attrs:{href:"#"},on:{click:function(e){return t.openRoute(a)}}},[t._v(t._s(a.route_plan_detail.customer.full_name))])]}},{key:"item.status",fn:function({item:a}){return[e($["a"],{attrs:{color:"warning",label:""}},[t._v(" "+t._s(a.status)+" ")])]}},{key:"item.amount",fn:function({item:a}){return["bag"==a.collection_type||"chartered"==a.collection_type||"32km"==a.collection_type||"infect"==a.collection_type?e("div",[e($["a"],{attrs:{color:"primary"}},[t._v(" "+t._s(a.bag)+" ")]),e("span",[t._v(" "+t._s(t.getUnit(a.collection_type)))])],1):"fix_cost"==a.collection_type?e("div",[e("span",[t._v(" "+t._s(t.getUnit(a.collection_type)))])]):e("div",[e($["a"],{attrs:{color:"success"}},[t._v(" "+t._s(a.container)+" ")]),e("span",[t._v(" "+t._s(t.getUnit(a.collection_type)))])],1)]}},{key:"item.actions",fn:function({item:a}){return[e(u["a"],{staticClass:"mr-4",attrs:{small:""},on:{click:function(e){return t.viewPage(a.plan_calendar_id,a.id)}}},[t._v(" mdi-eye ")]),e(u["a"],{attrs:{small:""},on:{click:function(e){return t.openUpdate(a)}}},[t._v(" mdi-truck ")])]}}],null,!1,2474458234)}):t._e(),e("br"),[t.pagination.total_pages>1?e("Pagination",{attrs:{pagination:t.pagination,offset:t.offset},on:{paginate:function(e){return t.fetchData()}}}):t._e()]],2),e(k["a"],{attrs:{"max-width":"620px",persistent:""},model:{value:t.confirmDialog,callback:function(e){t.confirmDialog=e},expression:"confirmDialog"}},[[e(r["a"],[e(o["b"],[e(o["c"],[e("p",[e(u["a"],{staticClass:"primary-color",attrs:{large:"",color:"success"}},[t._v(" mdi-checkbox-marked-circle-outline ")]),t._v(" ຢືນຢັນການເກັບຂີ້ເຫື້ຍອ ")],1)]),e(l["a"],[e(N["a"],{ref:"form",attrs:{"lazy-validation":""}},[e("div",[e(p["a"],[e(c["a"],{attrs:{cols:"12"}},[e(Q["a"],{attrs:{label:"ສະຖານະການຊຳລະ",outlined:"",dense:"",items:t.confirm_statues,"item-text":"name","item-value":"value"},model:{value:t.confirm_status,callback:function(e){t.confirm_status=e},expression:"confirm_status"}})],1)],1),"reject"==t.confirm_status?e(p["a"],[e(c["a"],{attrs:{cols:"12"}},[e(C["a"],{attrs:{label:"Description",outlined:"",dense:"",type:"text"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),e("p",{staticClass:"errors"},[t._v(" "+t._s(t.server_errors.description)+" ")])],1)],1):t._e(),e(p["a"],[e(o["a"],[e(n["a"],{staticClass:"white--text px-12 c-btn",attrs:{color:"blue",medium:"",loading:t.loading,disabled:t.loading},on:{click:function(e){return t.confirmStatus()}}},[t._v(" ຢືນຢັນ ")]),e(n["a"],{staticClass:"white--text px-12 c-btn",attrs:{color:"error",medium:""},on:{click:function(e){t.confirmDialog=!1}}},[t._v(" Close ")])],1)],1)],1)])],1)],1)],1)]],2)],1)},Z=[],tt={name:"Trash",data(){return{pending:[],loading:!1,calendarId:"",offset:12,pagination:{},per_page:100,search:"",oldVal:"",statuses:["wait_to_confirm"],confirm_status:"",confirm_statues:[{name:"Success",value:"success"},{name:"Reject",value:"reject"}],confirmDialog:!1,editItem:{},description:"",server_errors:{},headers:[{text:"ລຳດັບຄວາມສຳຄັນ",value:"priority"},{text:"ໄອດີ",value:"route_plan_detail.customer.customer_id"},{text:"ລູກຄ້າ",value:"route_plan_detail.customer.full_name"},{text:"ເບີໂທ",value:"route_plan_detail.customer.user.phone"},{text:"ຈຳນວນຂີ້ເຫື້ຍອ",value:"amount",align:"center",sortable:!1},{text:"ສະຖານະ",value:"status",align:"center",sortable:!1},{text:"ວັນທີສ້າງ",value:"created_at",align:"center",sortable:!1},{text:"ວັນທີເກັບ",value:"collected_at",align:"center",sortable:!1},{text:"",value:"actions",sortable:!1}]}},watch:{search(t){""==t&&this.fetchData()},description(){this.server_errors.description=""}},created(){this.fetchData()},methods:{openRoute(t){const e="home"==t.route_plan_detail.customer.customer_type?"ViewClient":"ViewCompanyDetail/",a=this.$router.resolve({name:e,params:{id:t.route_plan_detail.customer.id}});window.open(a.href)},backPrevios(){this.$router.go(-1)},fetchData(){this.$store.commit("Loading_State",!0),this.$axios.get(`plan-calendar/${this.$route.params.id}/detail`,{params:{page:this.pagination.current_page,per_page:this.per_page,statuses:this.statuses}}).then(t=>{200==t.data.code&&setTimeout(()=>{this.$store.commit("Loading_State",!1),this.pending=t.data.data.data,this.summary=t.data.data.summary,this.pagination=t.data.data.pagination},100)}).catch(t=>{this.$store.commit("Loading_State",!1),t.response&&422==t.response.status&&(this.toast.msg=t.message)})},openUpdate(t){this.editItem=t,this.confirmDialog=!0},confirmStatus(){this.$store.commit("Loading_State",!0);const t=new FormData;t.append("status",this.confirm_status),"reject"==this.confirm_status&&t.append("description",this.description),t.append("_method","PUT"),this.$axios.post(`admin-collection/${this.editItem.id}/status`,t).then(t=>{200==t.data.code&&setTimeout(()=>{this.$store.commit("Loading_State",!1),this.$store.commit("Toast_State",{value:!0,color:"success",msg:t.data.message}),this.fetchData(),this.confirmDialog=!1},300)}).catch(t=>{if(this.$store.commit("Loading_State",!1),this.$store.commit("Toast_State",{value:!0,color:"error",msg:t.response?t.response.data.message:"Something went wrong"}),t.response&&422==t.response.status){const e=t.response.data.errors;for(const[t,a]of Object.entries(e))this.server_errors[t]=a[0]}})},statusColor(t){return"pending"==t?"info":"success"==t?"success":"error"},getUnit(t){return"bag"==t||"32km"==t||"infect"==t||"chartered"==t?"ຖົງ":"fix_cost"==t?"ຖ້ຽວ":"container"==t?"ຄອນເທັນເນີ":""},Search(){Object(P["a"])(this)},viewPage(t,e){this.$router.push({name:"TrashDetail",params:{plan_calendar:t,id:e}})}}},et=tt,at=(a("5562"),Object(Y["a"])(et,X,Z,!1,null,null,null)),st=at.exports,it=function(){var t=this,e=t._self._c;return e(l["a"],[e(p["a"],[e(c["a"],[e(i["a"],{staticClass:"pa-0",attrs:{large:""}},[t._v(" ຂີ້ເຫື້ຍອທີ່ລໍຖ້າເກັບ ")])],1)],1),e(p["a"],[e(c["a"],[e(C["a"],{attrs:{outlined:"",dense:"",clearable:"","prepend-inner-icon":"mdi-magnify",label:"ຄົ້ນຫາ",type:"text"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1),e("div",[t.pending?e(w["a"],{attrs:{headers:t.headers,items:t.pending,search:t.search,"disable-pagination":!0,"hide-default-footer":""},scopedSlots:t._u([{key:"item.created_at",fn:function({item:a}){return[e("div",[t._v(" "+t._s(t.moment(a.created_at).format("DD-MM-YY hh:mm "))+" ")])]}},{key:"item.date",fn:function({item:a}){return[e("div",[t._v(" "+t._s(t.moment(a.date).format("DD-MM-YY hh:mm:ss"))+" ")])]}},{key:"item.route_plan_detail.customer.full_name",fn:function({item:a}){return[e("a",{attrs:{href:"#"},on:{click:function(e){return t.openRoute(a)}}},[t._v(t._s(a.route_plan_detail.customer.full_name))])]}},{key:"item.status",fn:function({item:a}){return[e($["a"],{attrs:{color:"error",label:""}},[t._v(" "+t._s(a.status)+" ")])]}},{key:"item.amount",fn:function({item:a}){return["bag"==a.collection_type||"chartered"==a.collection_type||"32km"==a.collection_type||"infect"==a.collection_type?e("div",[e($["a"],{attrs:{color:"primary"}},[t._v(" "+t._s(a.bag)+" ")]),e("span",[t._v(" "+t._s(t.getUnit(a.collection_type)))])],1):"fix_cost"==a.collection_type?e("div",[e("span",[t._v(" "+t._s(t.getUnit(a.collection_type)))])]):e("div",[e($["a"],{attrs:{color:"success"}},[t._v(" "+t._s(a.container)+" ")]),e("span",[t._v(" "+t._s(t.getUnit(a.collection_type)))])],1)]}},{key:"item.actions",fn:function({item:a}){return[e(u["a"],{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.viewPage(a.plan_calendar_id,a.id)}}},[t._v(" mdi-eye ")]),e(u["a"],{attrs:{small:""},on:{click:function(e){return t.openUpdate(a)}}},[t._v(" mdi-truck ")])]}}],null,!1,924788718)}):t._e(),e("br"),[t.pagination.total_pages>1?e("Pagination",{attrs:{pagination:t.pagination,offset:t.offset},on:{paginate:function(e){return t.fetchData()}}}):t._e()]],2),e(k["a"],{attrs:{"max-width":"620px",persistent:""},model:{value:t.confirmDialog,callback:function(e){t.confirmDialog=e},expression:"confirmDialog"}},[[e(r["a"],[e(o["b"],[e(o["c"],[e("p",[e(u["a"],{staticClass:"primary-color",attrs:{large:"",color:"success"}},[t._v(" mdi-checkbox-marked-circle-outline ")]),t._v(" ຢືນຢັນການເກັບຂີ້ເຫື້ຍອ ")],1)]),e(l["a"],[e(N["a"],{ref:"form",attrs:{"lazy-validation":""}},[e("div",[e(p["a"],[e(c["a"],{attrs:{cols:"12"}},[e(Q["a"],{attrs:{label:"ສະຖານະການຊຳລະ",outlined:"",dense:"",items:t.confirm_statues,"item-text":"name","item-value":"value"},model:{value:t.confirm_status,callback:function(e){t.confirm_status=e},expression:"confirm_status"}})],1)],1),"reject"==t.confirm_status?e(p["a"],[e(c["a"],{attrs:{cols:"12"}},[e(C["a"],{attrs:{label:"Description",outlined:"",dense:"",type:"text"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),e("p",{staticClass:"errors"},[t._v(" "+t._s(t.server_errors.description)+" ")])],1)],1):t._e(),e(p["a"],[e(o["a"],[e(n["a"],{staticClass:"white--text px-12 c-btn",attrs:{color:"blue",medium:"",loading:t.loading,disabled:t.loading},on:{click:function(e){return t.confirmStatus()}}},[t._v(" ຢືນຢັນ ")]),e(n["a"],{staticClass:"white--text px-12 c-btn",attrs:{color:"error",medium:""},on:{click:function(e){t.confirmDialog=!1}}},[t._v(" Close ")])],1)],1)],1)])],1)],1)],1)]],2)],1)},nt=[],rt={name:"Trash",data(){return{pending:[],loading:!1,calendarId:"",offset:12,pagination:{},per_page:100,search:"",oldVal:"",statuses:["reject"],confirm_status:"success",confirm_statues:[{name:"Success",value:"success"}],confirmDialog:!1,editItem:{},description:"",server_errors:{},headers:[{text:"ລຳດັບຄວາມສຳຄັນ",value:"priority"},{text:"ໄອດີ",value:"route_plan_detail.customer.customer_id"},{text:"ລູກຄ້າ",value:"route_plan_detail.customer.full_name"},{text:"ເບີໂທ",value:"route_plan_detail.customer.user.phone"},{text:"ຈຳນວນຂີ້ເຫື້ຍອ",value:"amount",align:"center",sortable:!1},{text:"ສະຖານະ",value:"status",align:"center",sortable:!1},{text:"ວັນທີສ້າງ",value:"created_at",align:"center",sortable:!1},{text:"ວັນທີເກັບ",value:"collected_at",align:"center",sortable:!1},{text:"",value:"actions",sortable:!1}]}},watch:{search(t){""==t&&this.fetchData()},description(){this.server_errors.description=""}},created(){this.fetchData()},methods:{openRoute(t){const e="home"==t.route_plan_detail.customer.customer_type?"ViewClient":"ViewCompanyDetail/",a=this.$router.resolve({name:e,params:{id:t.route_plan_detail.customer.id}});window.open(a.href)},backPrevios(){this.$router.go(-1)},fetchData(){this.$store.commit("Loading_State",!0),this.$axios.get(`plan-calendar/${this.$route.params.id}/detail`,{params:{page:this.pagination.current_page,per_page:this.per_page,statuses:this.statuses}}).then(t=>{200==t.data.code&&setTimeout(()=>{this.$store.commit("Loading_State",!1),this.pending=t.data.data.data,this.summary=t.data.data.summary,this.pagination=t.data.data.pagination},100)}).catch(t=>{this.$store.commit("Loading_State",!1),t.response&&422==t.response.status&&(this.toast.msg=t.message)})},openUpdate(t){this.editItem=t,this.confirmDialog=!0},confirmStatus(){this.$store.commit("Loading_State",!0);const t=new FormData;t.append("status",this.confirm_status),"reject"==this.confirm_status&&t.append("description",this.description),t.append("_method","PUT"),this.$axios.post(`admin-collection/${this.editItem.id}/status`,t).then(t=>{200==t.data.code&&setTimeout(()=>{this.$store.commit("Loading_State",!1),this.$store.commit("Toast_State",{value:!0,color:"success",msg:t.data.message}),this.fetchData(),this.confirmDialog=!1},300)}).catch(t=>{if(this.$store.commit("Loading_State",!1),this.$store.commit("Toast_State",{value:!0,color:"error",msg:t.response?t.response.data.message:"Something went wrong"}),t.response&&422==t.response.status){const e=t.response.data.errors;for(const[t,a]of Object.entries(e))this.server_errors[t]=a[0]}})},statusColor(t){return"pending"==t?"info":"success"==t?"success":"error"},getUnit(t){return"bag"==t||"32km"==t||"infect"==t||"chartered"==t?"ຖົງ":"fix_cost"==t?"ຖ້ຽວ":"container"==t?"ຄອນເທັນເນີ":""},Search(){Object(P["a"])(this)},viewPage(t,e){this.$router.push({name:"TrashDetail",params:{plan_calendar:t,id:e}})}}},ot=rt,ct=(a("c5c0"),Object(Y["a"])(ot,it,nt,!1,null,null,null)),lt=ct.exports,ut=function(){var t=this,e=t._self._c;return e(l["a"],[e(p["a"],[e(c["a"],[e(i["a"],{staticClass:"pa-0",attrs:{large:""}},[t._v(" ຂີ້ເຫື້ຍອທີ່ຍັກເລີກ ")])],1)],1),e(p["a"],[e(c["a"],[e(C["a"],{attrs:{outlined:"",dense:"",clearable:"","prepend-inner-icon":"mdi-magnify",label:"ຄົ້ນຫາ",type:"text"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1),e("div",[t.pending?e(w["a"],{attrs:{headers:t.headers,items:t.pending,search:t.search,"disable-pagination":!0,"hide-default-footer":""},scopedSlots:t._u([{key:"item.created_at",fn:function({item:a}){return[e("div",[t._v(" "+t._s(t.moment(a.created_at).format("DD-MM-YY hh:mm "))+" ")])]}},{key:"item.date",fn:function({item:a}){return[e("div",[t._v(" "+t._s(t.moment(a.date).format("DD-MM-YY hh:mm:ss"))+" ")])]}},{key:"item.route_plan_detail.customer.full_name",fn:function({item:a}){return[e("a",{attrs:{href:"#"},on:{click:function(e){return t.openRoute(a)}}},[t._v(t._s(a.route_plan_detail.customer.full_name))])]}},{key:"item.status",fn:function({item:a}){return[e($["a"],{attrs:{color:"orange",label:""}},[t._v(" "+t._s(a.status)+" ")])]}},{key:"item.amount",fn:function({item:a}){return["bag"==a.collection_type||"chartered"==a.collection_type||"32km"==a.collection_type||"infect"==a.collection_type?e("div",[e($["a"],{attrs:{color:"primary"}},[t._v(" "+t._s(a.bag)+" ")]),e("span",[t._v(" "+t._s(t.getUnit(a.collection_type)))])],1):"fix_cost"==a.collection_type?e("div",[e("span",[t._v(" "+t._s(t.getUnit(a.collection_type)))])]):e("div",[e($["a"],{attrs:{color:"success"}},[t._v(" "+t._s(a.container)+" ")]),e("span",[t._v(" "+t._s(t.getUnit(a.collection_type)))])],1)]}},{key:"item.actions",fn:function({item:a}){return[e(u["a"],{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.viewPage(a.plan_calendar_id,a.id)}}},[t._v(" mdi-eye ")])]}}],null,!1,193518323)}):t._e(),e("br"),[t.pagination.total_pages>1?e("Pagination",{attrs:{pagination:t.pagination,offset:t.offset},on:{paginate:function(e){return t.fetchData()}}}):t._e()]],2)],1)},dt=[],mt={name:"Trash",data(){return{pending:[],loading:!1,calendarId:"",offset:12,pagination:{},per_page:100,search:"",oldVal:"",statuses:["canceled"],headers:[{text:"ລຳດັບຄວາມສຳຄັນ",value:"priority"},{text:"ໄອດີ",value:"route_plan_detail.customer.customer_id"},{text:"ລູກຄ້າ",value:"route_plan_detail.customer.full_name"},{text:"ເບີໂທ",value:"route_plan_detail.customer.user.phone"},{text:"ຈຳນວນຂີ້ເຫື້ຍອ",value:"amount",align:"center",sortable:!1},{text:"ສະຖານະ",value:"status",align:"center",sortable:!1},{text:"ວັນທີສ້າງ",value:"created_at",align:"center",sortable:!1},{text:"ວັນທີເກັບ",value:"collected_at",align:"center",sortable:!1},{text:"",value:"actions",sortable:!1}]}},watch:{search(t){""==t&&this.fetchData()}},created(){this.fetchData()},methods:{openRoute(t){const e="home"==t.route_plan_detail.customer.customer_type?"ViewClient":"ViewCompanyDetail/",a=this.$router.resolve({name:e,params:{id:t.route_plan_detail.customer.id}});window.open(a.href)},backPrevios(){this.$router.go(-1)},fetchData(){this.$store.commit("Loading_State",!0),this.$axios.get(`plan-calendar/${this.$route.params.id}/detail`,{params:{page:this.pagination.current_page,per_page:this.per_page,statuses:this.statuses}}).then(t=>{200==t.data.code&&setTimeout(()=>{this.$store.commit("Loading_State",!1),this.pending=t.data.data.data,this.summary=t.data.data.summary,this.pagination=t.data.data.pagination},100)}).catch(t=>{this.$store.commit("Loading_State",!1),t.response&&422==t.response.status&&(this.toast.msg=t.message)})},statusColor(t){return console.log(t),"pending"==t?"info":"success"==t?"success":"reject"==t?"error":"cancel"==t?"orange":"error"},getUnit(t){return"bag"==t||"32km"==t||"infect"==t||"chartered"==t?"ຖົງ":"fix_cost"==t?"ຖ້ຽວ":"container"==t?"ຄອນເທັນເນີ":""},Search(){Object(P["a"])(this)},viewPage(t,e){this.$router.push({name:"TrashDetail",params:{plan_calendar:t,id:e}})}}},ht=mt,_t=(a("1d3e"),Object(Y["a"])(ht,ut,dt,!1,null,null,null)),pt=_t.exports,ft={title(){return"Vientiane Waste Co-Dev|Calendar"},components:{allTrash:R,pendingTrash:G,successTrash:K,waitToConfirmTrash:st,rejectTrash:lt,cancelTrash:pt},mixins:[U],props:["plan"],data(){return{tab:null,data:{}}},watch:{tab(t){"tab-1"==t?this.$router.push({name:"PlanCalendarDetail",query:{tab:"trash-all"}}).catch(()=>{}):"tab-2"==t?this.$router.push({name:"PlanCalendarDetail",query:{tab:"trash-pending"}}).catch(()=>{}):"tab-3"==t?this.$router.push({name:"PlanCalendarDetail",query:{tab:"wait-to-confirm"}}).catch(()=>{}):"tab-4"==t?this.$router.push({name:"PlanCalendarDetail",query:{tab:"trash-success"}}).catch(()=>{}):"tab-5"==t?this.$router.push({name:"PlanCalendarDetail",query:{tab:"trash-reject"}}).catch(()=>{}):"tab-6"==t&&this.$router.push({name:"PlanCalendarDetail",query:{tab:"trash-cancel"}}).catch(()=>{})}},created(){"trash-all"==this.$route.query.tab?this.tab="tab-1":"trash-pending"==this.$route.query.tab?this.tab="tab-2":"wait-to-confirm"==this.$route.query.tab?this.tab="tab-3":"trash-success"==this.$route.query.tab?this.tab="tab-4":"trash-reject"==this.$route.query.tab?this.tab="tab-5":"trash-cancel"==this.$route.query.tab&&(this.tab="tab-6"),this.fetchDataPlanMonth()},methods:{backPrevios(){this.$router.go(-1)},updatePlanCalendar(){this.$store.commit("Loading_State",!0),this.$axios.post("update-from-route/"+this.$route.params.id).then(t=>{this.$store.commit("Loading_State",!1),setTimeout(()=>{this.$store.commit("Loading_State",!1),this.$store.commit("modalDelete_State",!1),this.fetchData(),this.$store.commit("Toast_State",{value:!0,color:"success",msg:t.data.message})},300),200==t.data.code&&this.fetchPlanCalendar()}).catch(t=>{this.$store.commit("Loading_State",!1),this.$store.commit("Toast_State",{value:!0,color:"error",msg:t.response?t.response.data.message:"Something went wrong"})})},fetchDataPlanMonth(){this.$axios.get(`plan-month/${this.$route.params.planMonthId}/plan-calendar/${this.$route.params.id}`).then(t=>{200==t.data.code&&setTimeout(()=>{this.data=t.data.data},100)}).catch(()=>{})}}},gt=ft,vt=Object(Y["a"])(gt,y,x,!1,null,null,null);e["default"]=vt.exports}}]);
//# sourceMappingURL=chunk-000cbf6d.35182ec1.js.map