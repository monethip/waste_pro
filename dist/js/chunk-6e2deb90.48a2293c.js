(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e2deb90"],{"4b2e":function(e,t,s){"use strict";s("e34a");var r=s("7bd6"),i=s("db1d"),a=s("1a18"),o=s("72e5"),n=s("50f6"),l=s("f0be");const p=Object(n["a"])(i["a"],Object(a["a"])("stepper","v-stepper-step","v-stepper"));t["a"]=p.extend().extend({name:"v-stepper-step",directives:{ripple:o["a"]},inject:["stepClick"],props:{color:{type:String,default:"primary"},complete:Boolean,completeIcon:{type:String,default:"$complete"},editable:Boolean,editIcon:{type:String,default:"$edit"},errorIcon:{type:String,default:"$error"},rules:{type:Array,default:()=>[]},step:[Number,String]},data(){return{isActive:!1,isInactive:!0}},computed:{classes(){return{"v-stepper__step--active":this.isActive,"v-stepper__step--editable":this.editable,"v-stepper__step--inactive":this.isInactive,"v-stepper__step--error error--text":this.hasError,"v-stepper__step--complete":this.complete}},hasError(){return this.rules.some(e=>!0!==e())}},mounted(){this.stepper&&this.stepper.register(this)},beforeDestroy(){this.stepper&&this.stepper.unregister(this)},methods:{click(e){e.stopPropagation(),this.$emit("click",e),this.editable&&this.stepClick(this.step)},genIcon(e){return this.$createElement(r["a"],e)},genLabel(){return this.$createElement("div",{staticClass:"v-stepper__label"},this.$slots.default)},genStep(){const e=!(this.hasError||!this.complete&&!this.isActive)&&this.color;return this.$createElement("span",this.setBackgroundColor(e,{staticClass:"v-stepper__step__step"}),this.genStepContent())},genStepContent(){const e=[];return this.hasError?e.push(this.genIcon(this.errorIcon)):this.complete?this.editable?e.push(this.genIcon(this.editIcon)):e.push(this.genIcon(this.completeIcon)):e.push(String(this.step)),e},keyboardClick(e){e.keyCode===l["y"].space&&this.click(e)},toggle(e){this.isActive=e.toString()===this.step.toString(),this.isInactive=Number(e)<Number(this.step)}},render(e){return e("div",{attrs:{tabindex:this.editable?0:-1},staticClass:"v-stepper__step",class:this.classes,directives:[{name:"ripple",value:this.editable}],on:{click:this.click,keydown:this.keyboardClick}},[this.genStep(),this.genLabel()])}})},"4b32":function(e,t,s){"use strict";s("d9d8")},"657d":function(e,t,s){"use strict";s("e34a"),s("eaae");var r=s("08b4"),i=s("1a18"),a=s("4053"),o=s("50f6"),n=s("fb16");const l=Object(o["a"])(r["a"],Object(i["b"])("stepper"),a["a"]);t["a"]=l.extend({name:"v-stepper",provide(){return{stepClick:this.stepClick,isVertical:this.vertical}},props:{altLabels:Boolean,nonLinear:Boolean,flat:Boolean,vertical:Boolean},data(){const e={isBooted:!1,steps:[],content:[],isReverse:!1};return e.internalLazyValue=null!=this.value?this.value:(e[0]||{}).step||1,e},computed:{classes(){return{"v-stepper--flat":this.flat,"v-stepper--is-booted":this.isBooted,"v-stepper--vertical":this.vertical,"v-stepper--alt-labels":this.altLabels,"v-stepper--non-linear":this.nonLinear,...r["a"].options.computed.classes.call(this)}},styles(){return{...r["a"].options.computed.styles.call(this)}}},watch:{internalValue(e,t){this.isReverse=Number(e)<Number(t),t&&(this.isBooted=!0),this.updateView()}},created(){this.$listeners.input&&Object(n["a"])("@input","@change",this)},mounted(){this.updateView()},methods:{register(e){"v-stepper-step"===e.$options.name?this.steps.push(e):"v-stepper-content"===e.$options.name&&(e.isVertical=this.vertical,this.content.push(e))},unregister(e){"v-stepper-step"===e.$options.name?this.steps=this.steps.filter(t=>t!==e):"v-stepper-content"===e.$options.name&&(e.isVertical=this.vertical,this.content=this.content.filter(t=>t!==e))},stepClick(e){this.$nextTick(()=>this.internalValue=e)},updateView(){for(let e=this.steps.length;--e>=0;)this.steps[e].toggle(this.internalValue);for(let e=this.content.length;--e>=0;)this.content[e].toggle(this.internalValue,this.isReverse)}},render(e){return e(this.tag,{staticClass:"v-stepper",class:this.classes,style:this.styles},this.$slots.default)}})},d9d8:function(e,t,s){},de3c:function(e,t,s){"use strict";s.r(t);var r=s("45f7"),i=s("84ff"),a=s("dff2"),o=s("2d66"),n=s("8042"),l=s("2599"),p=s("0899"),c=s("798b"),h=s("a972"),u=s("657d"),d=s("de8c"),m=s("ef04"),v=s("4b2e"),f=s("d736"),_=function(){var e=this,t=e._self._c;return t(n["a"],[t(i["a"],[t(a["c"],[t("span",{staticClass:"headline"},[e._v("Add user")])]),t(a["b"],[t(u["a"],{model:{value:e.stepValue,callback:function(t){e.stepValue=t},expression:"stepValue"}},[t(m["a"],[t(v["a"],{attrs:{complete:e.stepValue>1,step:"1"}},[e._v(" Phone Number ")]),t(l["a"]),t(v["a"],{attrs:{complete:e.stepValue>2,step:"2"}},[e._v(" Verify Code ")]),t(l["a"]),t(v["a"],{attrs:{step:"3"}},[e._v(" User Info ")])],1),t(m["b"],[t(d["a"],{attrs:{step:"1"}},[t(h["a"],[t(o["a"],{attrs:{cols:"12"}},[t(p["a"],{ref:"phone",attrs:{"lazy-validation":""}},[t(f["a"],{staticClass:"input-number",attrs:{label:"ເບີໂທ *",required:"",rules:e.phoneRules,type:"number"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),t("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.phone)+" ")])],1)],1),t(r["a"],{attrs:{color:"primary",loading:e.btnVerify,disabled:e.btnVerify},on:{click:e.verifyPhone}},[e._v(" Continue ")])],1),t(d["a"],{attrs:{step:"2"}},[t(h["a"],[t(o["a"],{attrs:{cols:"12"}},[t("div",{staticStyle:{display:"flex","flex-direction":"row"}},[t(c["a"],{ref:"otpInput",staticClass:"otp",attrs:{"input-classes":"otp-input",separator:"","num-inputs":6,"should-auto-focus":!0,"is-input-num":!0},on:{"on-complete":e.handleOnComplete},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),t(r["a"],{staticClass:"btnClear",attrs:{text:""},on:{click:function(t){return e.handleClearInput()}}},[e._v(" Clear ")])],1)])],1),t(r["a"],{attrs:{color:"primary",loading:e.loading,disabled:e.loading},on:{click:e.verifyOtp}},[e._v(" Continue ")])],1),t(d["a"],{attrs:{step:"3"}},[t(n["a"],[t(p["a"],{ref:"form",attrs:{"lazy-validation":""}},[t(h["a"],[t(o["a"],{attrs:{cols:"12"}},[t(f["a"],{attrs:{label:"Name *",required:"",rules:e.nameRules},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}}),t("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.name)+" ")])],1),t(o["a"],{attrs:{cols:"12"}},[t(f["a"],{staticClass:"input-number",attrs:{label:"ເບີໂທ *",required:"",rules:e.phoneRules,type:"number",disabled:""},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),t("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.phone)+" ")])],1),t(o["a"],{attrs:{cols:"12"}},[t(f["a"],{attrs:{label:"Email",required:""},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}),t("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.email)+" ")])],1),t(o["a"],{attrs:{cols:"12"}},[t(f["a"],{attrs:{label:"Password *",type:"password",rules:e.passwordRules,required:""},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),t("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.password)+" ")])],1),t(o["a"],{attrs:{cols:"12"}},[t(f["a"],{attrs:{label:"Password Confirm *",type:"password",rules:e.passwordConfirmRules,required:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.AddItem.apply(null,arguments)}},model:{value:e.user.password_confirmation,callback:function(t){e.$set(e.user,"password_confirmation",t)},expression:"user.password_confirmation"}}),t("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.password_confirmation)+" ")])],1),t(o["a"],{attrs:{cols:"12"}},[t(f["a"],{attrs:{label:"Real Name"},model:{value:e.user.emp_name,callback:function(t){e.$set(e.user,"emp_name",t)},expression:"user.emp_name"}}),t("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.emp_name)+" ")])],1),t(o["a"],{attrs:{cols:"12"}},[t(f["a"],{attrs:{label:"Real Surname"},model:{value:e.user.emp_surname,callback:function(t){e.$set(e.user,"emp_surname",t)},expression:"user.emp_surname"}}),t("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.emp_surname)+" ")])],1),t(o["a"],{attrs:{cols:"12"}},[t(f["a"],{attrs:{label:"Card ID"},model:{value:e.user.emp_card_id,callback:function(t){e.$set(e.user,"emp_card_id",t)},expression:"user.emp_card_id"}}),t("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.emp_card_id)+" ")])],1)],1)],1)],1),t(r["a"],{attrs:{color:"primary",loading:e.loading,disabled:e.loading},on:{click:function(t){return e.AddItem()}}},[e._v(" Save ")])],1)],1)],1)],1)],1),t("div",{attrs:{id:"recaptcha-container"}})],1)},b=[],g=(s("e34a"),s("d8aa")),w={title(){return"Vientiane Waste Co-Dev|User"},name:"User",data(){return{stepValue:1,otp:"",isStepTwo:!1,loading:!1,users:[],user:{},phone:"",edit_user:{},userID:"",server_errors:{email:"",roleId:""},errormsg:"",selectedRole:"",selectedRoles:[],roles:[],revokeRoles:[],permissionDialog:!1,updatePermissionDialog:!1,selectedPermission:"",permissions:[],revokes:[],code:"",appVerifier:"",btnVerify:!1,password:"",password_confirm:"",id_token:"",emailRules:[e=>!!e||"E-mail is required",e=>/.+@.+\..+/.test(e)||"E-mail must be valid"],passwordRules:[e=>!!e||"Password is required",e=>e&&e.length>=8||"Password must be more than 8 characters"],passwordConfirmRules:[e=>!!e||"Password Confirm is required",e=>e&&e.length>=8||"Password must be more than 8 characters"],nameRules:[e=>!!e||"Name is required",e=>e&&e.length>=2||"Name must be less than 2 characters"],phoneRules:[e=>!!e||"Phone is required",e=>e&&e.length>=8&&e.length<=11||"Phone number must be  8 - 11 numbers"],rulePermission:[e=>!!e||"Permission is required"],rulePermissionRole:[e=>!!e||"Role is required"]}},watch:{"user.name":function(){this.server_errors.name=""},"user.phone":function(){this.server_errors.phone=""},"user.email":function(){this.server_errors.email=""},"user.password":function(){this.server_errors.password=""},password(){this.server_errors.password=""},password_confirmation(){this.password_confirmation=""}},created(){this.initReCaptcha()},methods:{AddItem(){!0===this.$refs.form.validate()&&(this.$store.commit("Loading_State",!0),this.user.id_token=this.id_token,this.$axios.post("user-setting/user",this.user).then(e=>{200===e.data.code&&setTimeout(()=>{this.$store.commit("Loading_State",!1),this.user={},this.reset(),this.$router.push({name:"User"}),this.$store.commit("Toast_State",{value:!0,color:"success",msg:e.data.message})},300)}).catch(e=>{if(this.$store.commit("Loading_State",!1),this.$store.commit("Toast_State",{value:!0,color:"error",msg:e.response?e.response.data.message:"Something went wrong"}),e.response&&422===e.response.status){const t=e.response.data.errors;for(const[e,s]of Object.entries(t))this.server_errors[e]=s[0]}}))},verifyPhone(){!0===this.$refs.phone.validate()&&(this.btnVerify=!0,this.$axios.post("unique-phone",{phone:this.phone}).then(e=>{200===e.data.code&&(!1===e.data.data.exists?(this.initReCaptcha(),this.sendOtp(),this.btnVerify=!0):!0===e.data.data.exists&&(this.btnVerify=!1,this.$store.commit("Toast_State",{value:!0,color:"error",msg:"ເບີນີ້ມີໃນລະບົບແລ້ວ"})),this.btnVerify=!1)}).catch(()=>{this.btnVerify=!1}))},sendOtp(){const e="+85620",t=e+this.phone,{appVerifier:s}=this;g["a"].auth().signInWithPhoneNumber(t,s).then(e=>{window.confirmationResult=e,this.stepValue=2}).catch(()=>{this.$store.commit("Toast_State",{value:!0,color:"error",msg:"SMS not sent"})})},verifyOtp(){const e=Array.from(this.$refs.otpInput.otp).join("");window.confirmationResult.confirm(e).then(e=>{if(e){const t=e.user;this.id_token=t._lat,console.log(this.id_token),this.stepValue=3}}).catch(()=>{this.$store.commit("Toast_State",{value:!0,color:"error",msg:"ມີບາງຢ່າງຜິດພາດ ກະລຸນາລອງໃໝ່"})})},initReCaptcha(){setTimeout(()=>{window.recaptchaVerifier=new g["a"].auth.RecaptchaVerifier("recaptcha-container",{size:"invisible","expired-callback":function(){}}),this.appVerifier=window.recaptchaVerifier},1e3)},reset(){this.$refs.form.reset()},handleOnComplete(e){this.code=e},handleClearInput(){this.$refs.otpInput.clearInput()}}},y=w,C=(s("4b32"),s("d22c")),k=Object(C["a"])(y,_,b,!1,null,null,null);t["default"]=k.exports},de8c:function(e,t,s){"use strict";var r=s("8e50"),i=s("1a18"),a=s("f0be"),o=s("50f6");const n=Object(o["a"])(Object(i["a"])("stepper","v-stepper-content","v-stepper"));t["a"]=n.extend().extend({name:"v-stepper-content",inject:{isVerticalProvided:{from:"isVertical"}},props:{step:{type:[Number,String],required:!0}},data(){return{height:0,isActive:null,isReverse:!1,isVertical:this.isVerticalProvided}},computed:{computedTransition(){const e=this.$vuetify.rtl?!this.isReverse:this.isReverse;return e?r["g"]:r["h"]},styles(){return this.isVertical?{height:Object(a["h"])(this.height)}:{}}},watch:{isActive(e,t){e&&null==t?this.height="auto":this.isVertical&&(this.isActive?this.enter():this.leave())}},mounted(){this.$refs.wrapper.addEventListener("transitionend",this.onTransition,!1),this.stepper&&this.stepper.register(this)},beforeDestroy(){this.$refs.wrapper.removeEventListener("transitionend",this.onTransition,!1),this.stepper&&this.stepper.unregister(this)},methods:{onTransition(e){this.isActive&&"height"===e.propertyName&&(this.height="auto")},enter(){let e=0;requestAnimationFrame(()=>{e=this.$refs.wrapper.scrollHeight}),this.height=0,setTimeout(()=>this.isActive&&(this.height=e||"auto"),450)},leave(){this.height=this.$refs.wrapper.clientHeight,setTimeout(()=>this.height=0,10)},toggle(e,t){this.isActive=e.toString()===this.step.toString(),this.isReverse=t}},render(e){const t={staticClass:"v-stepper__content"},s={staticClass:"v-stepper__wrapper",style:this.styles,ref:"wrapper"};this.isVertical||(t.directives=[{name:"show",value:this.isActive}]);const r=e("div",s,[this.$slots.default]),i=e("div",t,[r]);return e(this.computedTransition,{on:this.$listeners},[i])}})},eaae:function(e,t,s){},ef04:function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return l}));var r=s("f0be"),i=s("657d"),a=s("4b2e"),o=s("de8c");const n=Object(r["j"])("v-stepper__header"),l=Object(r["j"])("v-stepper__items");i["a"],o["a"],a["a"]}}]);
//# sourceMappingURL=chunk-6e2deb90.48a2293c.js.map