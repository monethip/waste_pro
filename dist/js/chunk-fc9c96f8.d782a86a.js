(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fc9c96f8"],{"54da":function(t,e,a){"use strict";e["a"]=function(t){const e={};if(!t[0]){for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(void 0!==t[e]&&null!==t[e]&&""!==t[e]||delete t[e]);return t}for(const a of t)1==Object.keys(a).length&&a[Object.keys(a)]&&(e[Object.keys(a)]=a[Object.keys(a)]);return e}},"6eceb":function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));const s=t=>{""!==t.search?""!==t.oldVal?t.oldVal!==t.search&&(t.oldVal=t.search,t.pagination.current_page=1,t.fetchData()):(""!==t.search&&(t.pagination.current_page=1,t.fetchData()),t.oldVal=t.search):t.oldVal=""}},d1dd:function(t,e,a){"use strict";a.r(e);var s=a("8212"),n=a("8336"),i=a("b0af"),r=a("99d9"),o=a("cc20"),d=a("62ad"),c=a("a523"),l=a("8fea"),u=a("2e4b"),h=a("e449"),_=a("0fd9"),m=a("b974"),f=a("8654"),p=function(){var t=this,e=t._self._c;return e(c["a"],[e(_["a"],{staticClass:"mb-n6"},[e(d["a"],[e(n["a"],{staticClass:"btn-primary",attrs:{loading:t.loading,disabled:t.loading},on:{click:t.exportData}},[t._v(" Export ")])],1),e(d["a"],[e(h["a"],{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(f["a"],t._g(t._b({attrs:{label:"ເລີ່ມວັນທີ",readonly:"",outlined:"",dense:"",clearable:""},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}},"v-text-field",s,!1),a))]}}]),model:{value:t.start_menu,callback:function(e){t.start_menu=e},expression:"start_menu"}},[e(u["a"],{model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}})],1)],1),e(d["a"],[e(h["a"],{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(f["a"],t._g(t._b({attrs:{label:"ຫາວັນທີ",readonly:"",outlined:"",dense:"",clearable:""},model:{value:t.end_date,callback:function(e){t.end_date=e},expression:"end_date"}},"v-text-field",s,!1),a))]}}]),model:{value:t.end_menu,callback:function(e){t.end_menu=e},expression:"end_menu"}},[e(u["a"],{model:{value:t.end_date,callback:function(e){t.end_date=e},expression:"end_date"}})],1)],1),e(d["a"],[e(m["a"],{attrs:{outlined:"",dense:"",items:t.status,"item-text":"name","item-value":"name",label:"ສະຖານະ",clearable:""},model:{value:t.selectedStatus,callback:function(e){t.selectedStatus=e},expression:"selectedStatus"}})],1),e(d["a"],[e(f["a"],{attrs:{outlined:"",dense:"",clearable:"","prepend-inner-icon":"mdi-magnify",label:"ຊື່ລູກຄ້າ",type:"text"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.Search()}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1),e(_["a"],{staticClass:"my-n4"},[e(d["a"],[e("p",{staticClass:"text"},[t._v(" ລວມ "+t._s(t.pagination.total)+" ຄົນ ")])])],1),e("div",[e(i["a"],[e(i["a"],{attrs:{flat:""}},[e(r["b"],[e(l["a"],{attrs:{headers:t.headers,items:t.customers,search:t.search,"disable-pagination":!0,"hide-default-footer":""},scopedSlots:t._u([{key:"item.media",fn:function({item:a}){return t._l(a.media,(function(a,n){return e(s["a"],{key:n,attrs:{size:"36px"}},[a.thumb?e("img",{attrs:{src:a.thumb}}):t._e()])}))}},{key:"item.status",fn:function({item:a}){return[e(o["a"],{attrs:{label:"",color:t.statusColor(a.status)}},[t._v(" "+t._s(a.status)+" ")])]}},{key:"item.roles",fn:function({item:a}){return[e("div",t._l(a.roles,(function(a,s){return e("span",{key:s},[t._v(" "+t._s(a.name)+", ")])})),0)]}},{key:"item.permissions",fn:function({item:a}){return[e("div",t._l(a.permissions,(function(a,s){return e("span",{key:s},[e("span",[t._v(t._s(a.name)+", ")])])})),0)]}}])}),e("br"),[t.pagination.total_pages>1?e("Pagination",{attrs:{pagination:t.pagination,offset:t.offset},on:{paginate:function(e){return t.fetchData()}}}):t._e()]],2)],1)],1)],1)],1)},g=[],b=a("6eceb"),v=a("54da"),k={name:"Customer",title(){return"Vientiane Waste Co-Dev|Report Driver"},data(){return{start_date:"",end_date:"",start_menu:!1,end_menu:!1,customers:[],loading:!1,customerId:"",offset:12,pagination:{},per_page:100,search:"",oldVal:"",districts:[],selectedDistrict:"",villages:[],selectedVillage:[],selectedStatus:"",status:[{id:1,name:"active"},{id:2,name:"inactive"}],headers:[{text:"ຊື່",value:"name"},{text:"ນາມສະກຸນ",value:"surname"},{text:"ເບີໂທ",value:"user.phone",sortable:!1},{text:"Email",value:"user.email",sortable:!1},{text:"ທະບຽນລົດ",value:"vehicle.car_number"},{text:"ສະຖານະ",value:"status",sortable:!1},{text:"Profile",value:"media",sortable:!1},{text:"",value:"actions",sortable:!1}]}},watch:{search(t){this.pagination.current_page="",""==t&&this.fetchData()},selectedStatus(){this.pagination.current_page="",this.fetchData()},start_date(){this.pagination.current_page="",""!==this.end_date&&""!==this.start_date&&this.start_date>this.end_date&&(this.start_date=""),this.fetchData()},end_date(){this.pagination.current_page="",""!==this.end_date&&""!==this.start_date&&this.end_date<this.start_date&&(this.end_date=""),this.fetchData()}},created(){this.fetchData()},methods:{fetchData(){this.$store.commit("Loading_State",!0),this.$axios.get("driver",{params:Object(v["a"])([{page:this.pagination.current_page},{per_page:this.per_page},{filter:this.search},{date_from:this.start_date},{date_end:this.end_date},{status:this.selectedStatus}])}).then(t=>{200==t.data.code&&(this.$store.commit("Loading_State",!1),this.customers=t.data.data.data,this.pagination=t.data.data.pagination,this.start_menu=!1,this.end_menu=!1)}).catch(()=>{this.$store.commit("Loading_State",!1),this.start_menu=!1,this.end_menu=!1})},Search(){Object(b["a"])(this)},statusColor(t){return"active"==t?"primary":"inactive"==t?"error":"info"},exportData(){this.$store.commit("Loading_State",!0),this.$axios.post("export-driver/",{status:this.selectedStatus,date_from:this.start_date,date_end:this.end_date}).then(t=>{200==t.status&&(null!=t.data.data.download_link&&window.open(t.data.data.download_link),this.$store.commit("Loading_State",!1))}).catch(t=>{this.$store.commit("Toast_State",{value:!0,color:"error",msg:t.response?t.response.data.message:"Something went wrong"}),this.$store.commit("Loading_State",!1)})}}},x=k,y=(a("f687"),a("2877")),S=Object(y["a"])(x,p,g,!1,null,null,null);e["default"]=S.exports},dd93:function(t,e,a){},f687:function(t,e,a){"use strict";a("dd93")}}]);
//# sourceMappingURL=chunk-fc9c96f8.d782a86a.js.map