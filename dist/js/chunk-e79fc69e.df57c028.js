(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e79fc69e"],{"04df":function(e,t,r){},1157:function(e,t,r){"use strict";r("04df")},"4bd4":function(e,t,r){"use strict";var a=r("5530"),s=(r("caad"),r("2532"),r("07ac"),r("4de4"),r("159b"),r("7db0"),r("58df")),n=r("7e2b"),i=r("3206");t["a"]=Object(s["a"])(n["a"],Object(i["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(e){var t=Object.values(e).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput:function(e){var t=this,r=function(e){return e.$watch("hasError",(function(r){t.$set(t.errorBag,e._uid,r)}),{immediate:!0})},a={_uid:e._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?a.shouldValidate=e.$watch("shouldValidate",(function(s){s&&(t.errorBag.hasOwnProperty(e._uid)||(a.valid=r(e)))})):a.valid=r(e),a},validate:function(){return 0===this.inputs.filter((function(e){return!e.validate(!0)})).length},reset:function(){this.inputs.forEach((function(e){return e.reset()})),this.resetErrorBag()},resetErrorBag:function(){var e=this;this.lazyValidation&&setTimeout((function(){e.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(e){return e.resetValidation()})),this.resetErrorBag()},register:function(e){this.inputs.push(e),this.watchers.push(this.watchInput(e))},unregister:function(e){var t=this.inputs.find((function(t){return t._uid===e._uid}));if(t){var r=this.watchers.find((function(e){return e._uid===t._uid}));r&&(r.valid(),r.shouldValidate()),this.watchers=this.watchers.filter((function(e){return e._uid!==t._uid})),this.inputs=this.inputs.filter((function(e){return e._uid!==t._uid})),this.$delete(this.errorBag,t._uid)}}},render:function(e){var t=this;return e("form",{staticClass:"v-form",attrs:Object(a["a"])({novalidate:!0},this.attrs$),on:{submit:function(e){return t.$emit("submit",e)}}},this.$slots.default)}})},"4fad":function(e,t,r){var a=r("23e7"),s=r("6f53").entries;a({target:"Object",stat:!0},{entries:function(e){return s(e)}})},"54da":function(e,t,r){"use strict";var a=r("b85c");r("b64b");t["a"]=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r={},s=Object(a["a"])(t);try{for(s.s();!(e=s.n()).done;){var n=e.value;1==Object.keys(n).length&&n[Object.keys(n)]&&(r[Object.keys(n)]=n[Object.keys(n)])}}catch(i){s.e(i)}finally{s.f()}return r}},"6eceb":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("ac1f"),r("841c");var a=function(e){""!==e.search?""!==e.oldVal?e.oldVal!==e.search&&(e.oldVal=e.search,e.pagination.current_page=1,e.fetchData()):(""!==e.search&&(e.pagination.current_page=1,e.fetchData()),e.oldVal=e.search):e.oldVal=""}},ea06:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-breadcrumbs",{attrs:{large:""}},[r("v-btn",{staticClass:"text-primary",attrs:{text:""},on:{click:function(t){return e.backPrevios()}}},[r("v-icon",[e._v("mdi-keyboard-backspace")])],1),r("div",[e._v("ເລືອກ User")])],1),r("v-row",{attrs:{justify:"center"}},[r("v-col",[r("v-card",{staticClass:"pa-2"},[r("v-card-title",{staticClass:"my-auto"},[e._v(" ຂໍ້ມູນ Users ("+e._s(e.pagination.total)+") "),r("v-divider",{staticClass:"mx-4",attrs:{vertical:""}}),r("v-spacer"),r("v-row",[r("v-col",[r("v-btn",{attrs:{dark:"",color:"primary"},on:{click:e.OpenModalAdd}},[e._v("ເພີ່ມລູກຄ້າ Pre Customer")])],1),r("v-col",[r("v-text-field",{attrs:{clearable:"","prepend-inner-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",outlined:"",dense:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.Search()}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("v-col",[r("v-text-field",{staticClass:"input-number",attrs:{clearable:"","prepend-inner-icon":"mdi-magnify",label:"Phone",type:"number","single-line":"","hide-details":"",outlined:"",dense:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.SearchPhone()}},model:{value:e.searchPhone,callback:function(t){e.searchPhone=t},expression:"searchPhone"}})],1)],1)],1),r("v-data-table",{attrs:{headers:e.headers,items:e.users,search:e.search,"disable-pagination":!0,"hide-default-footer":""},scopedSlots:e._u([{key:"item.customer",fn:function(t){var a=t.item;return[r("div",[e._v(e._s(a.name))])]}},{key:"item.customerType",fn:function(t){var a=t.item;return[a.customer?r("div",["home"==a.customer.customer_type?r("div",{staticClass:"success--text"},[e._v("ຄົວເຮືອນ")]):"company"==a.customer.customer_type?r("div",{staticClass:"info--text"},[e._v("ຫົວໜ່ວຍທຸລະກິດ")]):e._e()]):r("div",{staticClass:"error--text"},[e._v("ຍັງບໍ່ທັນສະໝັກບໍລິການ")])]}},{key:"item.status",fn:function(t){var a=t.item;return[r("v-btn",{staticClass:"btn-primary elevation-0",attrs:{medium:""},on:{click:function(t){return e.createPage(a)}}},[r("v-icon",[e._v("mdi-plus")]),e._v("ເພີ່ມ ")],1)]}}])}),r("br"),[e.pagination.total_pages>1?r("Pagination",{attrs:{pagination:e.pagination,offset:e.offset},on:{paginate:function(t){return e.fetchData()}}}):e._e()]],2)],1)],1),r("ModalAdd",[[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Add user")])]),r("v-card-text",[r("v-container",[r("v-form",{ref:"form",attrs:{"lazy-validation":""}},[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"Name "},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}}),r("p",{staticClass:"errors"},[e._v(e._s(e.server_errors.name))])],1),r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{staticClass:"input-number",attrs:{label:"ເບີໂທ *",required:"",rules:e.phoneRules,type:"number"},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"Email",required:""},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}),r("p",{staticClass:"errors"},[e._v(e._s(e.server_errors.email))])],1),r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"Password Confirm",type:"password",required:"",rules:e.passwordRules,autocomplete:""},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),r("p",{staticClass:"errors"},[e._v(e._s(e.server_errors.password))])],1),r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"Password",type:"password",required:"",rules:e.passwordRules,autocomplete:""},model:{value:e.user.password_confirmation,callback:function(t){e.$set(e.user,"password_confirmation",t)},expression:"user.password_confirmation"}}),r("p",{staticClass:"errors"},[e._v(e._s(e.server_errors.password_confirmation))])],1)],1)],1)],1)],1),r("v-card-text",[r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.closeAddModal()}}},[e._v("Close")]),r("v-btn",{attrs:{color:"blue darken-1",text:"",loading:e.loading,disabled:e.loading},on:{click:function(t){return e.AddItem()}}},[e._v("Save")])],1)],1)],1)]],2)],1)},s=[],n=r("3835"),i=(r("4fad"),r("ac1f"),r("841c"),r("6eceb")),o=r("54da"),c={title:function(){return"Vientiane Waste Co-Dev|User"},name:"User",data:function(){return{stepValue:1,otp:"",isStepTwo:!1,headers:[{text:"ລູກຄ້າ",value:"customer",width:"150px"},{text:"ເບີໂທ",value:"phone",sortable:!1},{text:"ປະເພດລູກຄ້າ",value:"customerType",sortable:!1,width:"150px"},{text:"Email",value:"email",sortable:!1},{text:"",value:"status",sortable:!1,align:"center"}],loading:!1,users:[],user:{},phone:"",server_errors:{email:"",roleId:""},selectedRole:"",selectedRoles:[],roles:[],offset:12,pagination:{},per_page:100,search:"",searchPhone:"",oldVal:"",statuses:[{name:"active"},{name:"inactive"}],status:"",id_token:"",passwordRules:[function(e){return!!e||"Password is required"},function(e){return e&&e.length>=8||"Password must be more than 8 characters"}],passwordConfirmRules:[function(e){return!!e||"Password Confirm is required"},function(e){return e&&e.length>=8||"Password must be more than 8 characters"}],phoneRules:[function(e){return!!e||"Phone is required"},function(e){return e&&e.length>=8&&e.length<=11||"Phone number must be  8 - 11 numbers"}]}},methods:{OpenModalAdd:function(){this.$store.commit("modalAdd_State",!0)},closeAddModal:function(){this.$store.commit("modalAdd_State",!1)},AddItem:function(){var e=this;!0===this.$refs.form.validate()&&(this.loading=!0,this.$axios.post("auth/register-pre-customer",this.user).then((function(t){200===t.data.code&&setTimeout((function(){e.loading=!1,e.closeAddModal(),e.reset(),e.createPage(t.data.data),e.$store.commit("Toast_State",{value:!0,color:"success",msg:t.data.message})}),300)})).catch((function(t){if(e.loading=!1,e.$store.commit("Toast_State",{value:!0,color:"error",msg:t.response?t.response.data.message:"Something went wrong"}),t.response&&422===t.response.status)for(var r=t.response.data.errors,a=0,s=Object.entries(r);a<s.length;a++){var i=Object(n["a"])(s[a],2),o=i[0],c=i[1];e.server_errors[o]=c[0]}})))},fetchData:function(){var e=this,t="create-future-customer"==this.$route.query.redirect?["customer","company"]:["pre_customer"];this.$store.commit("Loading_State",!0),this.$axios.get("user-setting/user",{params:Object(o["a"])([{page:this.pagination.current_page},{per_page:this.per_page},{filter:this.search},{phone:this.searchPhone},{roles:t}])}).then((function(t){200===t.data.code&&(e.loading=!1,e.$store.commit("Loading_State",!1),e.users=t.data.data.data,e.pagination=t.data.data.pagination)})).catch((function(t){if(e.$store.commit("Loading_State",!1),t.response&&422===t.response.status)for(var r=t.response.data.errors,a=0,s=Object.entries(r);a<s.length;a++){var i=Object(n["a"])(s[a],2),o=i[0],c=i[1];e.server_errors[o]=c[0]}}))},createPage:function(e){this.$router.push({name:this.$route.query.redirect,params:{items:e}})},backPrevios:function(){this.$router.go(-1)},reset:function(){this.$refs.form.reset()},Search:function(){Object(i["a"])(this)},SearchPhone:function(){Object(i["a"])(this)}},watch:{search:function(e){this.pagination.current_page="",""===e&&this.fetchData()},searchPhone:function(e){this.pagination.current_page="",e.length>4&&this.fetchData()}},created:function(){this.$route.query.redirect||this.$router.push("/"),this.fetchData()}},u=c,l=(r("1157"),r("2877")),d=r("6544"),h=r.n(d),f=r("2bc5"),p=r("8336"),m=r("b0af"),v=r("99d9"),b=r("62ad"),g=r("a523"),_=r("8fea"),w=r("ce7e"),y=r("4bd4"),k=r("132d"),x=r("0fd9"),V=r("2fa4"),$=r("8654"),C=Object(l["a"])(u,a,s,!1,null,null,null);t["default"]=C.exports;h()(C,{VBreadcrumbs:f["a"],VBtn:p["a"],VCard:m["a"],VCardActions:v["a"],VCardText:v["b"],VCardTitle:v["c"],VCol:b["a"],VContainer:g["a"],VDataTable:_["a"],VDivider:w["a"],VForm:y["a"],VIcon:k["a"],VRow:x["a"],VSpacer:V["a"],VTextField:$["a"]})}}]);
//# sourceMappingURL=chunk-e79fc69e.df57c028.js.map