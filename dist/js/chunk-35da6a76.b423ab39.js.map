{"version":3,"sources":["webpack:///../../../src/components/VDataTable/VSimpleTable.ts","webpack:///./src/Helpers/BillingStatus.js","webpack:///./src/Helpers/queryOption.js","webpack:///./src/Helpers/GetValue.js","webpack:///./src/Helpers/Customer.js","webpack:///../../../src/components/VBtn/index.ts","webpack:///./src/views/invoice/v2/event/EventInvoice.vue?4b4b","webpack:///./src/views/invoice/v2/event/EventInvoice.vue","webpack:///src/views/invoice/v2/event/EventInvoice.vue","webpack:///./src/views/invoice/v2/event/EventInvoice.vue?81c5","webpack:///./src/views/invoice/v2/event/EventInvoice.vue?d450"],"names":["mixins","Themeable","extend","name","props","dense","Boolean","fixedHeader","height","Number","String","computed","classes","this","$slots","top","bottom","themeClasses","methods","genWrapper","wrapper","$createElement","staticClass","style","convertToUnit","default","render","h","class","getBgColor","status","getLaoStatus","getLaoBillingType","type","getLaoCollectStatus","payment_methods","value","text","normal","red","units","array","option","item","Object","keys","length","GetOldValueOnInput","context","search","oldVal","pagination","current_page","fetchData","getLaoCompanyCostBy","costBy","getCompanyCostBy","en","la","getLaoCustomerType","getCustomerUnit","getEventStatus","color","billDateList","concatPackage","packageArr","connateArr","packageItem","push","id","Intl","NumberFormat","format","price","VBtn","scopedSlots","key","on","attrs","model","_vm","start_menu","callback","expression","month","getBillingStatus","fn","_v","staticStyle","_c","collections","index","selectedStatus","editDriver","collect_status","getStatusColor","data","requested_by","img","url","$event","editPage","viewBill","billing","offset","_e","closeAddModal","createPage","loading","staticRenderFns","title","collectStatuses","$store","getters","countStatus","count_status","customerId","per_page","server_errors","selectedCollectionStatus","summaryData","collectionStatus","selectedPaymentStatus","paymentStatus","user","image","imageUrl","payment_method","paymentType","confirmType","paymentDialog","rejects","reject_reason_id","description","paymentTypeRule","v","payment","confirm","drivers","headers","sortable","align","width","lastMonthEvent","watch","dispatch","fetchCountData","start_date","start_month","created","fetchDriver","approve","formData","FormData","append","surname","village_id","lat","lng","phone","date","total","driver_id","$axios","post","then","res","code","setTimeout","commit","msg","message","catch","error","response","obj","errors","entries","canApproved","driver","deleteEvent","delete","getCountByStatus","exists","find","existsStatus","canDelete","isSuperAdmin","role","JSON","parse","billingArray","collectedArray","indexOf","getCollectStatus","getFilterCollectStatus","onFileChange","e","input","target","file","files","URL","createObjectURL","moment","get","params","queryOption","page","payment_status","order_by","fetchReject","console","log","$router","choseCustomer","query","redirect","viewPage","route","resolve","window","open","href","billId","paymentConfirmModal","closeConfirmModal","Search","statusColor","component"],"mappings":"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","file":"js/chunk-35da6a76.b423ab39.js","sourcesContent":["import './VSimpleTable.sass'\n\nimport { convertToUnit } from '../../util/helpers'\nimport Themeable from '../../mixins/themeable'\nimport mixins from '../../util/mixins'\nimport { VNode } from 'vue'\n\nexport default mixins(Themeable).extend({\n  name: 'v-simple-table',\n\n  props: {\n    dense: Boolean,\n    fixedHeader: Boolean,\n    height: [Number, String],\n  },\n\n  computed: {\n    classes (): Record<string, boolean> {\n      return {\n        'v-data-table--dense': this.dense,\n        'v-data-table--fixed-height': !!this.height && !this.fixedHeader,\n        'v-data-table--fixed-header': this.fixedHeader,\n        'v-data-table--has-top': !!this.$slots.top,\n        'v-data-table--has-bottom': !!this.$slots.bottom,\n        ...this.themeClasses,\n      }\n    },\n  },\n\n  methods: {\n    genWrapper () {\n      return this.$slots.wrapper || this.$createElement('div', {\n        staticClass: 'v-data-table__wrapper',\n        style: {\n          height: convertToUnit(this.height),\n        },\n      }, [\n        this.$createElement('table', this.$slots.default),\n      ])\n    },\n  },\n\n  render (h): VNode {\n    return h('div', {\n      staticClass: 'v-data-table',\n      class: this.classes,\n    }, [\n      this.$slots.top,\n      this.genWrapper(),\n      this.$slots.bottom,\n    ])\n  },\n})\n","export const getBgColor = function (status) {\n  switch (status) {\n    case 'created':\n    case 'ລໍຖ້າອະນຸມັດ':\n      return '#73b8fd';\n    case 'approved':\n    case 'ອະນຸມັດແລ້ວ':\n      return '#0080fc';\n    case 'canceled':\n    case 'ບິນຖືກຍົກເລີກ':\n      return '#eb004c';\n    case 'rejected':\n    case 'ການຈ່າຍຖືກປະຕິເສດ':\n      return '#740127';\n    case 'to_confirm_payment':\n    case 'ຈ່າຍແລ້ວ ລໍຖ້າກວດສອບ':\n      return '#9c540d';\n    case 'success':\n    case 'ຈ່າຍແລ້ວ ກວດສອບສຳເລັດ':\n      return '#02a38a';\n  }\n};\n\nexport const getLaoStatus = function (status) {\n  switch (status) {\n    case 'created':\n      return 'ລໍຖ້າອະນຸມັດ';\n    case 'approved':\n      return 'ອະນຸມັດແລ້ວ';\n    case 'canceled':\n      return 'ບິນຖືກຍົກເລີກ';\n    case 'rejected':\n      return 'ການຈ່າຍຖືກປະຕິເສດ';\n    case 'to_confirm_payment':\n      return 'ຈ່າຍແລ້ວ ລໍຖ້າກວດສອບ';\n    case 'success':\n      return 'ຈ່າຍແລ້ວ ກວດສອບສຳເລັດ';\n    case 'cash':\n      return 'ຊຳລະເງິນສົດ';\n    case 'bcel':\n      return 'BCEL';\n    default:\n      return status;\n  }\n};\n\nexport const getLaoBillingType = function (type) {\n  switch (type) {\n    case 'CustomBill':\n      return 'ບິນຍ້ອນຫຼັງ';\n    case 'NewCollectionEvent':\n      return 'ບີນບໍລີການຂີ້ເຫຍື້ອພິເສດ';\n    case 'FutureInvoice':\n      return 'ບິນບໍລິການລ່ວງໜ້າ';\n    case 'NewInvoice':\n      return 'ບິນບໍລິການປະຈຳເດືອນ';\n    default:\n      return type;\n  }\n};\n\nexport const getLaoCollectStatus = function (status) {\n  switch (status) {\n    case 'requested':\n      return 'ຮ້ອງຂໍເກັບຂີ້ເຫື້ຍອ';\n    case 'rejected':\n      return 'ປະຕິເສດເກັບຂີ້ເຫື້ຍອ';\n    case 'approved':\n      return 'ອະນຸມັດເກັບຂີ້ເຫື້ຍອ';\n    case 'collected':\n      return 'ເກັບຂີເຫື້ຍອສຳເລັດ';\n    case 'collect_confirm':\n      return 'ລູກຄ້າຢືນຢັນການເກັບ';\n    case 'collect_reject':\n      return 'ການເກັບຖືກປະຕິເສດ';\n    default:\n      return status;\n  }\n};\n\nexport const payment_methods = [\n  {\n    value: 'cash',\n    text: 'ເງິນສົດ',\n  },\n  {\n    value: 'bcel',\n    text: 'ເງິນໂອນ',\n  },\n  {\n    value: 'bcel_online',\n    text: 'bcel bill payments',\n  },\n];\n\nexport const normal = ['created', 'approved', 'to_confirm_payment', 'success'];\nexport const red = ['rejected', 'canceled'];\n\nexport const units = ['kg', 'ຖົງ', 'container', 'ຄັ້ງ'];\n","export default function (array = []) {\n  const option = {};\n  for (const item of array) {\n    if (Object.keys(item).length == 1 && item[Object.keys(item)]) {\n      option[Object.keys(item)] = item[Object.keys(item)];\n    }\n  }\n  return option;\n}\n","export const GetOldValueOnInput = (context) => {\n  if (context.search !== '') {\n    if (context.oldVal !== '') {\n      if (context.oldVal !== context.search) {\n        context.oldVal = context.search;\n        context.pagination.current_page = 1;\n        context.fetchData();\n      }\n    } else {\n      if (context.search !== '') {\n        context.pagination.current_page = 1;\n        context.fetchData();\n      }\n      context.oldVal = context.search;\n    }\n  } else {\n    context.oldVal = '';\n  }\n};\n","export const getLaoCompanyCostBy = function (costBy) {\n  switch (costBy) {\n    case 'container':\n      return 'ຄອນເທນເນີ';\n    case 'fix_cost':\n      return 'ເປັນຖ້ຽວ';\n    case 'chartered':\n      return 'ມອບເໝົາ';\n    case 'bag':\n      return 'ບໍລິມາດ';\n    case 'infect':\n      return 'ຂີ້ເຫຍື້ອຕິດເຊື້ອ';\n    case '32km':\n      return 'ຫຼັກ32';\n    default: return costBy;\n  }\n};\n\nexport const getCompanyCostBy = [\n  {\n    en: 'container',\n    la: 'ຄອນເທນເນີ',\n  },\n  {\n    en: 'fix_cost',\n    la: 'ເປັນຖ້ຽວ',\n  },\n  {\n    en: 'chartered',\n    la: 'ມອບເໝົາ',\n  },\n  {\n    en: 'bag',\n    la: 'ບໍລິມາດ',\n  },\n  {\n    en: 'infect',\n    la: 'ຂີ້ເຫຍື້ອຕິດເຊື້ອ',\n  },\n  {\n    en: '32km',\n    la: 'ຫຼັກ32',\n  },\n];\n\nexport const getPaymentMethod = [\n  {\n    en: 'bcel',\n    la: 'ແນບຮູບບິນ',\n  },\n  {\n    en: 'cash',\n    la: 'ເງິນສົດ',\n  },\n  {\n    en: 'bcel_online',\n    la: 'Bcel Bill Payment',\n  },\n];\n\nexport const getLaoCustomerType = function (type) {\n  switch (type) {\n    case 'company':\n      return 'ຫົວໜ່ວຍທຸລະກິດ';\n    case 'home':\n      return 'ຄົວເຮືອນ';\n    default: return type;\n  }\n};\nexport const getLaoInvoiceTypes = function (type) {\n  switch (type) {\n    case 'FutureInvoice':\n      return 'ຫົວໜ່ວຍທຸລະກິດ';\n    case 'NewInvoice':\n      return 'ຄົວເຮືອນ';\n    case 'NewCollectionEvent':\n      return 'ຄົວເຮືອນ';\n    case 'CustomBill':\n      return 'ຄົວເຮືອນ';\n    default: return type;\n  }\n};\n\nexport const getCustomerUnit = function (costBy) {\n  switch (costBy) {\n    case 'bag':\n    case 'chartered':\n    case '32km':\n    case 'infect':\n      return 'ຖົງ';\n    case 'container':\n      return 'ຄອນເທນເນີ';\n    case 'fix_cost':\n      return 'ຖ້ຽວ';\n    default: return costBy;\n  }\n};\n\nexport const getEventStatus = [\n  {\n    en: 'requested',\n    la: 'ລູກຄ້າຮ້ອງຂໍເຂົ້າມາ',\n    color: '#34495e',\n  },\n  {\n    en: 'rejected',\n    la: 'ປະຕິເສດລູກຄ້າແລ້ວ',\n    color: '#eff3f5',\n  },\n  {\n    en: 'approved',\n    la: 'ອະນຸມັດແລ້ວ ລໍຖ້າລົງເກັບ',\n    color: '#54a0ff',\n  },\n  {\n    en: 'collected',\n    la: 'ເກັບແລ້ວ ລໍຖ້າຢືນຢັນ',\n    color: '#c1c40f',\n  },\n  {\n    en: 'collect_confirm',\n    la: 'ລູກຄ້າຢືນຢັນການເກັບແລ້ວ',\n    color: '#30cb83',\n  },\n  {\n    en: 'collect_reject',\n    la: 'ລູກຄ້າປະຕິເສດການເກັບ',\n    color: '#e74c3c',\n  },\n];\n\nexport const billDateList = [\n  {\n    text: 'ວັນທີຈ່າຍບິນ',\n    value: 'paided_at',\n  },\n  {\n    text: 'ວັນທີສ້າງບິນ',\n    value: 'created_at',\n  },\n  {\n    text: 'ວັນທີອະນຸມັດບິນ',\n    value: 'approved_at',\n  },\n\n  {\n    text: 'ວັນທີກວດສອບບິນສຳເລັດ',\n    value: 'confirmed_payment_at',\n  },\n];\n\nexport const concatPackage = (packageArr = []) => {\n  const connateArr = [];\n\n  for (const packageItem of packageArr) {\n    connateArr.push({\n      id: packageItem.id,\n      name: `${packageItem.name} (${Intl.NumberFormat().format(packageItem.price)} ກີບ)`,\n    });\n  }\n\n  return connateArr;\n};\n","import VBtn from './VBtn'\n\nexport { VBtn }\nexport default VBtn\n","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventInvoice.vue?vue&type=style&index=0&id=12bc3e86&prod&lang=scss&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-container',[_c('v-row',{staticClass:\"mb-n6\"},[_c('v-col',{attrs:{\"cols\":\"\"}},[_c('v-btn',{staticClass:\"btn-primary mr-2 elevation-0\",on:{\"click\":_vm.createPage}},[_c('v-icon',[_vm._v(\"mdi-plus\")])],1),_c('v-btn',{staticClass:\"btn-primary elevation-0\",on:{\"click\":_vm.choseCustomer}},[_c('v-icon',[_vm._v(\"mdi-plus\")]),_vm._v(\" ເພີ່ມໃນແອັບລູກຄ້າ \")],1)],1),_c('v-col',{attrs:{\"cols\":\"\"}},[_c('v-menu',{attrs:{\"close-on-content-click\":true,\"nudge-right\":40,\"transition\":\"scale-transition\",\"offset-y\":\"\",\"min-width\":\"auto\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-text-field',_vm._g(_vm._b({attrs:{\"label\":\"ເດືອນ\",\"readonly\":\"\",\"outlined\":\"\",\"dense\":\"\",\"clearable\":\"\"},model:{value:(_vm.month),callback:function ($$v) {_vm.month=$$v},expression:\"month\"}},'v-text-field',attrs,false),on))]}}]),model:{value:(_vm.start_menu),callback:function ($$v) {_vm.start_menu=$$v},expression:\"start_menu\"}},[_c('v-date-picker',{attrs:{\"type\":\"month\"},model:{value:(_vm.month),callback:function ($$v) {_vm.month=$$v},expression:\"month\"}})],1)],1),_c('v-col',{attrs:{\"cols\":\"\"}},[_c('v-select',{attrs:{\"outlined\":\"\",\"dense\":\"\",\"items\":_vm.paymentStatus,\"item-text\":_vm.getBillingStatus,\"item-value\":\"name\",\"label\":\"ສະຖານະການຊຳລະ\",\"multiple\":\"\",\"clearable\":\"\"},model:{value:(_vm.selectedPaymentStatus),callback:function ($$v) {_vm.selectedPaymentStatus=$$v},expression:\"selectedPaymentStatus\"}})],1)],1),_c('v-row',[_c('v-tabs',_vm._l((_vm.collectStatuses),function(collectStatus){return _c('v-tab',{key:collectStatus.en,attrs:{\"color\":\"red\"},on:{\"click\":function($event){_vm.selectedStatus = collectStatus.en}}},[_c('v-badge',{attrs:{\"color\":_vm.getStatusColor(collectStatus.en),\"content\":_vm.getCountByStatus(collectStatus.en)}},[_vm._v(\" \"+_vm._s(collectStatus.la)+\" \")])],1)}),1)],1),_c('v-row',[_c('v-card',[_c('v-card-title',[_vm._v(\" ເກັບຂີເຫື້ຍອພິເສດ (\"+_vm._s(_vm.pagination.total)+\") \"),_c('v-divider',{staticClass:\"mx-4\",attrs:{\"vertical\":\"\"}}),_c('v-spacer')],1),_c('v-card-text',[_c('v-simple-table',{scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('thead',[_c('tr',[(_vm.selectedStatus=='requested')?_c('th',{staticClass:\"text-left\"},[_vm._v(\" ອະນຸມັດ \")]):_vm._e(),_c('th',{staticClass:\"text-left\"},[_vm._v(\" ບິນ \")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\" ລູກຄ້າ \")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\" ເບີໂທ \")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\" ເລລາລົງເກັບ \")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\" ຄົນຂັບ \")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\" ສະຖານະບໍລິການ \")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\" ຜູ້ຮ້ອງຂໍ \")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\" ຄ່າບໍລິການ \")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\" ລວມທັງໝົດ \")]),_c('th',{staticClass:\"text-left\",staticStyle:{\"width\":\"280px\"}},[_vm._v(\" ລາຍລະອຽດ \")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\" ຮູບສະຖານທີ່ \")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\" ຮູບຂີ້ເຫື້ຍອ \")]),_c('th',{staticClass:\"text-left\"})])]),_c('tbody',_vm._l((_vm.collections),function(data,index){return _c('tr',{key:index},[(_vm.selectedStatus=='requested')?_c('td',[_c('v-menu',{attrs:{\"offset-y\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [(_vm.canApproved(data))?_c('v-btn',_vm._g(_vm._b({attrs:{\"color\":\"green\",\"dark\":\"\"}},'v-btn',attrs,false),on),[_vm._v(\" ອະນຸມັດ \")]):_vm._e()]}}],null,true)},[_c('v-list',[_c('v-list-item',[_c('v-list-item-title',{on:{\"click\":function($event){return _vm.approve(data)}}},[_vm._v(\" ຢືນຢັນການອະນຸມັດ \")])],1)],1)],1)],1):_vm._e(),_c('td',[(data.billing)?_c('div',[_vm._v(\" \"+_vm._s(data.billing.content)+\" \")]):_vm._e()]),_c('td',[_vm._v(_vm._s(data.name)+\" \"+_vm._s(data.surname))]),_c('td',[_vm._v(_vm._s(data.phone))]),_c('td',[_vm._v(\" \"+_vm._s(data.date)+\" \")]),_c('td',[(!data.driver)?_c('v-btn',{attrs:{\"color\":\"blue\",\"dark\":\"\"},on:{\"click\":function($event){return _vm.editDriver(data.id)}}},[_vm._v(\" ເລືອກຄົນຂັບ \")]):_c('v-row',[_c('v-col',[_c('div',[_vm._v(_vm._s(data.driver.name+' '+data.driver.surname+' '+data.driver.vehicle.car_id))])]),_c('v-col',[_c('v-icon',{on:{\"click\":function($event){return _vm.editDriver(data.id)}}},[_vm._v(\" mdi-pencil \")])],1)],1)],1),_c('td',[(data.collect_status)?_c('div',[_c('v-chip',{attrs:{\"label\":\"\",\"color\":_vm.getStatusColor(data.collect_status),\"dark\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.getCollectStatus(data.collect_status))+\" \")])],1):_vm._e()]),_c('td',{staticStyle:{\"width\":\"380px\"}},[(data.requested_by)?_c('div',[_vm._v(\" \"+_vm._s(data.requested_by.name)+\" \")]):_vm._e()]),_c('td',[_vm._v(_vm._s(Intl.NumberFormat().format(data.billing ? data.billing.sub_total : 0)))]),_c('td',[_vm._v(_vm._s(Intl.NumberFormat().format(data.billing ? data.billing.total : 0 )))]),_c('td',{staticStyle:{\"width\":\"380px\"}},[_vm._v(\" \"+_vm._s(data.description)+\" \")]),_c('td',{staticStyle:{\"width\":\"380px\"}},_vm._l((data.image_collect_locations),function(img,index){return _c('v-avatar',{key:index,attrs:{\"size\":\"36px\"}},[(img.url)?_c('img',{attrs:{\"src\":img.url}}):_vm._e()])}),1),_c('td',{staticStyle:{\"width\":\"380px\"}},_vm._l((data.image_collecteds),function(img,index){return _c('v-avatar',{key:index,attrs:{\"size\":\"36px\"}},[(img.url)?_c('img',{attrs:{\"src\":img.url}}):_vm._e()])}),1),_c('td',[_c('v-menu',{attrs:{\"offset-y\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-icon',_vm._g(_vm._b({staticClass:\"mr-2\",attrs:{\"color\":\"primary\",\"dark\":\"\",\"medium\":\"\"}},'v-icon',attrs,false),on),[_vm._v(\" mdi-dots-vertical \")])]}}],null,true)},[_c('v-list',[_c('v-list-item',{attrs:{\"link\":\"\"},on:{\"click\":function($event){return _vm.viewPage(data.id)}}},[_c('v-list-item-title',[_c('v-icon',{staticClass:\"mr-2\",attrs:{\"small\":\"\"}},[_vm._v(\" mdi-eye \")]),_vm._v(\" ລາຍລະອຽດ \")],1)],1),_c('v-list-item',{attrs:{\"link\":\"\"},on:{\"click\":function($event){return _vm.editPage(data.id)}}},[_c('v-list-item-title',[_c('v-icon',{staticClass:\"mr-2\",attrs:{\"small\":\"\"}},[_vm._v(\" mdi-pencil \")]),_vm._v(\" ແກ້ໄຂ \")],1)],1),_c('v-list-item',{attrs:{\"link\":\"\"},on:{\"click\":function($event){return _vm.viewBill(data.billing.id)}}},[_c('v-list-item-title',[_c('v-icon',{staticClass:\"mr-2\",attrs:{\"small\":\"\"}},[_vm._v(\" mdi-cash \")]),_vm._v(\" ບິນ \")],1)],1)],1)],1)],1),(_vm.canDelete(data))?_c('td',[_c('v-menu',{attrs:{\"offset-y\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-icon',_vm._g(_vm._b({staticClass:\"mr-2\",attrs:{\"color\":\"red\",\"dark\":\"\",\"medium\":\"\"}},'v-icon',attrs,false),on),[_vm._v(\" mdi-delete \")])]}}],null,true)},[_c('v-list',[_c('v-list-item',{attrs:{\"link\":\"\"},on:{\"click\":function($event){return _vm.deleteEvent(data.id)}}},[_c('v-list-item-title',[_c('v-icon',{staticClass:\"mr-2\",attrs:{\"small\":\"\"}},[_vm._v(\" mdi-delete \")]),_vm._v(\" ຢືນຢັນການລືບ \")],1)],1)],1)],1)],1):_vm._e()])}),0)]},proxy:true}])}),_c('br'),[(_vm.pagination.total_pages > 1)?_c('Pagination',{attrs:{\"pagination\":_vm.pagination,\"offset\":_vm.offset},on:{\"paginate\":function($event){return _vm.fetchData()}}}):_vm._e()]],2)],1)],1),_c('ModalAdd',[[_c('v-card',[_c('v-card-title',[_c('p',[_vm._v(\"ຊຳລະຄ່າຂີ້ເຫື້ຍອ \"+_vm._s(_vm.payment.name)+\" \"+_vm._s(_vm.payment.surname))])]),_c('v-card-text',[_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":function($event){return _vm.closeAddModal()}}},[_vm._v(\" Close \")]),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":function($event){return _vm.createPage()}}},[_vm._v(\" ເພີ່ມທົ່ວໄປ \")]),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\",\"loading\":_vm.loading,\"disabled\":_vm.loading},on:{\"click\":function($event){return _vm.Payment()}}},[_vm._v(\" Pay \")])],1)],1)],1)]],2)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container>\n    <v-row class=\"mb-n6\">\n      <v-col cols>\n        <v-btn\n          class=\"btn-primary mr-2 elevation-0\"\n          @click=\"createPage\"\n        >\n          <v-icon>mdi-plus</v-icon>\n        </v-btn>\n        <v-btn\n          class=\"btn-primary elevation-0\"\n          @click=\"choseCustomer\"\n        >\n          <v-icon>mdi-plus</v-icon> ເພີ່ມໃນແອັບລູກຄ້າ\n        </v-btn>\n      </v-col>\n      <v-col cols>\n        <v-menu\n          v-model=\"start_menu\"\n          :close-on-content-click=\"true\"\n          :nudge-right=\"40\"\n          transition=\"scale-transition\"\n          offset-y\n          min-width=\"auto\"\n        >\n          <template v-slot:activator=\"{ on, attrs }\">\n            <v-text-field\n              v-model=\"month\"\n              label=\"ເດືອນ\"\n              readonly\n              outlined\n              v-bind=\"attrs\"\n              dense\n              clearable\n              v-on=\"on\"\n            />\n          </template>\n          <v-date-picker\n            v-model=\"month\"\n            type=\"month\"\n          />\n        </v-menu>\n      </v-col>\n      <v-col cols>\n        <v-select\n          v-model=\"selectedPaymentStatus\"\n          outlined\n          dense\n          :items=\"paymentStatus\"\n          :item-text=\"getBillingStatus\"\n          item-value=\"name\"\n          label=\"ສະຖານະການຊຳລະ\"\n          multiple\n          clearable\n        />\n      </v-col>\n    </v-row>\n\n    <v-row>\n      <v-tabs>\n        <v-tab\n          v-for=\"collectStatus in collectStatuses\"\n          :key=\"collectStatus.en\"\n          color=\"red\"\n          @click=\"selectedStatus = collectStatus.en\"\n        >\n          <v-badge\n            :color=\"getStatusColor(collectStatus.en)\"\n            :content=\"getCountByStatus(collectStatus.en)\"\n          >\n            {{ collectStatus.la }}\n          </v-badge>\n        </v-tab>\n      </v-tabs>\n    </v-row>\n    <v-row>\n      <v-card>\n        <v-card-title>\n          ເກັບຂີເຫື້ຍອພິເສດ ({{ pagination.total }})\n          <v-divider\n            class=\"mx-4\"\n            vertical\n          />\n          <v-spacer />\n          <!--\n          <v-text-field\n            outlined\n            dense\n            clearable\n            prepend-inner-icon=\"mdi-magnify\"\n            label=\"ຄົ້ນຫາ\"\n            type=\"text\"\n            v-model=\"search\"\n            @keyup.enter=\"Search()\"\n          >\n          </v-text-field>\n             -->\n        </v-card-title>\n        <v-card-text>\n          <v-simple-table>\n            <template v-slot:default>\n              <thead>\n                <tr>\n                  <th\n                    v-if=\"selectedStatus=='requested'\"\n                    class=\"text-left\"\n                  >\n                    ອະນຸມັດ\n                  </th>\n                  <th class=\"text-left\">\n                    ບິນ\n                  </th>\n                  <th class=\"text-left\">\n                    ລູກຄ້າ\n                  </th>\n                  <th class=\"text-left\">\n                    ເບີໂທ\n                  </th>\n                  <th class=\"text-left\">\n                    ເລລາລົງເກັບ\n                  </th>\n                  <th class=\"text-left\">\n                    ຄົນຂັບ\n                  </th>\n                  <th class=\"text-left\">\n                    ສະຖານະບໍລິການ\n                  </th>\n                  <th class=\"text-left\">\n                    ຜູ້ຮ້ອງຂໍ\n                  </th>\n                  <th class=\"text-left\">\n                    ຄ່າບໍລິການ\n                  </th>\n                  <th class=\"text-left\">\n                    ລວມທັງໝົດ\n                  </th>\n                  <th\n                    class=\"text-left\"\n                    style=\"width: 280px;\"\n                  >\n                    ລາຍລະອຽດ\n                  </th>\n                  <th class=\"text-left\">\n                    ຮູບສະຖານທີ່\n                  </th>\n                  <th class=\"text-left\">\n                    ຮູບຂີ້ເຫື້ຍອ\n                  </th>\n                  <th class=\"text-left\" />\n                </tr>\n              </thead>\n              <tbody>\n                <tr\n                  v-for=\"(data, index) in collections\"\n                  :key=\"index\"\n                >\n                  <!--              <td>{{ index + 1 }}</td>-->\n                  <td v-if=\"selectedStatus=='requested'\">\n                    <v-menu offset-y>\n                      <template v-slot:activator=\"{ on, attrs }\">\n                        <v-btn\n                          v-if=\"canApproved(data)\"\n                          v-bind=\"attrs\"\n                          color=\"green\"\n                          dark\n                          v-on=\"on\"\n                        >\n                          ອະນຸມັດ\n                        </v-btn>\n                      </template>\n                      <v-list>\n                        <v-list-item>\n                          <v-list-item-title @click=\"approve(data)\">\n                            ຢືນຢັນການອະນຸມັດ\n                          </v-list-item-title>\n                        </v-list-item>\n                      </v-list>\n                    </v-menu>\n                  </td>\n                  <td>\n                    <div v-if=\"data.billing\">\n                      {{ data.billing.content }}\n                    </div>\n                  </td>\n                  <td>{{ data.name }} {{ data.surname }}</td>\n                  <td>{{ data.phone }}</td>\n                  <!--              <td>{{ user.village.name }}</td>-->\n                  <!--              <td>{{ Intl.NumberFormat().format(data.billing.discount )}}</td>-->\n                  <td>\n                    {{ data.date }}\n                  </td>\n                  <td>\n                    <v-btn\n                      v-if=\"!data.driver\"\n                      color=\"blue\"\n                      dark\n                      @click=\"editDriver(data.id)\"\n                    >\n                      ເລືອກຄົນຂັບ\n                    </v-btn>\n                    <v-row v-else>\n                      <v-col>\n                        <div>{{ data.driver.name+' '+data.driver.surname+' '+data.driver.vehicle.car_id }}</div>\n                      </v-col>\n                      <v-col>\n                        <v-icon @click=\"editDriver(data.id)\">\n                          mdi-pencil\n                        </v-icon>\n                      </v-col>\n                    </v-row>\n                  </td>\n                  <td>\n                    <div v-if=\"data.collect_status\">\n                      <v-chip\n                        label\n                        :color=\"getStatusColor(data.collect_status)\"\n                        dark\n                      >\n                        {{ getCollectStatus(data.collect_status) }}\n                      </v-chip>\n                    </div>\n                  </td>\n                  <td style=\"width: 380px;\">\n                    <div v-if=\"data.requested_by\">\n                      {{ data.requested_by.name }}\n                    </div>\n                  </td>\n                  <td>{{ Intl.NumberFormat().format(data.billing ? data.billing.sub_total : 0) }}</td>\n                  <td>{{ Intl.NumberFormat().format(data.billing ? data.billing.total : 0 ) }}</td>\n                  <td style=\"width: 380px;\">\n                    {{ data.description }}\n                  </td>\n                  <td style=\"width: 380px;\">\n                    <v-avatar\n                      v-for=\"(img, index) in data.image_collect_locations\"\n                      :key=\"index\"\n                      size=\"36px\"\n                    >\n                      <img\n                        v-if=\"img.url\"\n                        :src=\"img.url\"\n                      >\n                    </v-avatar>\n                  </td>\n                  <td style=\"width: 380px;\">\n                    <v-avatar\n                      v-for=\"(img, index) in data.image_collecteds\"\n                      :key=\"index\"\n                      size=\"36px\"\n                    >\n                      <img\n                        v-if=\"img.url\"\n                        :src=\"img.url\"\n                      >\n                    </v-avatar>\n                  </td>\n\n                  <!-- <td>{{ user.reject_description }}</td> -->\n                  <td>\n                    <v-menu offset-y>\n                      <template v-slot:activator=\"{ on, attrs }\">\n                        <v-icon\n                          color=\"primary\"\n                          dark\n                          v-bind=\"attrs\"\n                          medium\n                          class=\"mr-2\"\n                          v-on=\"on\"\n                        >\n                          mdi-dots-vertical\n                        </v-icon>\n                      </template>\n                      <v-list>\n                        <v-list-item\n                          link\n                          @click=\"viewPage(data.id)\"\n                        >\n                          <v-list-item-title>\n                            <v-icon\n                              small\n                              class=\"mr-2\"\n                            >\n                              mdi-eye\n                            </v-icon>\n                            ລາຍລະອຽດ\n                          </v-list-item-title>\n                        </v-list-item>\n                        <v-list-item\n                          link\n                          @click=\"editPage(data.id)\"\n                        >\n                          <v-list-item-title>\n                            <v-icon\n                              small\n                              class=\"mr-2\"\n                            >\n                              mdi-pencil\n                            </v-icon>\n                            ແກ້ໄຂ\n                          </v-list-item-title>\n                        </v-list-item>\n                        <v-list-item\n                          link\n                          @click=\"viewBill(data.billing.id)\"\n                        >\n                          <v-list-item-title>\n                            <v-icon\n                              small\n                              class=\"mr-2\"\n                            >\n                              mdi-cash\n                            </v-icon>\n                            ບິນ\n                          </v-list-item-title>\n                        </v-list-item>\n                      </v-list>\n                    </v-menu>\n                  </td>\n                  <td v-if=\"canDelete(data)\">\n                    <v-menu offset-y>\n                      <template v-slot:activator=\"{ on, attrs }\">\n                        <v-icon\n                          color=\"red\"\n                          dark\n                          v-bind=\"attrs\"\n                          medium\n                          class=\"mr-2\"\n                          v-on=\"on\"\n                        >\n                          mdi-delete\n                        </v-icon>\n                      </template>\n                      <v-list>\n                        <v-list-item\n                          link\n                          @click=\"deleteEvent(data.id)\"\n                        >\n                          <v-list-item-title>\n                            <v-icon\n                              small\n                              class=\"mr-2\"\n                            >\n                              mdi-delete\n                            </v-icon>\n                            ຢືນຢັນການລືບ\n                          </v-list-item-title>\n                        </v-list-item>\n                      </v-list>\n                    </v-menu>\n                  </td>\n                </tr>\n              </tbody>\n            </template>\n          </v-simple-table>\n          <br>\n          <template>\n            <Pagination\n              v-if=\"pagination.total_pages > 1\"\n              :pagination=\"pagination\"\n              :offset=\"offset\"\n              @paginate=\"fetchData()\"\n            />\n          </template>\n        </v-card-text>\n      </v-card>\n    </v-row>\n\n    <!-- Modal Add-->\n    <ModalAdd>\n      <template @close=\"close\">\n        <v-card>\n          <v-card-title>\n            <p>ຊຳລະຄ່າຂີ້ເຫື້ຍອ {{ payment.name }} {{ payment.surname }}</p>\n          </v-card-title>\n          <v-card-text>\n            <v-card-actions>\n              <v-spacer />\n              <v-btn\n                color=\"blue darken-1\"\n                text\n                @click=\"closeAddModal()\"\n              >\n                Close\n              </v-btn>\n              <v-btn\n                color=\"blue darken-1\"\n                text\n                @click=\"createPage()\"\n              >\n                ເພີ່ມທົ່ວໄປ\n              </v-btn>\n              <v-btn\n                color=\"blue darken-1\"\n                text\n                :loading=\"loading\"\n                :disabled=\"loading\"\n                @click=\"Payment()\"\n              >\n                Pay\n              </v-btn>\n            </v-card-actions>\n          </v-card-text>\n        </v-card>\n      </template>\n    </ModalAdd>\n\n    <!--Delete Modal-->\n  </v-container>\n</template>\n\n<script>\nimport { GetOldValueOnInput } from '@/Helpers/GetValue';\nimport queryOption from '@/Helpers/queryOption';\nimport { getLaoCollectStatus, getLaoStatus } from '@/Helpers/BillingStatus';\nimport { getEventStatus } from '@/Helpers/Customer';\n\nexport default {\n  name: 'Customer',\n  title() {\n    return `Vientiane Waste Co-Dev|${this.title}`;\n  },\n  data() {\n    return {\n      title: 'Collection',\n      start_menu: false,\n      collectStatuses: getEventStatus,\n      selectedStatus: 'requested',\n      month: this.$store.getters['auth/getLastMonthEvent'],\n      countStatus: [\n        {\n          collect_status: 'requested',\n          count_status: 0,\n        },\n        {\n          collect_status: 'approved',\n          count_status: 0,\n        },\n        {\n          collect_status: 'rejected',\n          count_status: 0,\n        },\n        {\n          collect_status: 'collected',\n          count_status: 0,\n        },\n        {\n          collect_status: 'collect_confirm',\n          count_status: 0,\n        },\n        {\n          collect_status: 'collect_reject',\n          count_status: 0,\n        },\n      ],\n      collections: [],\n      loading: false,\n      customerId: '',\n      // Pagination\n      offset: 12,\n      pagination: {},\n      per_page: 100,\n      search: '',\n      oldVal: '',\n      server_errors: {},\n      selectedCollectionStatus: [],\n      summaryData: {},\n      collectionStatus: [\n        {\n          id: 1,\n          name: 'requested',\n        },\n        {\n          id: 2,\n          name: 'rejected',\n        },\n        {\n          id: 3,\n          name: 'approved',\n\n        },\n        {\n          id: 4,\n          name: 'collected',\n        },\n        {\n          id: 5,\n          name: 'collect_confirm',\n        },\n        {\n          id: 5,\n          name: 'collect_reject',\n        },\n      ],\n      selectedPaymentStatus: [],\n      paymentStatus: [\n        {\n          id: 1,\n          name: 'created',\n        },\n        {\n          id: 2,\n          name: 'approved',\n        },\n        {\n          id: 3,\n          name: 'to_confirm_payment',\n        },\n        {\n          id: 4,\n          name: 'rejected',\n        },\n        {\n          id: 5,\n          name: 'success',\n        },\n      ],\n\n      user: {},\n      item: {},\n\n      // Payment\n      image: '',\n      imageUrl: '',\n      // bcel_reference_number: \"\",\n      payment_method: '',\n      paymentType: '',\n      confirmType: '',\n      paymentDialog: false,\n      rejects: [],\n      reject_reason_id: '',\n      description: '',\n      paymentTypeRule: [(v) => !!v || 'Name is required'],\n      payment: {},\n      confirm: {},\n      drivers: [],\n\n      headers: [\n        // { text: \"#\", value: \"\" },\n        { text: 'ລູກຄ້າ', value: 'surname' },\n        { text: 'ເບີໂທ', value: 'phone', sortable: false },\n        { text: 'ບ້ານ', value: 'village.name', sortable: false },\n        { text: 'ສ່ວນຫຼຸດ', value: 'discount', sortable: false },\n        {\n          text: 'ຄ່າບໍລິການ',\n          value: 'sub_total',\n          align: 'center',\n          sortable: false,\n        },\n        {\n          text: 'ລວມທັງໝົດ',\n          value: 'total',\n          align: 'center',\n          sortable: false,\n        },\n        {\n          text: 'ຄົນຂັບ',\n          value: 'driver',\n          align: 'center',\n          sortable: false,\n        },\n        {\n          text: 'ສະຖານະການບໍລິການ',\n          value: 'collect_status',\n          align: 'center',\n        },\n        {\n          text: 'ສະຖານະການຊຳລະ', value: 'payment_status', align: 'center', width: '200px',\n        },\n        { text: 'Image', value: 'media', width: '350px' },\n        { text: '', value: 'actions', sortable: false },\n        { text: '', value: 'delete', sortable: false },\n      ],\n    };\n  },\n  computed: {\n    lastMonthEvent() {\n      return this.$store.getters['auth/getLastMonthEvent'];\n    },\n  },\n  watch: {\n    month(value) {\n      this.$store.dispatch('auth/saveLastMonthEvent', value);\n    },\n    lastMonthEvent() {\n      this.fetchData();\n      this.fetchCountData();\n    },\n    selectedPaymentStatus() {\n      this.pagination.current_page = '';\n      this.fetchData();\n      this.fetchCountData();\n    },\n    selectedCollectionStatus() {\n      this.pagination.current_page = '';\n      this.fetchData();\n      this.fetchCountData();\n    },\n\n    // month: function (value) {\n    //   if (value !== '') {\n    //     this.pagination.current_page = '';\n    //     this.fetchData();\n    //     this.fetchCountData();\n    //   }\n    // },\n    search(value) {\n      this.pagination.current_page = '';\n      if (value == '') {\n        this.fetchData();\n        this.fetchCountData();\n      }\n    },\n    selectedStatus() {\n      this.pagination.current_page = '';\n      this.fetchData();\n      this.fetchCountData();\n    },\n\n    start_date() {\n      this.server_errors.start_month = '';\n    },\n\n    // confirmType: function () {\n    //   console.log(this.confirmType);\n    //   if (this.confirmType == 0) {\n    //     // this.confirmPayment();\n    //   }\n    // },\n    // bcel_reference_number: function () {\n    //   this.server_errors.bcel_reference_number = \"\";\n    // },\n    image() {\n      this.server_errors.image = '';\n    },\n  },\n  created() {\n    // this.month = this.moment(this.current_month).format('YYYY-MM');\n    this.fetchData();\n    this.fetchCountData();\n    this.fetchDriver();\n  },\n  methods: {\n    approve(data) {\n      const formData = new FormData();\n      formData.append('name', data.name);\n      formData.append('surname', data.surname);\n      formData.append('village_id', data.village_id);\n      formData.append('lat', data.lat);\n      formData.append('lng', data.lng);\n      formData.append('phone', data.phone);\n      formData.append('date', data.date);\n      // formData.append(\"date\", this.moment(dateTime).format(\"y-MM-D hh:mm:ss\"));\n      formData.append('total', data.billing.total);\n      if (data.driver_id) formData.append('driver_id', data.driver_id);\n      formData.append('collect_status', 'approved');\n      formData.append('_method', 'PUT');\n\n      this.loading = true;\n      this.$axios\n        .post(`v2/collection-event/${data.id}`, formData, {\n          headers: { 'Content-Type': 'multipart/form-data' },\n        })\n        .then((res) => {\n          if (res.data.code == 200) {\n            setTimeout(() => {\n              this.loading = false;\n              this.$store.commit('Toast_State', {\n                value: true,\n                color: 'success',\n                msg: res.data.message,\n              });\n              this.fetchData();\n              this.fetchCountData();\n            }, 300);\n          }\n        })\n        .catch((error) => {\n          this.$store.commit('Toast_State', {\n            value: true,\n            color: 'error',\n            msg: error.response.data.message,\n          });\n          if (error.response && error.response.status == 422) {\n            const obj = error.response.data.errors;\n            for (const [key, data] of Object.entries(obj)) {\n              this.server_errors[key] = data[0];\n            }\n          }\n          this.loading = false;\n          this.fetchData();\n        });\n    },\n    canApproved(data) {\n      return data.billing.total > 0 && data.collect_status == 'requested' && data.driver;\n    },\n    deleteEvent(id) {\n      this.$store.commit('Loading_State', true);\n      this.$axios\n        .delete(`v2/collection-event/${id}`)\n        .then((res) => {\n          if (res.data.code == 200) {\n            this.$store.commit('Loading_State', false);\n            setTimeout(() => {\n              this.loading = false;\n              this.$store.commit('Toast_State', {\n                value: true,\n                color: 'success',\n                msg: res.data.message,\n              });\n            }, 300);\n            this.fetchData();\n            this.fetchCountData();\n          }\n        })\n        .catch((error) => {\n          this.$store.commit('Loading_State', false);\n          if (error.response && error.response.status == 422) {\n            const obj = error.response.data.errors;\n            for (const [key, message] of Object.entries(obj)) {\n              this.server_errors[key] = message[0];\n            }\n          }\n        });\n    },\n    getCountByStatus(status) {\n      const exists = this.countStatus.find((item) => item.collect_status == status);\n\n      return exists ? exists.count_status : 0;\n    },\n    getStatusColor(status) {\n      const existsStatus = this.collectStatuses.find((item) => item.en == status);\n      return existsStatus ? existsStatus.color : '';\n    },\n    canDelete(data) {\n      let isSuperAdmin = false;\n      for (const role of JSON.parse(this.$store.getters['auth/roles'])) {\n        if (role.name == 'super_admin') {\n          isSuperAdmin = true;\n          break;\n        }\n      }\n\n      const billingArray = ['created', 'approved'];\n      const collectedArray = ['requested', 'approved'];\n      return isSuperAdmin\n        && collectedArray.indexOf(data.collect_status) != -1\n        && billingArray.indexOf(data.billing.status) != -1;\n    },\n    getCollectStatus(status) {\n      return getLaoCollectStatus(status);\n    },\n    getFilterCollectStatus(status) {\n      return getLaoCollectStatus(status.name);\n    },\n    getBillingStatus(status) {\n      return getLaoStatus(status.name);\n    },\n    onFileChange(e) {\n      const input = e.target;\n      const file = e.target.files[0];\n      this.image = input.files[0];\n      this.imageUrl = URL.createObjectURL(file);\n    },\n    fetchData() {\n      const date = this.lastMonthEvent ? this.moment(this.lastMonthEvent).format('YYYY-MM') : null;\n      this.$store.commit('Loading_State', true);\n      this.$axios\n        .get('v2/collection-event', {\n          params: queryOption([\n            { page: this.pagination.current_page },\n            { per_page: this.per_page },\n            { collect_status: this.selectedStatus },\n            { payment_status: this.selectedPaymentStatus },\n            { month: date },\n            { order_by: 'newest' },\n          ]),\n        })\n        .then((res) => {\n          if (res.data.code == 200) {\n            this.$store.commit('Loading_State', false);\n            this.collections = res.data.data.data;\n            this.pagination = res.data.data.pagination;\n          }\n        })\n        .catch((error) => {\n          this.$store.commit('Loading_State', false);\n          if (error.response && error.response.status == 422) {\n            const obj = error.response.data.errors;\n            for (const [key, message] of Object.entries(obj)) {\n              this.server_errors[key] = message[0];\n            }\n          }\n        });\n    },\n    fetchCountData() {\n      const date = this.lastMonthEvent ? this.moment(this.lastMonthEvent).format('YYYY-MM') : null;\n      this.$store.commit('Loading_State', true);\n      this.$axios\n        .get('v2/collection-event-count', {\n          params: queryOption([\n            { payment_status: this.selectedPaymentStatus },\n            { month: date },\n          ]),\n        })\n        .then((res) => {\n          if (res.data.code == 200) {\n            this.$store.commit('Loading_State', false);\n            this.countStatus = res.data.data;\n          }\n        })\n        .catch((error) => {\n          this.$store.commit('Loading_State', false);\n          if (error.response && error.response.status == 422) {\n            const obj = error.response.data.errors;\n            for (const [key, message] of Object.entries(obj)) {\n              this.server_errors[key] = message[0];\n            }\n          }\n        });\n    },\n\n    fetchReject() {\n      this.$axios\n        .get('reject-reason')\n        .then((res) => {\n          if (res.data.code == 200) {\n            this.$store.commit('Loading_State', false);\n            this.rejects = res.data.data;\n          }\n        })\n        .catch(() => {\n        });\n    },\n    fetchDriver() {\n      this.$axios\n        .get('driver')\n        .then((res) => {\n          if (res.data.code == 200) {\n            this.$store.commit('Loading_State', false);\n            this.drivers = res.data.data;\n          }\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    },\n\n    closeAddModal() {\n      this.paymentType = '';\n      this.$store.commit('modalAdd_State', false);\n    },\n    createPage() {\n      this.$router.push({\n        name: 'CreateCollectionEventInvoice',\n      });\n    },\n    choseCustomer() {\n      this.$router.push({\n        name: 'chose-customer',\n        query: { redirect: 'CreateCollectionEventInvoice' },\n      });\n    },\n    editPage(id) {\n      this.$router.push({\n        name: 'EditCollectionEventInvoice',\n        params: { id },\n      });\n    },\n    editDriver(id) {\n      this.$router.push({\n        name: 'EditCollectionEventDriver',\n        params: { id },\n      });\n    },\n    viewPage(id) {\n      const route = this.$router.resolve({ name: 'EventInvoiceDetail', params: { id } });\n      window.open(route.href, '_blank');\n    },\n    viewBill(billId) {\n      const route = this.$router.resolve({ name: 'billing-detail', params: { id: billId } });\n      window.open(route.href, '_blank');\n    },\n\n    paymentConfirmModal(item) {\n      this.fetchReject();\n      this.confirm = item;\n      this.paymentDialog = true;\n    },\n    closeConfirmModal() {\n      this.paymentDialog = false;\n      this.confirmType = '';\n    },\n\n    Search() {\n      GetOldValueOnInput(this);\n    },\n    statusColor(value) {\n      if (value == 'active') return 'success';\n      if (value == 'inactive') return 'error';\n      return '';\n    },\n\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"../../../../../public/scss/main.scss\";\n\n.v-data-table>.v-data-table__wrapper>table>thead>tr>th,\ntd {\n  min-width: 150px !important;\n}\n\n.page--table {\n  .page {\n    &__table {\n      margin-top: 20px;\n    }\n\n    &__grab-icon {\n      cursor: move;\n    }\n  }\n}\n\n.sum-total {\n  color: #000000;\n}\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventInvoice.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventInvoice.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EventInvoice.vue?vue&type=template&id=12bc3e86&\"\nimport script from \"./EventInvoice.vue?vue&type=script&lang=js&\"\nexport * from \"./EventInvoice.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EventInvoice.vue?vue&type=style&index=0&id=12bc3e86&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}