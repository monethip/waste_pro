(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a2aa86b0"],{"076c":function(t,e,a){},"1f4f":function(t,e,a){"use strict";var n=a("5530"),s=(a("a9e3"),a("8b37"),a("80d2")),i=a("7560"),c=a("58df");e["a"]=Object(c["a"])(i["a"]).extend({name:"v-simple-table",props:{dense:Boolean,fixedHeader:Boolean,height:[Number,String]},computed:{classes:function(){return Object(n["a"])({"v-data-table--dense":this.dense,"v-data-table--fixed-height":!!this.height&&!this.fixedHeader,"v-data-table--fixed-header":this.fixedHeader,"v-data-table--has-top":!!this.$slots.top,"v-data-table--has-bottom":!!this.$slots.bottom},this.themeClasses)}},methods:{genWrapper:function(){return this.$slots.wrapper||this.$createElement("div",{staticClass:"v-data-table__wrapper",style:{height:Object(s["g"])(this.height)}},[this.$createElement("table",this.$slots.default)])}},render:function(t){return t("div",{staticClass:"v-data-table",class:this.classes},[this.$slots.top,this.genWrapper(),this.$slots.bottom])}})},"22aa":function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"d",(function(){return s})),a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return c}));var n=function(t){switch(t){case"created":case"ລໍຖ້າອະນຸມັດ":return"#73b8fd";case"approved":case"ອະນຸມັດແລ້ວ":return"#0080fc";case"canceled":case"ບິນຖືກຍົກເລີກ":return"#eb004c";case"rejected":case"ການຈ່າຍຖືກປະຕິເສດ":return"#740127";case"to_confirm_payment":case"ຈ່າຍແລ້ວ ລໍຖ້າກວດສອບ":return"#9c540d";case"success":case"ຈ່າຍແລ້ວ ກວດສອບສຳເລັດ":return"#02a38a"}},s=function(t){switch(t){case"created":return"ລໍຖ້າອະນຸມັດ";case"approved":return"ອະນຸມັດແລ້ວ";case"canceled":return"ບິນຖືກຍົກເລີກ";case"rejected":return"ການຈ່າຍຖືກປະຕິເສດ";case"to_confirm_payment":return"ຈ່າຍແລ້ວ ລໍຖ້າກວດສອບ";case"success":return"ຈ່າຍແລ້ວ ກວດສອບສຳເລັດ";case"cash":return"ຊຳລະເງິນສົດ";case"bcel":return"BCEL";default:return t}},i=function(t){switch(t){case"CustomBill":return"ບິນອື່ນໆ";case"NewCollectionEvent":return"ບີນບໍລີການຂີ້ເຫຍື້ອພິເສດ";case"FutureInvoice":return"ບິນບໍລິການລ່ວງໜ້າ";case"NewInvoice":return"ບິນບໍລິການປະຈຳເດືອນ";default:return t}},c=function(t){switch(t){case"requested":return"ຮ້ອງຂໍເກັບຂີ້ເຫື້ຍອ";case"rejected":return"ປະຕິເສດເກັບຂີ້ເຫື້ຍອ";case"approved":return"ອະນຸມັດເກັບຂີ້ເຫື້ຍອ";case"collected":return"ເກັບຂີເຫື້ຍອສຳເລັດ";case"collect_confirm":return"ລູກຄ້າຢືນຢັນການເກັບ";case"collect_reject":return"ການເກັບຖືກປະຕິເສດ";default:return t}}},"4fad":function(t,e,a){var n=a("23e7"),s=a("6f53").entries;n({target:"Object",stat:!0},{entries:function(t){return s(t)}})},"54da":function(t,e,a){"use strict";var n=a("b85c");a("b64b");e["a"]=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a={},s=Object(n["a"])(e);try{for(s.s();!(t=s.n()).done;){var i=t.value;1==Object.keys(i).length&&i[Object.keys(i)]&&(a[Object.keys(i)]=i[Object.keys(i)])}}catch(c){s.e(c)}finally{s.f()}return a}},"6eceb":function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));a("ac1f"),a("841c");var n=function(t){""!==t.search?""!==t.oldVal?t.oldVal!==t.search&&(t.oldVal=t.search,t.pagination.current_page=1,t.fetchData()):(""!==t.search&&(t.pagination.current_page=1,t.fetchData()),t.oldVal=t.search):t.oldVal=""}},"841c":function(t,e,a){"use strict";var n=a("d784"),s=a("825a"),i=a("1d80"),c=a("129f"),r=a("577e"),o=a("dc4a"),l=a("14c3");n("search",(function(t,e,a){return[function(e){var a=i(this),n=void 0==e?void 0:o(e,t);return n?n.call(e,a):new RegExp(e)[t](r(a))},function(t){var n=s(this),i=r(t),o=a(e,n,i);if(o.done)return o.value;var u=n.lastIndex;c(u,0)||(n.lastIndex=0);var d=l(n,i);return c(n.lastIndex,u)||(n.lastIndex=u),null===d?-1:d.index}]}))},"8b37":function(t,e,a){},afdd:function(t,e,a){"use strict";var n=a("8336");e["a"]=n["a"]},e550:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",{staticClass:"mb-n6"},[a("v-col",{attrs:{cols:""}},[a("v-btn",{staticClass:"btn-primary mr-2 elevation-0",on:{click:t.createPage}},[a("v-icon",[t._v("mdi-plus")])],1),a("v-btn",{staticClass:"btn-primary elevation-0",on:{click:t.choseCustomer}},[a("v-icon",[t._v("mdi-plus")]),t._v(" ເພີ່ມໃນແອັບລູກຄ້າ ")],1)],1),a("v-col",{attrs:{cols:""}},[a("v-menu",{attrs:{"close-on-content-click":!0,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{label:"ເດືອນ",readonly:"",outlined:"",dense:"",clearable:""},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}},"v-text-field",s,!1),n))]}}]),model:{value:t.start_menu,callback:function(e){t.start_menu=e},expression:"start_menu"}},[a("v-date-picker",{attrs:{type:"month"},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}})],1)],1),a("v-col",{attrs:{cols:""}},[a("v-select",{attrs:{outlined:"",dense:"",items:t.collectionStatus,"item-text":t.getFilterCollectStatus,"item-value":"name",label:"ສະຖານະບໍລິການ",multiple:"",clearable:""},model:{value:t.selectedCollectionStatus,callback:function(e){t.selectedCollectionStatus=e},expression:"selectedCollectionStatus"}})],1),a("v-col",{attrs:{cols:""}},[a("v-select",{attrs:{outlined:"",dense:"",items:t.paymentStatus,"item-text":t.getBillingStatus,"item-value":"name",label:"ສະຖານະການຊຳລະ",multiple:"",clearable:""},model:{value:t.selectedPaymentStatus,callback:function(e){t.selectedPaymentStatus=e},expression:"selectedPaymentStatus"}})],1)],1),a("v-card",[a("v-card-title",[t._v(" ເກັບຂີເຫື້ຍອພິເສດ ("+t._s(t.pagination.total)+") "),a("v-divider",{staticClass:"mx-4",attrs:{vertical:""}}),a("v-spacer")],1),a("v-card-text",[a("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("ບິນ")]),a("th",{staticClass:"text-left"},[t._v("ລູກຄ້າ")]),a("th",{staticClass:"text-left"},[t._v("ເບີໂທ")]),a("th",{staticClass:"text-left"},[t._v("ຄ່າບໍລິການ")]),a("th",{staticClass:"text-left"},[t._v("ລວມທັງໝົດ")]),a("th",{staticClass:"text-left"},[t._v("ສະຖານະບໍລິການ")]),a("th",{staticClass:"text-left"},[t._v("ຜູ້ຮ້ອງຂໍ")]),a("th",{staticClass:"text-left",staticStyle:{width:"280px"}},[t._v("ລາຍລະອຽດ")]),a("th",{staticClass:"text-left"},[t._v("ຮູບສະຖານທີ່")]),a("th",{staticClass:"text-left"},[t._v("ຮູບຂີ້ເຫື້ຍອ")]),a("th",{staticClass:"text-left"})])]),a("tbody",t._l(t.collections,(function(e,n){return a("tr",{key:n},[a("td",[e.billing?a("div",[t._v(" "+t._s(e.billing.content)+" ")]):t._e()]),a("td",[t._v(t._s(e.name)+" "+t._s(e.surname))]),a("td",[t._v(t._s(e.phone))]),a("td",[t._v(t._s(Intl.NumberFormat().format(e.billing.sub_total)))]),a("td",[t._v(t._s(Intl.NumberFormat().format(e.billing.total)))]),a("td",[e.collect_status?a("div",[a("v-chip",{attrs:{label:"",color:"primary"}},[t._v(t._s(t.getCollectStatus(e.collect_status)))])],1):t._e()]),a("td",{staticStyle:{width:"380px"}},[e.requested_by?a("div",[t._v(" "+t._s(e.requested_by.name)+" ")]):t._e()]),a("td",{staticStyle:{width:"380px"}},[t._v(t._s(e.description))]),a("td",{staticStyle:{width:"380px"}},t._l(e.image_collect_locations,(function(e,n){return a("v-avatar",{key:n,attrs:{size:"36px"}},[e.url?a("img",{attrs:{src:e.url}}):t._e()])})),1),a("td",{staticStyle:{width:"380px"}},t._l(e.image_collecteds,(function(e,n){return a("v-avatar",{key:n,attrs:{size:"36px"}},[e.url?a("img",{attrs:{src:e.url}}):t._e()])})),1),a("td",[a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[a("v-icon",t._g(t._b({staticClass:"mr-2",attrs:{color:"primary",dark:"",medium:""}},"v-icon",s,!1),n),[t._v("mdi-dots-vertical ")])]}}],null,!0)},[a("v-list",[a("v-list-item",{attrs:{link:""},on:{click:function(a){return t.viewPage(e.id)}}},[a("v-list-item-title",[a("v-icon",{staticClass:"mr-2",attrs:{small:""}},[t._v(" mdi-eye")]),t._v(" ລາຍລະອຽດ ")],1)],1),a("v-list-item",{attrs:{link:""},on:{click:function(a){return t.editPage(e.id)}}},[a("v-list-item-title",[a("v-icon",{staticClass:"mr-2",attrs:{small:""}},[t._v(" mdi-pencil")]),t._v(" ແກ້ໄຂ ")],1)],1)],1)],1)],1)])})),0)]},proxy:!0}])}),a("br"),[t.pagination.total_pages>1?a("Pagination",{attrs:{pagination:t.pagination,offset:t.offset},on:{paginate:function(e){return t.fetchData()}}}):t._e()]],2)],1),a("ModalAdd",[[a("v-card",[a("v-card-title",[a("p",[t._v("ຊຳລະຄ່າຂີ້ເຫື້ຍອ "+t._s(t.payment.name)+" "+t._s(t.payment.surname))])]),a("v-card-text",[a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.closeAddModal()}}},[t._v(" Close ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.createPage()}}},[t._v(" ເພີ່ມທົ່ວໄປ ")]),a("v-btn",{attrs:{color:"blue darken-1",text:"",loading:t.loading,disabled:t.loading},on:{click:function(e){return t.Payment()}}},[t._v(" Pay ")])],1)],1)],1)]],2)],1)},s=[],i=a("3835"),c=(a("b0c0"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("4fad"),a("6eceb")),r=a("54da"),o=a("22aa"),l={name:"Customer",title:function(){return"Vientiane Waste Co-Dev|".concat(this.title)},data:function(){return{title:"Collection",month:"",curent_month:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),start_menu:!1,collections:[],loading:!1,customerId:"",offset:12,pagination:{},per_page:15,search:"",oldVal:"",server_errors:{},selectedCollectionStatus:[],summaryData:{},collectionStatus:[{id:1,name:"requested"},{id:2,name:"rejected"},{id:3,name:"approved"},{id:4,name:"collected"},{id:5,name:"collect_confirm"},{id:5,name:"collect_reject"}],selectedPaymentStatus:[],paymentStatus:[{id:1,name:"created"},{id:2,name:"approved"},{id:3,name:"to_confirm_payment"},{id:4,name:"rejected"},{id:5,name:"success"}],user:{},item:{},image:"",imageUrl:"",payment_method:"",paymentType:"",confirmType:"",paymentDialog:!1,rejects:[],reject_reason_id:"",description:"",paymentTypeRule:[function(t){return!!t||"Name is required"}],payment:{},confirm:{},headers:[{text:"ລູກຄ້າ",value:"surname"},{text:"ເບີໂທ",value:"phone",sortable:!1},{text:"ບ້ານ",value:"village.name",sortable:!1},{text:"ສ່ວນຫຼຸດ",value:"discount",sortable:!1},{text:"ຄ່າບໍລິການ",value:"sub_total",align:"center",sortable:!1},{text:"ລວມທັງໝົດ",value:"total",align:"center",sortable:!1},{text:"ສະຖານະການບໍລິການ",value:"collect_status",align:"center"},{text:"ສະຖານະການຊຳລະ",value:"payment_status",align:"center",width:"200px"},{text:"Image",value:"media",width:"350px"},{text:"",value:"actions",sortable:!1}]}},methods:{getCollectStatus:function(t){return Object(o["c"])(t)},getFilterCollectStatus:function(t){return Object(o["c"])(t.name)},getBillingStatus:function(t){return Object(o["d"])(t.name)},onFileChange:function(t){var e=t.target,a=t.target.files[0];this.image=e.files[0],this.imageUrl=URL.createObjectURL(a)},fetchData:function(){var t=this,e=this.moment(this.month).format("YYYY-MM");this.$store.commit("Loading_State",!0),this.$axios.get("v2/collection-event",{params:Object(r["a"])([{page:this.pagination.current_page},{per_page:this.per_page},{collect_status:this.selectedCollectionStatus},{payment_status:this.selectedPaymentStatus},{month:e}])}).then((function(e){200==e.data.code&&(t.$store.commit("Loading_State",!1),t.collections=e.data.data.data,t.pagination=e.data.data.pagination)})).catch((function(e){if(t.$store.commit("Loading_State",!1),422==e.response.status)for(var a=e.response.data.errors,n=0,s=Object.entries(a);n<s.length;n++){var c=Object(i["a"])(s[n],2),r=c[0],o=c[1];t.server_errors[r]=o[0]}}))},fetchReject:function(){var t=this;this.$axios.get("reject-reason").then((function(e){200==e.data.code&&(t.$store.commit("Loading_State",!1),t.rejects=e.data.data)})).catch((function(){}))},closeAddModal:function(){this.paymentType="",this.$store.commit("modalAdd_State",!1)},createPage:function(){this.$router.push({name:"CreateCollectionEventInvoice"})},choseCustomer:function(){this.$router.push({name:"chose-customer",query:{redirect:"CreateCollectionEventInvoice"}})},editPage:function(t){this.$router.push({name:"EditCollectionEventInvoice",params:{id:t}})},viewPage:function(t){var e=this.$router.resolve({name:"EventInvoiceDetail",params:{id:t}});window.open(e.href,"_blank")},paymentConfirmModal:function(t){this.fetchReject(),this.confirm=t,this.paymentDialog=!0},closeConfirmModal:function(){this.paymentDialog=!1,this.confirmType=""},Search:function(){Object(c["a"])(this)},statusColor:function(t){return"active"==t?"success":"inactive"==t?"error":""}},watch:{selectedPaymentStatus:function(){this.pagination.current_page="",this.fetchData()},selectedCollectionStatus:function(){this.pagination.current_page="",this.fetchData()},month:function(t){""!==t&&(this.pagination.current_page="",this.fetchData())},search:function(t){this.pagination.current_page="",""==t&&this.fetchData()},selectedStatus:function(){this.pagination.current_page="",this.fetchData()},start_date:function(){this.server_errors.start_month=""},image:function(){this.server_errors.image=""}},created:function(){this.month=this.moment(this.curent_month).format("YYYY-MM"),this.fetchData()}},u=l,d=(a("fb5d"),a("2877")),m=a("6544"),v=a.n(m),f=a("8212"),h=a("8336"),p=a("b0af"),_=a("99d9"),b=a("cc20"),g=a("62ad"),y=a("a523"),x=a("2e4b"),C=a("ce7e"),S=a("132d"),k=a("8860"),w=a("da13"),j=a("5d23"),V=a("e449"),D=a("0fd9"),O=a("b974"),$=a("1f4f"),I=a("2fa4"),P=a("8654"),E=Object(d["a"])(u,n,s,!1,null,null,null);e["default"]=E.exports;v()(E,{VAvatar:f["a"],VBtn:h["a"],VCard:p["a"],VCardActions:_["a"],VCardText:_["b"],VCardTitle:_["c"],VChip:b["a"],VCol:g["a"],VContainer:y["a"],VDatePicker:x["a"],VDivider:C["a"],VIcon:S["a"],VList:k["a"],VListItem:w["a"],VListItemTitle:j["d"],VMenu:V["a"],VRow:D["a"],VSelect:O["a"],VSimpleTable:$["a"],VSpacer:I["a"],VTextField:P["a"]})},fb5d:function(t,e,a){"use strict";a("076c")}}]);
//# sourceMappingURL=chunk-a2aa86b0.cb085bee.js.map