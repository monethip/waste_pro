(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3dcce5a8"],{1316:function(t,e,a){"use strict";a("f022")},"43c9":function(t,e,a){"use strict";a.r(e);var s=a("2bc5"),i=a("8336"),r=a("b0af"),n=a("99d9"),o=a("62ad"),l=a("a523"),d=a("2e4b"),c=a("4bd4"),u=a("132d"),h=a("0fd9"),p=a("2fa4"),m=a("8654"),f=function(){var t=this,e=t._self._c;return e(l["a"],[e(h["a"],{staticClass:"mb-4"},[e(o["a"],[e(s["a"],{staticClass:"pa-0",attrs:{large:""}},[e(i["a"],{staticClass:"text-primary",attrs:{text:""},on:{click:function(e){return t.backPrevios()}}},[e(u["a"],[t._v("mdi-chevron-left")])],1),t._v(" ສ້າງບິນລ່ວງໜ້າ ")],1)],1)],1),e("div",[e(r["a"],[e(n["b"],{staticClass:"pa-8"},[e(c["a"],{ref:"form",attrs:{"lazy-validation":""}},[e(h["a"],[e(o["a"],{attrs:{cols:"4"}},[e("p",[t._v("ວັນທີບິນ")]),e(d["a"],{attrs:{type:"month",min:t.now},model:{value:t.billDate,callback:function(e){t.billDate=e},expression:"billDate"}})],1),e(o["a"],{attrs:{cols:"8"}},[e(h["a"],[e(o["a"],[e(m["a"],{attrs:{label:"ຊື່ລາຍການ *",required:"",rules:t.totalRules,outlined:"",dense:"",disabled:t.disabledTitle},model:{value:t.data.title,callback:function(e){t.$set(t.data,"title",e)},expression:"data.title"}}),e("p",{staticClass:"errors"},[t._v(" "+t._s(t.server_errors.title)+" ")])],1),e(o["a"],{attrs:{cols:"2"}},[e(i["a"],{attrs:{color:"primary"},on:{click:function(e){t.disabledTitle=!t.disabledTitle}}},[e(u["a"],[t._v("mdi-pen")])],1)],1)],1),e(h["a"],[e(o["a"],[e(m["a"],{attrs:{label:"ຄຳອະທິບາຍ *",required:"",rules:t.totalRules,outlined:"",dense:"",disabled:t.disabledDescription},model:{value:t.data.description,callback:function(e){t.$set(t.data,"description",e)},expression:"data.description"}}),e("p",{staticClass:"errors"},[t._v(" "+t._s(t.server_errors.description)+" ")])],1),e(o["a"],{attrs:{cols:"2"}},[e(i["a"],{attrs:{color:"primary"},on:{click:function(e){t.disabledDescription=!t.disabledDescription}}},[e(u["a"],[t._v("mdi-pen")])],1)],1)],1),e(h["a"],[e(o["a"],[e(m["a"],{staticClass:"input-number",attrs:{label:"ລາຄາ *",required:"",rules:t.totalRules,type:"number",outlined:"",dense:""},model:{value:t.data.total,callback:function(e){t.$set(t.data,"total",e)},expression:"data.total"}}),e("p",{staticClass:"errors"},[t._v(" "+t._s(t.server_errors.total)+" ")])],1)],1),e(h["a"],[e(o["a"],[e(m["a"],{staticClass:"input-number",attrs:{label:"ຈຳນວນ *",required:"",rules:t.totalRules,type:"number",outlined:"",dense:""},model:{value:t.data.quantity,callback:function(e){t.$set(t.data,"quantity",e)},expression:"data.quantity"}}),e("p",{staticClass:"errors"},[t._v(" "+t._s(t.server_errors.quantity)+" ")])],1)],1)],1)],1)],1),e(n["a"],[e(p["a"]),e(i["a"],{staticClass:"elevation-0 btn-warning mr-4",on:{click:function(e){return t.backPrevios()}}},[t._v(" ຍ້ອນກັບ ")]),e(i["a"],{staticClass:"elevation-0 btn-primary",attrs:{loading:t.loading,disabled:t.loading},on:{click:function(e){return t.AddData()}}},[t._v(" ສ້າງບິນ ")])],1)],1)],1)],1)],1)},_=[],v=(a("14d9"),a("6eceb")),b=a("c1df"),g=a.n(b),y={name:"Invoice",props:["items"],title(){return"Vientiane Waste Co-Dev|Invoice"},data(){return{tab:null,now:(new Date).toISOString().substr(0,7),billDate:(new Date).toISOString().substr(0,7),start_menu:!1,end_menu:!1,invoices:[],loading:!1,disabledTitle:!0,disabledDescription:!0,is_instantly:0,payment_method:"",paymentType:"",data:{email:""},customer:{},calendarId:"",offset:12,pagination:{},per_page:100,search:"",oldVal:"",packages:[],selectedPackage:"",server_errors:{},preview_list:[],image_list:[],image:[],totalRules:[t=>!!t||"Total is required"],paymentTypeRule:[t=>!!t||"Payment is required"]}},watch:{is_instantly(t){console.log(t)},search(t){""==t&&this.fetchData()},billDate(t){this.data.title="ຄ່າບໍລິການປະຈຳເດືອນ "+g()(t).format("MM-YYYY"),this.data.description="ຄ່າບໍລິການປະຈຳເດືອນ "+g()(t).format("MM-YYYY"),this.server_errors.month=""},paymentType(){0==this.paymentType?(this.payment_method="cash",this.image="",this.imageUrl=""):1==this.paymentType&&(this.payment_method="bcel"),this.server_errors.payment_method=""}},created(){this.fetchData(),this.customer.customer||this.$router.push("/")},methods:{RemoveItem(t){this.preview_list.splice(this.preview_list.indexOf(t),1)},previewMultiImage(t){const e=t.target;let a=e.files.length,s=0;if(e.files)while(a--){const t=new FileReader;t.onload=t=>{this.preview_list.push(t.target.result)},this.image_list.push(e.files[s]),t.readAsDataURL(e.files[s]),s++}},fetchData(){console.log(this.items),this.customer=this.items},Search(){Object(v["a"])(this)},backPrevios(){this.$router.go(-1)},AddData(){const t=new FormData;t.append("customer_id",this.customer.customer.id),t.append("title",this.data.title),t.append("description",this.data.description),t.append("start_month",this.billDate),t.append("date",this.billDate),t.append("total",this.data.total),t.append("quantity",this.data.quantity),1==this.is_instantly&&(t.append("is_instantly",1),t.append("payment_method",this.payment_method),this.image_list.map(e=>{t.append("image_payments[]",e)})),1==this.$refs.form.validate()&&(this.loading=!0,this.$axios.post("future-invoice",t,{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{200==t.data.code&&(this.loading=!1,this.$store.commit("Toast_State",{value:!0,color:"success",msg:t.data.message}),this.$router.push({name:"future-invoice"}))}).catch(t=>{if(this.$store.commit("Toast_State",{value:!0,color:"error",msg:t.response?t.response.data.message:"Something went wrong"}),t.response&&422==t.response.status){const e=t.response.data.errors;for(const[t,a]of Object.entries(e))this.server_errors[t]=a[0]}this.loading=!1}))}}},w=y,D=(a("1316"),a("2877")),$=Object(D["a"])(w,f,_,!1,null,null,null);e["default"]=$.exports},"4bd4":function(t,e,a){"use strict";a("14d9");var s=a("58df"),i=a("7e2b"),r=a("3206");e["a"]=Object(s["a"])(i["a"],Object(r["b"])("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(t){const e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput(t){const e=t=>t.$watch("hasError",e=>{this.$set(this.errorBag,t._uid,e)},{immediate:!0}),a={_uid:t._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?a.shouldValidate=t.$watch("shouldValidate",s=>{s&&(this.errorBag.hasOwnProperty(t._uid)||(a.valid=e(t)))}):a.valid=e(t),a},validate(){return 0===this.inputs.filter(t=>!t.validate(!0)).length},reset(){this.inputs.forEach(t=>t.reset()),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout(()=>{this.errorBag={}},0)},resetValidation(){this.inputs.forEach(t=>t.resetValidation()),this.resetErrorBag()},register(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister(t){const e=this.inputs.find(e=>e._uid===t._uid);if(!e)return;const a=this.watchers.find(t=>t._uid===e._uid);a&&(a.valid(),a.shouldValidate()),this.watchers=this.watchers.filter(t=>t._uid!==e._uid),this.inputs=this.inputs.filter(t=>t._uid!==e._uid),this.$delete(this.errorBag,e._uid)}},render(t){return t("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:t=>this.$emit("submit",t)}},this.$slots.default)}})},"6eceb":function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));const s=t=>{""!==t.search?""!==t.oldVal?t.oldVal!==t.search&&(t.oldVal=t.search,t.pagination.current_page=1,t.fetchData()):(""!==t.search&&(t.pagination.current_page=1,t.fetchData()),t.oldVal=t.search):t.oldVal=""}},afdd:function(t,e,a){"use strict";var s=a("8336");e["a"]=s["a"]},f022:function(t,e,a){}}]);
//# sourceMappingURL=chunk-3dcce5a8.de2eacae.js.map