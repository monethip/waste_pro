(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57a4ca37"],{"3a5c":function(e,t,a){},"511a":function(e,t,a){"use strict";a("3a5c")},"7f3f":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-breadcrumbs",{attrs:{large:""}},[e._v("Update Customer")]),a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Add User")])]),a("v-card-text",[a("v-container",[a("v-form",{ref:"form",attrs:{"lazy-validation":""}},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-file-input",{ref:"file",attrs:{placeholder:"Upload your image",label:"Image input",multiple:"","prepend-icon":"mdi-paperclip",accept:"image/png, image/jpeg, image/svg",type:"file"},scopedSlots:e._u([{key:"selection",fn:function(t){var s=t.text;return[a("v-chip",{attrs:{small:"",label:"",color:"primary"}},[e._v(" "+e._s(s)+" ")])]}}]),model:{value:e.files,callback:function(t){e.files=t},expression:"files"}}),a("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.images)+" ")])],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"Name *",required:"",rules:e.nameRules},model:{value:e.data.name,callback:function(t){e.$set(e.data,"name",t)},expression:"data.name"}}),a("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.name)+" ")])],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"Surname *",required:"",rules:e.nameRules},model:{value:e.data.surname,callback:function(t){e.$set(e.data,"surname",t)},expression:"data.surname"}}),a("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.surname)+" ")])],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{staticClass:"input-number",attrs:{label:"ເຮືອນເລກທີ *",required:"",rules:e.houseNumberRules,type:"number"},model:{value:e.data.house_number,callback:function(t){e.$set(e.data,"house_number",t)},expression:"data.house_number"}}),a("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.house_number)+" ")])],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{staticClass:"input-number",attrs:{label:"ເບີໂທ *",required:"",rules:e.phoneRules,type:"number"},model:{value:e.data.phone,callback:function(t){e.$set(e.data,"phone",t)},expression:"data.phone"}}),a("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.phone)+" ")])],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{label:"Email *",required:"",rules:e.emailRules},model:{value:e.data.email,callback:function(t){e.$set(e.data,"email",t)},expression:"data.email"}}),a("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.email)+" ")])],1),a("v-col",{attrs:{cols:"4"}},[a("v-autocomplete",{attrs:{required:"",items:e.districts,"item-text":"name","item-value":"id",label:"District *",rulesDistrict:e.rulePermission},model:{value:e.selectedDistrict,callback:function(t){e.selectedDistrict=t},expression:"selectedDistrict"}}),a("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.district_id)+" ")])],1),a("v-col",{attrs:{cols:"4"}},[a("v-autocomplete",{attrs:{required:"",items:e.villages,"item-text":"name","item-value":"id",label:"Village *",rules:e.rulePermission},model:{value:e.selectedVillage,callback:function(t){e.selectedVillage=t},expression:"selectedVillage"}}),a("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.village_id)+" ")])],1),a("v-col",{attrs:{cols:"4"}},[a("v-select",{attrs:{required:"",items:e.village_details,"item-text":"name","item-value":"id",label:"Village Detail *",multiple:"",rules:e.rulePermission},model:{value:e.selectedVillageDetail,callback:function(t){e.selectedVillageDetail=t},expression:"selectedVillageDetail"}}),a("p",{staticClass:"errors"},[e._v(" "+e._s(e.errormsg)+" ")])],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"Password *",type:"password",rules:e.passwordRules,required:""},model:{value:e.data.password,callback:function(t){e.$set(e.data,"password",t)},expression:"data.password"}}),a("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.password)+" ")])],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"Password Confirm *",type:"password",rules:e.passwordConfirmRules,required:""},model:{value:e.data.password_confirmation,callback:function(t){e.$set(e.data,"password_confirmation",t)},expression:"data.password_confirmation"}}),a("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.password_confirmation)+" ")])],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{staticClass:"input-number",attrs:{label:"Latitude",type:"number"},model:{value:e.latlng.lat,callback:function(t){e.$set(e.latlng,"lat",t)},expression:"latlng.lat"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{staticClass:"input-number",attrs:{label:"Longitude",type:"number"},model:{value:e.latlng.lng,callback:function(t){e.$set(e.latlng,"lng",t)},expression:"latlng.lng"}})],1),a("v-col",{attrs:{cols:"12"}},[a("gmap-autocomplete",{ref:"searchInput",staticClass:"input text-field",attrs:{placeholder:"ຄົ້ນຫາເເຜນທີ່...",options:{fields:["geometry","formatted_address","name"]}},on:{place_changed:e.setPlace}}),a("span",{staticClass:"horizontal-divider"})],1),a("v-col",{staticClass:"mb-4",attrs:{cols:"12"}},[a("GmapMap",{staticStyle:{width:"100%",height:"450px"},attrs:{center:e.latlng,zoom:16,disableDefaultUI:!0}},e._l(e.markers,(function(t,s){return a("GmapMarker",{key:s,ref:"markers",refInFor:!0,attrs:{position:t.position,draggable:!0,icon:e.markerOptions,animation:2},on:{click:function(a){e.latlng=t.position},dragend:e.onLocation}})})),1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.backPrevios()}}},[e._v(" Back ")]),a("v-btn",{attrs:{color:"blue darken-1",text:"",loading:e.loading,disabled:e.loading},on:{click:function(t){return e.AddData()}}},[e._v(" Save ")])],1)],1)],1)],1)},r=[],i=a("3835"),l=(a("d81d"),a("b0c0"),a("4fad"),a("99af"),{data:function(){return{data:{},loading:!1,server_errors:{},provinces:[],districts:[],selectedDistrict:"",villages:[],selectedVillage:"",village_details:[],selectedVillageDetail:"",address:[],errormsg:"",files:[],latlng:{lat:18.1189434,lng:102.290218},markers:[],currentPlace:null,markerOptions:{url:a("56a2"),size:{width:35,height:55,f:"px",b:"px"},scaledSize:{width:35,height:55,f:"px",b:"px"}},preview_list:[],image_list:[],image:[],emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],passwordRules:[function(e){return!!e||"Password is required"},function(e){return e&&e.length>=8||"Password must be more than 8 characters"}],passwordConfirmRules:[function(e){return!!e||"Password Confirm is required"},function(e){return e&&e.length>=8||"Password must be more than 8 characters"}],nameRules:[function(e){return!!e||"Name is required"},function(e){return e&&e.length>=2||"Name must be less than 2 characters"}],phoneRules:[function(e){return!!e||"Phone is required"},function(e){return e&&e.length>=4&&e.length<=11||"Phone number must be  4 - 11 numbers"}],houseNumberRules:[function(e){return!!e||"House number is required"}],rulePermission:[function(e){return!!e||"Permission is required"}],rulePermissionRole:[function(e){return!!e||"Role is required"}],rulesDistrict:[function(e){return!!e||"District is required"}],rules:[function(e){return!!e||"File is required"},function(e){return e&&e.size>0||"File is required"}]}},methods:{fetchAddress:function(){var e=this;this.$axios.get("info/address",{params:{filter:"ນະຄອນຫລວງວຽງຈັນ"}}).then((function(t){200==t.data.code&&setTimeout((function(){e.address=t.data.data,e.address.map((function(t){e.districts=t.districts,e.selectedDistrict=e.districts[0].id})),e.fetchVillage()}),300)})).catch((function(){}))},fetchVillage:function(){var e=this;this.$axios.get("info/district/"+this.selectedDistrict+"/village").then((function(t){200==t.data.code&&setTimeout((function(){e.villages=t.data.data,e.selectedVillage=e.villages[0].id,e.fetchVillageDetail()}),300)})).catch((function(){}))},fetchVillageDetail:function(){var e=this;this.$axios.get("info/village/"+this.selectedVillage+"/village-detail").then((function(t){200==t.data.code&&setTimeout((function(){e.village_details=t.data.data}),300)})).catch((function(){}))},backPrevios:function(){this.$router.go(-1)},AddData:function(){var e=this,t=new FormData;this.files.map((function(a){t.append("name",e.data.name),t.append("surname",e.data.surname),t.append("village_id",e.selectedVillage),t.append("house_number",e.data.house_number),t.append("vilage_details[]",e.selectedVillageDetail),t.append("vilage_details[]",e.selectedVillageDetail),t.append("latitude",e.latlng.lat),t.append("longitude",e.latlng.lng),t.append("phone",e.data.phone),t.append("email",e.data.email),t.append("password",e.data.password),t.append("password_confirmation",e.data.password_confirmation),t.append("images[]",a)})),1==this.$refs.form.validate()&&(this.loading=!0,this.$axios.post("customer",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){200==t.data.code&&setTimeout((function(){e.$store.commit("Toast_State",t.data.message),e.$router.push({name:"Customer"})}),300)})).catch((function(t){if(422==t.response.status)for(var a=t.response.data.errors,s=0,r=Object.entries(a);s<r.length;s++){var l=Object(i["a"])(r[s],2),n=l[0],o=l[1];e.server_errors[n]=o[0]}e.loading=!1,e.fetchData(),e.$store.commit("Toast_State",e.toast_error)})))},createNewAddressName:function(){var e="#CUSTOM ADDRESS:";return this.isCreate?this.currentAddress:"".concat(e," ").concat(this.latlng.lat,", ").concat(this.latlng.lng)},onLocation:function(e){this.latlng.lat=e.latLng.lat(),this.latlng.lng=e.latLng.lng(),this.address=this.createNewAddressName()},setPlace:function(e){this.currentPlace=e,this.placeMarker()},placeMarker:function(){if(this.markers=[],this.places=[],this.currentPlace){var e={lat:this.currentPlace.geometry.location.lat(),lng:this.currentPlace.geometry.location.lng()};this.markers.push({position:e}),this.latlng=e,this.animateMarker()}else{var t={lat:this.latlng.lat,lng:this.latlng.lng};this.markers.push({position:t}),this.animateMarker()}this.$refs.searchInput&&(this.address=this.$refs.searchInput.$el.value),this.onDataChange()},animateMarker:function(){this.$nextTick((function(){}))},geolocate:function(){var e=this;navigator.geolocation.getCurrentPosition((function(t){e.latlng={lat:t.coords.latitude,lng:t.coords.longitude},e.placeMarker()}))},onDataChange:function(){this.$emit("onDataChange",{address:this.address,position:this.latlng})},onSave:function(){this.$emit("onSave",{address:this.address||this.currentAddress||"Unnamed Location",position:this.latlng,isCreate:this.isCreate})}},watch:{selectedDistrict:function(){this.fetchVillage()},selectedVillage:function(){this.fetchVillageDetail()},"data.name":function(){this.server_errors.name=""},"data.surname":function(){this.server_errors.surname=""},"data.house_number":function(){this.server_errors.house_number=""},"data.phone":function(){this.server_errors.phone=""},"data.email":function(){this.server_errors.email=""},"data.password":function(){this.server_errors.password=""},"data.password_confirmation":function(){this.server_errors.password=""}},mounted:function(){this.geolocate()},created:function(){this.fetchAddress()}}),n=l,o=(a("511a"),a("2877")),c=a("6544"),d=a.n(c),u=a("c6a6"),m=a("2bc5"),p=a("8336"),f=a("b0af"),h=a("99d9"),v=a("cc20"),g=a("62ad"),_=a("a523"),b=a("23a7"),w=a("4bd4"),x=a("0fd9"),k=a("b974"),C=a("2fa4"),V=a("8654"),D=Object(o["a"])(n,s,r,!1,null,null,null);t["default"]=D.exports;d()(D,{VAutocomplete:u["a"],VBreadcrumbs:m["a"],VBtn:p["a"],VCard:f["a"],VCardActions:h["a"],VCardText:h["b"],VCardTitle:h["c"],VChip:v["a"],VCol:g["a"],VContainer:_["a"],VFileInput:b["a"],VForm:w["a"],VRow:x["a"],VSelect:k["a"],VSpacer:C["a"],VTextField:V["a"]})}}]);
//# sourceMappingURL=chunk-57a4ca37.9dd51c58.js.map