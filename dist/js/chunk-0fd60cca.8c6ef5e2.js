(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0fd60cca"],{"1e6c":function(e,t,a){"use strict";var s=a("9d65"),i=a("4e82"),r=a("c3f0"),n=a("80d2"),o=a("58df");const l=Object(o["a"])(s["a"],Object(i["a"])("windowGroup","v-window-item","v-window"));t["a"]=l.extend().extend().extend({name:"v-window-item",directives:{Touch:r["a"]},props:{disabled:Boolean,reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},value:{required:!1}},data(){return{isActive:!1,inTransition:!1}},computed:{classes(){return this.groupClasses},computedTransition(){return this.windowGroup.internalReverse?"undefined"!==typeof this.reverseTransition?this.reverseTransition||"":this.windowGroup.computedTransition:"undefined"!==typeof this.transition?this.transition||"":this.windowGroup.computedTransition}},methods:{genDefaultSlot(){return this.$slots.default},genWindowItem(){return this.$createElement("div",{staticClass:"v-window-item",class:this.classes,directives:[{name:"show",value:this.isActive}],on:this.$listeners},this.genDefaultSlot())},onAfterTransition(){this.inTransition&&(this.inTransition=!1,this.windowGroup.transitionCount>0&&(this.windowGroup.transitionCount--,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=void 0)))},onBeforeTransition(){this.inTransition||(this.inTransition=!0,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=Object(n["h"])(this.windowGroup.$el.clientHeight)),this.windowGroup.transitionCount++)},onTransitionCancelled(){this.onAfterTransition()},onEnter(e){this.inTransition&&this.$nextTick(()=>{this.computedTransition&&this.inTransition&&(this.windowGroup.transitionHeight=Object(n["h"])(e.clientHeight))})}},render(e){return e("transition",{props:{name:this.computedTransition},on:{beforeEnter:this.onBeforeTransition,afterEnter:this.onAfterTransition,enterCancelled:this.onTransitionCancelled,beforeLeave:this.onBeforeTransition,afterLeave:this.onAfterTransition,leaveCancelled:this.onTransitionCancelled,enter:this.onEnter}},this.showLazyContent(()=>[this.genWindowItem()]))}})},"22d2":function(e,t,a){},"2bfd":function(e,t,a){},"36b8":function(e,t,a){"use strict";a.r(t);var s=a("2bc5"),i=a("b0af"),r=a("99d9"),n=a("62ad"),o=a("a523"),l=a("0fd9"),c=a("71a3"),d=a("c671"),h=a("fe57"),u=a("aac8"),m=function(){var e=this,t=e._self._c;return t(o["a"],[t(l["a"],{staticClass:"mb-0"},[t(n["a"],[t(s["a"],{staticClass:"pa-0",attrs:{large:""}},[e._v(" ຈັດການຂໍ້ມູນບິນ "),t("span",{staticClass:"primary-color"},[e._v(" "+e._s(e.plan_month.name)+" ("+e._s(e.plan_month.has_invoice)+")")])])],1)],1),t(i["a"],{attrs:{elevation:"1"}},[t(r["b"],[t(h["a"],{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[t(c["a"],{attrs:{href:"#tab-1"}},[e._v(" ສ້າງບິນ ")]),t(c["a"],{attrs:{href:"#tab-2"}},[e._v(" ບິນທີ່ອະນຸມັດ ")]),t(c["a"],{attrs:{href:"#tab-3"}},[e._v(" ຢືນຢັນການຊຳລະ ")]),t(c["a"],{attrs:{href:"#tab-4"}},[e._v(" ບິນທີ່ຊຳລະບໍຜ່ານ ")]),t(c["a"],{attrs:{href:"#tab-5"}},[e._v(" ບິນທີ່ສຳເລັດ ")])],1),t(u["a"],{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[t(d["a"],{attrs:{value:"tab-1"}},[t(i["a"],{attrs:{flat:""}},[t(r["b"],[t("allInvoice",{attrs:{tab:e.tab}})],1)],1)],1)],1),t(u["a"],{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[t(d["a"],{attrs:{value:"tab-2"}},[t(i["a"],{attrs:{flat:""}},[t(r["b"],[t("approvedInvoice",{attrs:{tab:e.tab}})],1)],1)],1)],1),t(u["a"],{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[t(d["a"],{attrs:{value:"tab-3"}},[t(i["a"],{attrs:{flat:""}},[t(r["b"],[t("confirmPayment",{attrs:{tab:e.tab}})],1)],1)],1)],1),t(u["a"],{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[t(d["a"],{attrs:{value:"tab-4"}},[t(i["a"],{attrs:{flat:""}},[t(r["b"],[t("reject",{attrs:{tab:e.tab}})],1)],1)],1)],1),t(u["a"],{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[t(d["a"],{attrs:{value:"tab-5"}},[t(i["a"],{attrs:{flat:""}},[t(r["b"],[t("success",{attrs:{tab:e.tab}})],1)],1)],1)],1)],1)],1)],1)},p=[],f=(a("14d9"),a("c6a6")),v=a("8336"),g=a("cc20"),_=a("8fea"),b=a("4bd4"),x=a("132d"),y=a("8860"),I=a("da13"),D=a("5d23"),$=a("e449"),w=a("2fa4"),k=a("8654"),S=function(){var e=this,t=e._self._c;return t(o["a"],[t(l["a"],[t(n["a"],[t("p",[e._v(" ລວມບິນ "),t("span",{staticClass:"primary-color"},[e._v("("+e._s(e.pagination.total)+")")])])]),t(n["a"],[t(f["a"],{attrs:{outlined:"",dense:"",items:e.customer_types,"item-text":"display","item-value":"name",label:"ປະເພດລູກຄ້າ"},model:{value:e.selectedCustomerType,callback:function(t){e.selectedCustomerType=t},expression:"selectedCustomerType"}})],1),t(n["a"],[t(f["a"],{attrs:{outlined:"",dense:"",items:e.users,"item-text":"name","item-value":"id",label:"User"},model:{value:e.selectedUser,callback:function(t){e.selectedUser=t},expression:"selectedUser"}})],1),t(n["a"],[t(f["a"],{attrs:{outlined:"",dense:"",items:e.plans,"item-text":"name","item-value":"id",label:"ແຜນເສັ້ນທາງ",multiple:""},model:{value:e.selectedPlan,callback:function(t){e.selectedPlan=t},expression:"selectedPlan"}})],1),t(n["a"],[t(f["a"],{attrs:{outlined:"",dense:"",items:e.districts,"item-text":"name","item-value":"id",label:"ເມືອງ"},model:{value:e.selectedDistrict,callback:function(t){e.selectedDistrict=t},expression:"selectedDistrict"}})],1),t(n["a"],[t(f["a"],{attrs:{outlined:"",dense:"",items:e.villages,"item-text":"name","item-value":"id",label:"ບ້ານ",multiple:""},model:{value:e.selectedVillage,callback:function(t){e.selectedVillage=t},expression:"selectedVillage"}})],1)],1),t("div",[t(l["a"],{staticClass:"my-0 mx-2"},[t(n["a"],[e.selectedRows.length?t(v["a"],{staticClass:"mb-2",attrs:{outlined:"",color:"info"},on:{click:function(t){return e.Approve()}}},[e._v(" ອະນຸມັດບິນ "+e._s(e.selectedRows.length)+" ")]):e._e()],1)],1),t(_["a"],{attrs:{headers:e.headers,items:e.invoices,search:e.search,"disable-pagination":!0,"hide-default-footer":"","show-select":"","fixed-header":"",height:"100vh"},scopedSlots:e._u([{key:"item.customer",fn:function({item:a}){return[(a.customer.customer_type="company")?t("div",[e._v(" "+e._s(a.customer.company_name)+" ")]):e._e(),t("div",[e._v(e._s(a.customer.name))])]}},{key:"item.total_bag",fn:function({item:a}){return[t(g["a"],{attrs:{color:"success"}},[e._v(" "+e._s(a.total_bag)+" ")])]}},{key:"item.exceed_bag",fn:function({item:a}){return[t(g["a"],{attrs:{color:"error"}},[e._v(" "+e._s(a.exceed_bag)+" ")])]}},{key:"item.exceed_bag_charge",fn:function({item:a}){return[t("div",[e._v(" "+e._s(Intl.NumberFormat().format(a.exceed_bag_charge))+" ")])]}},{key:"item.new_exceed_bag_charge",fn:function({item:a}){return[t("div",{staticClass:"error--text"},[e._v(" "+e._s(Intl.NumberFormat().format(a.new_exceed_bag_charge))+" ")])]}},{key:"item.sub_total",fn:function({item:a}){return[t("div",[e._v(" "+e._s(Intl.NumberFormat().format(a.sub_total))+" ")])]}},{key:"item.total",fn:function({item:a}){return[t("div",[e._v(" "+e._s(Intl.NumberFormat().format(a.total))+" ")])]}},{key:"item.actions",fn:function({item:a}){return[t($["a"],{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(x["a"],e._g(e._b({staticClass:"mr-2",attrs:{color:"primary",dark:"",medium:""}},"v-icon",s,!1),a),[e._v(" mdi-dots-vertical ")])]}}],null,!0)},[t(y["a"],[t(I["a"],{attrs:{link:""}},[t(D["d"],{on:{click:function(t){return e.viewPage(a.id)}}},[t(x["a"],{staticClass:"mr-2",attrs:{small:""}},[e._v(" mdi-eye ")]),e._v(" ລາຍລະອຽດ ")],1)],1),t(I["a"],{attrs:{link:""}},[t(D["d"],{on:{click:function(t){return e.editModal(a)}}},[t(x["a"],{staticClass:"mr-2",attrs:{small:""}},[e._v(" mdi-pencil ")]),e._v(" ແກ້ໄຂບິນ ")],1)],1)],1)],1)]}}]),model:{value:e.selectedRows,callback:function(t){e.selectedRows=t},expression:"selectedRows"}}),t("br"),[e.pagination.total_pages>1?t("Pagination",{attrs:{pagination:e.pagination,offset:e.offset},on:{paginate:function(t){return e.fetchData()}}}):e._e()]],2),t("ModalEdit",[[t(i["a"],[t(r["c"],[t("p",[e._v("ແກ້ໄຂບິນ")])]),t(r["b"],[t(o["a"],[t(b["a"],{ref:"form",attrs:{"lazy-validation":""}},[t(l["a"],[t(n["a"],{attrs:{cols:"12"}},[t(k["a"],{staticClass:"input-number",attrs:{label:"ສ່ວນຫຼຸດ",outlined:"",dense:"",type:"number"},model:{value:e.editItem.discount,callback:function(t){e.$set(e.editItem,"discount",t)},expression:"editItem.discount"}}),t("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.discount)+" ")])],1)],1),t(l["a"],[t(n["a"],{attrs:{cols:"12"}},[t(k["a"],{staticClass:"input-number",attrs:{label:"ຈຳນວນຖົງ",outlined:"",dense:"",type:"number"},model:{value:e.editItem.new_exceed_bag_charge,callback:function(t){e.$set(e.editItem,"new_exceed_bag_charge",t)},expression:"editItem.new_exceed_bag_charge"}}),t("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.new_exceed_bag_charge)+" ")])],1)],1)],1)],1),t(r["a"],[t(w["a"]),t(v["a"],{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.closeEditModal()}}},[e._v(" Close ")]),t(v["a"],{attrs:{color:"blue darken-1",text:"",loading:e.loading,disabled:e.loading},on:{click:function(t){return e.UpdateItem()}}},[e._v(" Update ")])],1)],1)],1)]],2)],1)},T=[],C=a("6eceb"),P=a("54da"),j={name:"Customer",props:["tab"],data(){return{selectedRows:[],loading:!1,customerId:"",offset:12,pagination:{},per_page:20,search:"",oldVal:"",invoices:[],editItem:{},server_errors:{},plans:[],selectedPlan:[],selectedUser:"",users:[],districts:[],selectedDistrict:"",villages:[],selectedVillage:[],selectedCustomerType:"home",customer_types:[{name:"home",display:"ຄົວເຮືອນ"},{name:"company",display:"ບໍລິສັດ"}],selectedStatus:["created"],headers:[{text:"InvoiceId",value:"invoice_id"},{text:"ລູກຄ້າ",value:"customer"},{text:"ຈຳນວນຖົງ",value:"total_bag",sortable:!1,align:"center"},{text:"ຈຳນວນຖົງເກີນ",value:"exceed_bag",sortable:!1,align:"center"},{text:"ຈຳນວນເງິນ",value:"exceed_bag_charge",sortable:!1},{text:"ຈຳນວນເງິນໄລ່ເພີ່ມ",value:"new_exceed_bag_charge",sortable:!1},{text:"ສ່ວນຫຼຸດ",value:"discount"},{text:"SubTotal",value:"sub_total",sortable:!1},{text:"Total",value:"total",sortable:!1},{text:"Type",value:"type",sortable:!1},{text:"",value:"actions",sortable:!1}]}},watch:{search(e){""==e&&this.fetchData()},selectedStatus(){this.fetchData()},tab(){"tab-1"==this.tab&&this.fetchData()},selectedCustomerType(){this.fetchData()},selectedPlan(){this.fetchData()},selectedVillage(){this.fetchData()},selectedDistrict(){this.fetchVillage(),this.fetchData()},selectedUser(){this.fetchData()}},created(){this.fetchUser(),this.fetchData(),this.fetchRoutePlan(),this.fetchAddress()},methods:{fetchData(){this.$store.commit("Loading_State",!0),this.$axios.get(`plan-month/${this.$route.params.id}/invoice`,{params:Object(P["a"])([{page:this.pagination.current_page},{per_page:this.per_page},{villages:this.selectedVillage},{statuses:this.selectedStatus},{route_plans:this.selectedPlan},{customer_type:this.selectedCustomerType},{user_id:this.selectedUser},{district_id:this.selectedDistrict}])}).then(e=>{200==e.data.code&&(this.$store.commit("Loading_State",!1),this.invoices=e.data.data.data,this.pagination=e.data.data.pagination)}).catch(e=>{if(this.$store.commit("Loading_State",!1),e.response&&422==e.response.status){const t=e.response.data.errors;for(const[e,a]of Object.entries(t))this.server_errors[e]=a[0]}})},fetchRoutePlan(){this.$axios.get("route-plan").then(e=>{200==e.data.code&&(this.plans=e.data.data)}).catch(()=>{})},fetchUser(){this.$axios.get("user-setting/user",{params:{roles:["admin"]}}).then(e=>{200===e.data.code&&(this.users=e.data.data)}).catch(()=>{})},fetchAddress(){this.$axios.get("info/address",{params:{filter:"ນະຄອນຫລວງວຽງຈັນ"}}).then(e=>{200==e.data.code&&(this.address=e.data.data,this.address.map(e=>{this.districts=e.districts}))}).catch(()=>{})},fetchVillage(){this.$axios.get(`info/district/${this.selectedDistrict}/village`).then(e=>{200==e.data.code&&(this.villages=e.data.data)}).catch(()=>{})},editModal(e){this.editItem=e,this.$store.commit("modalEdit_State",!0)},UpdateItem(){1==this.$refs.form.validate()&&(this.loading=!0,this.$axios.put("invoice/"+this.editItem.id,{discount:this.editItem.discount,new_exceed_bag_charge:this.editItem.new_exceed_bag_charge}).then(e=>{200==e.data.code&&setTimeout(()=>{this.loading=!1,this.closeEditModal(),this.fetchData(),this.$store.commit("Toast_State",{value:!0,color:"success",msg:e.data.message})},300),1==e.data.error&&this.$store.commit("Toast_State",{value:!0,color:"error",msg:e.data.message})}).catch(e=>{if(this.loading=!1,this.$store.commit("Toast_State",{value:!0,color:"error",msg:e.response?e.response.data.message:"Something went wrong"}),e.response&&422==e.response.status){const t=e.response.data.errors;for(const[e,a]of Object.entries(t))this.server_errors[e]=a[0]}this.fetchData()}))},closeEditModal(){this.$store.commit("modalEdit_State",!1)},Approve(){const e=[];this.selectedRows.filter(t=>{e.push(t.id)}),this.loading=!0,this.$axios.put(`plan-month/${this.$route.params.id}/approve-invoice/`,{invoices:e}).then(e=>{200==e.data.code&&setTimeout(()=>{this.loading=!1,this.$store.commit("Toast_State",{value:!0,color:"success",msg:e.data.message}),this.selectedRows=[],this.$store.commit("modalDelete_State",!1),this.fetchData()},300)}).catch(()=>{this.fetchData(),this.selectedRows=[],this.$store.commit("modalDelete_State",!1),this.loading=!1})},viewPage(e){this.$router.push({name:"InvoiceDetail",params:{id:e}})},Search(){Object(C["a"])(this)},remove(e){const t=this.selectedStatus.indexOf(e.id);t>=0&&this.selectedStatus.splice(t,0)[0]}}},V=j,U=(a("4140"),a("2877")),O=Object(U["a"])(V,S,T,!1,null,null,null),A=O.exports,F=function(){var e=this,t=e._self._c;return t("div",[t(l["a"],[t(n["a"],[t("p",[e._v(" ລວມບິນ "),t("span",{staticClass:"primary-color"},[e._v("("+e._s(e.pagination.total)+")")])])]),t(n["a"],[t(f["a"],{attrs:{outlined:"",dense:"",items:e.customer_types,"item-text":"display","item-value":"name",label:"ປະເພດລູກຄ້າ"},model:{value:e.selectedCustomerType,callback:function(t){e.selectedCustomerType=t},expression:"selectedCustomerType"}})],1),t(n["a"],[t(f["a"],{attrs:{outlined:"",dense:"",items:e.users,"item-text":"name","item-value":"id",label:"User"},model:{value:e.selectedUser,callback:function(t){e.selectedUser=t},expression:"selectedUser"}})],1),t(n["a"],[t(f["a"],{attrs:{outlined:"",dense:"",items:e.plans,"item-text":"name","item-value":"id",label:"ແຜນເສັ້ນທາງ",multiple:""},model:{value:e.selectedPlan,callback:function(t){e.selectedPlan=t},expression:"selectedPlan"}})],1),t(n["a"],[t(f["a"],{attrs:{outlined:"",dense:"",items:e.districts,"item-text":"name","item-value":"id",label:"ເມືອງ"},model:{value:e.selectedDistrict,callback:function(t){e.selectedDistrict=t},expression:"selectedDistrict"}})],1),t(n["a"],[t(f["a"],{attrs:{outlined:"",dense:"",items:e.villages,"item-text":"name","item-value":"id",label:"ບ້ານ",multiple:""},model:{value:e.selectedVillage,callback:function(t){e.selectedVillage=t},expression:"selectedVillage"}})],1)],1),t("div",[t(_["a"],{attrs:{headers:e.headers,items:e.invoices,"disable-pagination":!0,"hide-default-footer":"","fixed-header":"",height:"100vh"},scopedSlots:e._u([{key:"item.customer",fn:function({item:a}){return[(a.customer.customer_type="company")?t("div",[e._v(" "+e._s(a.customer.company_name)+" ")]):e._e(),t("div",[e._v(e._s(a.customer.name))])]}},{key:"item.total_bag",fn:function({item:a}){return[t(g["a"],{attrs:{color:"success"}},[e._v(" "+e._s(a.total_bag)+" ")])]}},{key:"item.exceed_bag",fn:function({item:a}){return[t(g["a"],{attrs:{color:"error"}},[e._v(" "+e._s(a.exceed_bag)+" ")])]}},{key:"item.exceed_bag_charge",fn:function({item:a}){return[t("div",[e._v(" "+e._s(Intl.NumberFormat().format(a.exceed_bag_charge))+" ")])]}},{key:"item.new_exceed_bag_charge",fn:function({item:a}){return[t("div",{staticClass:"error--text"},[e._v(" "+e._s(Intl.NumberFormat().format(a.new_exceed_bag_charge))+" ")])]}},{key:"item.sub_total",fn:function({item:a}){return[t("div",[e._v(" "+e._s(Intl.NumberFormat().format(a.sub_total))+" ")])]}},{key:"item.total",fn:function({item:a}){return[t("div",[e._v(" "+e._s(Intl.NumberFormat().format(a.total))+" ")])]}},{key:"item.actions",fn:function({item:a}){return[t($["a"],{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(x["a"],e._g(e._b({staticClass:"mr-2",attrs:{color:"primary",dark:"",medium:""}},"v-icon",s,!1),a),[e._v(" mdi-dots-vertical ")])]}}],null,!0)},[t(y["a"],[t(I["a"],{attrs:{link:""},on:{click:function(t){return e.viewPage(a.id)}}},[t(D["d"],[t(x["a"],{attrs:{small:""}},[e._v(" mdi-eye ")]),e._v(" ລາຍລະອຽດ ")],1)],1),t(I["a"],{attrs:{link:""},on:{click:function(t){return e.PaymentPage(a.id)}}},[t(D["d"],[t(x["a"],{attrs:{small:""}},[e._v(" mdi-credit-card ")]),e._v(" ຊຳລະບິນ ")],1)],1)],1)],1)]}}])}),t("br"),[e.pagination.total_pages>1?t("Pagination",{attrs:{pagination:e.pagination,offset:e.offset},on:{paginate:function(t){return e.fetchApproveData()}}}):e._e()]],2)],1)},R=[],L={name:"Approved",props:["tab"],data(){return{loading:!1,offset:12,pagination:{},per_page:20,invoices:[],server_errors:{},selectedStatus:["approved"],plans:[],selectedPlan:[],districts:[],selectedDistrict:"",villages:[],selectedVillage:[],selectedUser:"",users:[],selectedCustomerType:"home",customer_types:[{name:"home",display:"ຄົວເຮືອນ"},{name:"company",display:"ບໍລິສັດ"}],headers:[{text:"InvoiceId",value:"invoice_id"},{text:"ລູກຄ້າ",value:"customer"},{text:"ຈຳນວນຖົງ",value:"total_bag",sortable:!1,align:"center"},{text:"ຈຳນວນຖົງເກີນ",value:"exceed_bag",sortable:!1,align:"center"},{text:"ຈຳນວນເງິນ",value:"exceed_bag_charge",sortable:!1},{text:"ຈຳນວນເງິນໄລ່ເພີ່ມ",value:"new_exceed_bag_charge",sortable:!1},{text:"ສ່ວນຫຼຸດ",value:"discount"},{text:"SubTotal",value:"sub_total",sortable:!1},{text:"Total",value:"total",sortable:!1},{text:"Type",value:"type",sortable:!1},{text:"",value:"actions",sortable:!1}]}},watch:{tab(){"tab-2"==this.tab&&this.fetchApproveData()},selectedCustomerType(){this.fetchApproveData()},selectedPlan(){this.fetchApproveData()},selectedVillage(){this.fetchApproveData()},selectedDistrict(){this.fetchVillage(),this.fetchApproveData()},selectedUser(){this.fetchApproveData()}},created(){this.fetchUser(),this.fetchApproveData(),this.fetchRoutePlan(),this.fetchAddress()},methods:{backPrevios(){this.$router.go(-1)},onFileChange(e){const t=e.target,a=e.target.files[0];this.image=t.files[0],this.imageUrl=URL.createObjectURL(a)},fetchApproveData(){this.$store.commit("Loading_State",!0),this.$axios.get(`plan-month/${this.$route.params.id}/invoice`,{params:Object(P["a"])([{page:this.pagination.current_page},{per_page:this.per_page},{villages:this.selectedVillage},{statuses:this.selectedStatus},{route_plans:this.selectedPlan},{customer_type:this.selectedCustomerType},{user_id:this.selectedUser},{district_id:this.selectedDistrict}])}).then(e=>{200==e.data.code&&(this.$store.commit("Loading_State",!1),this.invoices=e.data.data.data,this.pagination=e.data.data.pagination)}).catch(e=>{this.$store.commit("Loading_State",!1),this.$store.commit("Toast_State",{value:!0,color:"error",msg:e.response?e.response.data.message:"Something went wrong"})})},fetchRoutePlan(){this.$axios.get("route-plan").then(e=>{200==e.data.code&&(this.plans=e.data.data)}).catch(()=>{})},fetchAddress(){this.$axios.get("info/address",{params:{filter:"ນະຄອນຫລວງວຽງຈັນ"}}).then(e=>{200==e.data.code&&(this.address=e.data.data,this.address.map(e=>{this.districts=e.districts}))}).catch(()=>{})},fetchVillage(){this.$axios.get(`info/district/${this.selectedDistrict}/village`).then(e=>{200==e.data.code&&(this.villages=e.data.data)}).catch(()=>{})},fetchUser(){this.$axios.get("user-setting/user",{params:{roles:["admin"]}}).then(e=>{200===e.data.code&&(this.users=e.data.data)}).catch(()=>{})},Payment(){const e=new FormData;e.append("payment_method",this.payment_method),e.append("image",this.image),e.append("bcel_reference_number",this.bcel_reference_number),e.append("_method","PUT"),1==this.$refs.form.validate()&&(this.loading=!0,this.$axios.post("pay-invoice/"+this.invoiceItem.id,e).then(e=>{200==e.data.code&&setTimeout(()=>{this.loading=!1,this.closeEditModal(),this.fetchApproveData(),this.$refs.form.reset(),this.$store.commit("Toast_State",{value:!0,color:"success",msg:e.data.message})},300)}).catch(e=>{if(this.loading=!1,this.$store.commit("Toast_State",{value:!0,color:"error",msg:e.response?e.response.data.message:"Something went wrong"}),e.response&&422==e.response.status){const t=e.response.data.errors;for(const[e,a]of Object.entries(t))this.server_errors[e]=a[0]}this.fetchApproveData()}))},viewPage(e){this.$router.push({name:"InvoiceDetail",params:{id:e}})},PaymentPage(e){this.$router.push({name:"Payment",params:{id:e}})}}},M=L,B=(a("7713"),Object(U["a"])(M,F,R,!1,null,null,null)),N=B.exports,E=a("ef9a"),z=a("169a"),G=a("ce7e"),q=a("b974"),H=function(){var e=this,t=e._self._c;return t("div",[t(l["a"],[t(n["a"],[t("p",[e._v(" ລວມບິນ "),t("span",{staticClass:"primary-color"},[e._v("("+e._s(e.pagination.total)+")")])])]),t(n["a"],[t(f["a"],{attrs:{outlined:"",dense:"",items:e.customer_types,"item-text":"display","item-value":"name",label:"ປະເພດລູກຄ້າ"},model:{value:e.selectedCustomerType,callback:function(t){e.selectedCustomerType=t},expression:"selectedCustomerType"}})],1),t(n["a"],[t(f["a"],{attrs:{outlined:"",dense:"",items:e.users,"item-text":"name","item-value":"id",label:"User"},model:{value:e.selectedUser,callback:function(t){e.selectedUser=t},expression:"selectedUser"}})],1),t(n["a"],[t(f["a"],{attrs:{outlined:"",dense:"",items:e.plans,"item-text":"name","item-value":"id",label:"ແຜນເສັ້ນທາງ",multiple:""},model:{value:e.selectedPlan,callback:function(t){e.selectedPlan=t},expression:"selectedPlan"}})],1),t(n["a"],[t(f["a"],{attrs:{outlined:"",dense:"",items:e.districts,"item-text":"name","item-value":"id",label:"ເມືອງ"},model:{value:e.selectedDistrict,callback:function(t){e.selectedDistrict=t},expression:"selectedDistrict"}})],1),t(n["a"],[t(f["a"],{attrs:{outlined:"",dense:"",items:e.villages,"item-text":"name","item-value":"id",label:"ບ້ານ",multiple:""},model:{value:e.selectedVillage,callback:function(t){e.selectedVillage=t},expression:"selectedVillage"}})],1)],1),t("div",[t(_["a"],{attrs:{headers:e.headers,items:e.invoices,"disable-pagination":!0,"hide-default-footer":"","fixed-header":"",height:"100vh"},scopedSlots:e._u([{key:"item.customer",fn:function({item:a}){return[(a.customer.customer_type="company")?t("div",[e._v(" "+e._s(a.customer.company_name)+" ")]):e._e(),t("div",[e._v(e._s(a.customer.name))])]}},{key:"item.total_bag",fn:function({item:a}){return[t(g["a"],{attrs:{color:"success"}},[e._v(" "+e._s(a.total_bag)+" ")])]}},{key:"item.exceed_bag",fn:function({item:a}){return[t(g["a"],{attrs:{color:"error"}},[e._v(" "+e._s(a.exceed_bag)+" ")])]}},{key:"item.exceed_bag_charge",fn:function({item:a}){return[t("div",[e._v(" "+e._s(Intl.NumberFormat().format(a.exceed_bag_charge))+" ")])]}},{key:"item.new_exceed_bag_charge",fn:function({item:a}){return[t("div",{staticClass:"error--text"},[e._v(" "+e._s(Intl.NumberFormat().format(a.new_exceed_bag_charge))+" ")])]}},{key:"item.sub_total",fn:function({item:a}){return[t("div",[e._v(" "+e._s(Intl.NumberFormat().format(a.sub_total))+" ")])]}},{key:"item.total",fn:function({item:a}){return[t("div",[e._v(" "+e._s(Intl.NumberFormat().format(a.total))+" ")])]}},{key:"item.actions",fn:function({item:a}){return[t($["a"],{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(x["a"],e._g(e._b({staticClass:"mr-2",attrs:{color:"primary",dark:"",medium:""}},"v-icon",s,!1),a),[e._v(" mdi-dots-vertical ")])]}}],null,!0)},[t(y["a"],[t(I["a"],{attrs:{link:""}},[t(D["d"],{on:{click:function(t){return e.viewPage(a.id)}}},[t(x["a"],{staticClass:"mr-2",attrs:{small:""}},[e._v(" mdi-eye ")]),e._v(" ລາຍລະອຽດ ")],1)],1),t(I["a"],{attrs:{link:""}},[t(D["d"],{on:{click:function(t){return e.paymentModal(a)}}},[t(x["a"],{attrs:{small:""}},[e._v(" mdi-credit-card ")]),e._v(" ຢືນຢັນການຊຳລະ ")],1)],1)],1)],1)]}}])}),t("br"),[e.pagination.total_pages>1?t("Pagination",{attrs:{pagination:e.pagination,offset:e.offset},on:{paginate:function(t){return e.fetchData()}}}):e._e()]],2),t(z["a"],{attrs:{"max-width":"620px"},model:{value:e.confirmDialog,callback:function(t){e.confirmDialog=t},expression:"confirmDialog"}},[[t(i["a"],[t(r["c"],[t("p",[t(x["a"],{staticClass:"primary-color",attrs:{large:"",color:"success"}},[e._v(" mdi-checkbox-marked-circle-outline ")]),e._v(" ຢືນຢັນການຊຳລະ "),e.editItem.customer?t("span",{staticClass:"primary-color"},[e._v(e._s(e.editItem.customer.name)+" "+e._s(e.editItem.customer.surname))]):e._e()],1)]),t(r["b"],[t(o["a"],[t(b["a"],{ref:"form",attrs:{"lazy-validation":""}},[t(l["a"],[t(n["a"],{attrs:{cols:"12"}},[t(E["a"],{attrs:{column:""},model:{value:e.confirmType,callback:function(t){e.confirmType=t},expression:"confirmType"}},[t(g["a"],{staticClass:"mr-6",attrs:{medium:"",color:"success",label:"",filter:"",outlined:""}},[e._v(" ຢືນຢັນການຊຳລະ "),t(x["a"],{staticClass:"ml-1",attrs:{left:""}},[e._v(" mdi-account-check-outline ")])],1),t(g["a"],{attrs:{medium:"",color:"error",label:"",filter:"",outlined:""}},[e._v(" ຊຳລະບໍຜ່ານ "),t(x["a"],{staticClass:"ml-1",attrs:{left:""}},[e._v(" mdi-account-cancel ")])],1)],1)],1)],1),1==e.confirmType?t("div",[t(l["a"],[t(n["a"],{attrs:{cols:"12"}},[t(q["a"],{attrs:{label:"ເລກລະຫັດການຊຳລະ",outlined:"",dense:"",items:e.rejects,"item-text":"name","item-value":"id"},model:{value:e.reject_reason_id,callback:function(t){e.reject_reason_id=t},expression:"reject_reason_id"}}),t("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.reject_reason_id)+" ")])],1)],1),t(l["a"],[t(n["a"],{attrs:{cols:"12"}},[t(k["a"],{attrs:{label:"Description",outlined:"",dense:"",type:"text"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),t("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.description)+" ")])],1)],1),t(l["a"],[t(G["a"]),t(r["a"],[t(v["a"],{staticClass:"white--text px-12 c-btn",attrs:{color:"blue darken-1",large:"",loading:e.loading,disabled:e.loading},on:{click:function(t){return e.confirmReject()}}},[e._v(" ຢືນຢັນ ")])],1)],1)],1):e._e()],1)],1)],1)],1)]],2)],1)},W=[],K={name:"ConfirmPayment",props:["tab"],data(){return{loading:!1,confirmDialog:!1,offset:12,pagination:{},per_page:20,invoices:[],editItem:{},server_errors:{},description:"",plans:[],selectedPlan:[],districts:[],selectedDistrict:"",villages:[],selectedVillage:[],selectedUser:"",users:[],selectedCustomerType:"home",customer_types:[{name:"home",display:"ຄົວເຮືອນ"},{name:"company",display:"ບໍລິສັດ"}],rejects:[],confirmType:"",selectedStatus:["to_confirm_payment"],headers:[{text:"ລູກຄ້າ",value:"customer"},{text:"ຈຳນວນຖົງ",value:"total_bag",sortable:!1,align:"center"},{text:"ຈຳນວນຖົງເກີນ",value:"exceed_bag",sortable:!1,align:"center"},{text:"ຈຳນວນເງິນ",value:"exceed_bag_charge",sortable:!1},{text:"ໄລ່ເງິນເພີ່ມ",value:"new_exceed_bag_charge",sortable:!1},{text:"ສ່ວນຫຼຸດ",value:"discount"},{text:"SubTotal",value:"sub_total",sortable:!1},{text:"Total",value:"total",sortable:!1},{text:"ປະເພດບິນ",value:"type",sortable:!1},{text:"ປະເພດຊຳລະ",value:"payment_method",sortable:!1},{text:"",value:"actions",sortable:!1}]}},watch:{confirmType(){0==this.confirmType&&this.confirmPayment()},tab(){"tab-3"==this.tab&&this.fetchData()},selectedCustomerType(){this.fetchData()},selectedPlan(){this.fetchData()},selectedVillage(){this.fetchData()},selectedDistrict(){this.fetchVillage(),this.fetchData()},selectedUser(){this.fetchData()}},created(){this.fetchData(),this.fetchUser(),this.fetchRoutePlan(),this.fetchAddress()},methods:{backPrevios(){this.$router.go(-1)},fetchData(){this.$store.commit("Loading_State",!0),this.$axios.get(`plan-month/${this.$route.params.id}/invoice`,{params:Object(P["a"])([{page:this.pagination.current_page},{per_page:this.per_page},{villages:this.selectedVillage},{statuses:this.selectedStatus},{route_plans:this.selectedPlan},{customer_type:this.selectedCustomerType},{user_id:this.selectedUser},{district_id:this.selectedDistrict}])}).then(e=>{200==e.data.code&&(this.$store.commit("Loading_State",!1),this.invoices=e.data.data.data,this.pagination=e.data.data.pagination)}).catch(e=>{this.$store.commit("Loading_State",!1),this.$store.commit("Toast_State",{value:!0,color:"error",msg:e.response?e.response.data.message:"Something went wrong"})})},fetchRoutePlan(){this.$axios.get("route-plan").then(e=>{200==e.data.code&&(this.plans=e.data.data)}).catch(()=>{})},fetchAddress(){this.$axios.get("info/address",{params:{filter:"ນະຄອນຫລວງວຽງຈັນ"}}).then(e=>{200==e.data.code&&(this.address=e.data.data,this.address.map(e=>{this.districts=e.districts}))}).catch(()=>{})},fetchVillage(){this.$axios.get(`info/district/${this.selectedDistrict}/village`).then(e=>{200==e.data.code&&(this.villages=e.data.data)}).catch(()=>{})},fetchReject(){this.$axios.get("reject-reason").then(e=>{200==e.data.code&&(this.$store.commit("Loading_State",!1),this.rejects=e.data.data)}).catch(()=>{})},paymentModal(e){this.editItem=e,this.fetchReject(),this.confirmDialog=!0},closeConfirmModal(){this.confirmDialog=!1},confirmPayment(){this.loading=!0,this.$axios.put("confirm-payment/"+this.editItem.id).then(e=>{200==e.data.code&&setTimeout(()=>{this.loading=!1,this.$store.commit("Toast_State",{value:!0,color:"success",msg:e.data.message}),this.fetchData(),this.closeConfirmModal()},300)}).catch(()=>{this.closeConfirmModal(),this.loading=!1})},confirmReject(){this.loading=!0,this.$axios.put("reject-payment/"+this.editItem.id,{reject_reason_id:this.reject_reason_id,description:this.description}).then(e=>{200==e.data.code&&setTimeout(()=>{this.loading=!1,this.$store.commit("Toast_State",{value:!0,color:"success",msg:e.data.message}),this.fetchData(),this.closeConfirmModal()},300)}).catch(e=>{if(this.loading=!1,this.$store.commit("Toast_State",{value:!0,color:"error",msg:e.response?e.response.data.message:"Something went wrong"}),e.response&&422==e.response.status){const t=e.response.data.errors;for(const[e,a]of Object.entries(t))this.server_errors[e]=a[0]}})},fetchUser(){this.$axios.get("user-setting/user",{params:{roles:["admin"]}}).then(e=>{200===e.data.code&&(this.users=e.data.data)}).catch(()=>{})},viewPage(e){this.$router.push({name:"InvoiceDetail",params:{id:e}})}}},J=K,Y=(a("ca67"),Object(U["a"])(J,H,W,!1,null,null,null)),Q=Y.exports,X=function(){var e=this,t=e._self._c;return t("div",[t(l["a"],[t(n["a"],[t("p",[e._v(" ລວມບິນ "),t("span",{staticClass:"primary-color"},[e._v("("+e._s(e.pagination.total)+")")])])]),t(n["a"],[t(f["a"],{attrs:{outlined:"",dense:"",items:e.customer_types,"item-text":"display","item-value":"name",label:"ປະເພດລູກຄ້າ"},model:{value:e.selectedCustomerType,callback:function(t){e.selectedCustomerType=t},expression:"selectedCustomerType"}})],1),t(n["a"],[t(f["a"],{attrs:{outlined:"",dense:"",items:e.users,"item-text":"name","item-value":"id",label:"User"},model:{value:e.selectedUser,callback:function(t){e.selectedUser=t},expression:"selectedUser"}})],1),t(n["a"],[t(f["a"],{attrs:{outlined:"",dense:"",items:e.plans,"item-text":"name","item-value":"id",label:"ແຜນເສັ້ນທາງ",multiple:""},model:{value:e.selectedPlan,callback:function(t){e.selectedPlan=t},expression:"selectedPlan"}})],1),t(n["a"],[t(f["a"],{attrs:{outlined:"",dense:"",items:e.districts,"item-text":"name","item-value":"id",label:"ເມືອງ"},model:{value:e.selectedDistrict,callback:function(t){e.selectedDistrict=t},expression:"selectedDistrict"}})],1),t(n["a"],[t(f["a"],{attrs:{outlined:"",dense:"",items:e.villages,"item-text":"name","item-value":"id",label:"ບ້ານ",multiple:""},model:{value:e.selectedVillage,callback:function(t){e.selectedVillage=t},expression:"selectedVillage"}})],1)],1),t(l["a"],[t(n["a"],[t(f["a"],{attrs:{outlined:"",dense:"",label:"ເຫດຜົນການຍົກເລີກ",items:e.rejects,"item-text":"name","item-value":"id",multiple:""},model:{value:e.reject_reason_id,callback:function(t){e.reject_reason_id=t},expression:"reject_reason_id"}})],1)],1),t("div",[t(_["a"],{attrs:{headers:e.headers,items:e.invoices,"disable-pagination":!0,"hide-default-footer":"","fixed-header":"",height:"100vh"},scopedSlots:e._u([{key:"item.customer",fn:function({item:a}){return[(a.customer.customer_type="company")?t("div",[e._v(" "+e._s(a.customer.company_name)+" ")]):e._e(),t("div",[e._v(e._s(a.customer.name))])]}},{key:"item.total_bag",fn:function({item:a}){return[t(g["a"],{attrs:{color:"success"}},[e._v(" "+e._s(a.total_bag)+" ")])]}},{key:"item.exceed_bag",fn:function({item:a}){return[t(g["a"],{attrs:{color:"error"}},[e._v(" "+e._s(a.exceed_bag)+" ")])]}},{key:"item.exceed_bag_charge",fn:function({item:a}){return[t("div",[e._v(" "+e._s(Intl.NumberFormat().format(a.exceed_bag_charge))+" ")])]}},{key:"item.new_exceed_bag_charge",fn:function({item:a}){return[t("div",{staticClass:"error--text"},[e._v(" "+e._s(Intl.NumberFormat().format(a.new_exceed_bag_charge))+" ")])]}},{key:"item.sub_total",fn:function({item:a}){return[t("div",[e._v(" "+e._s(Intl.NumberFormat().format(a.sub_total))+" ")])]}},{key:"item.total",fn:function({item:a}){return[t("div",[e._v(" "+e._s(Intl.NumberFormat().format(a.total))+" ")])]}},{key:"item.actions",fn:function({item:a}){return[t($["a"],{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(x["a"],e._g(e._b({staticClass:"mr-2",attrs:{color:"primary",dark:"",medium:""}},"v-icon",s,!1),a),[e._v(" mdi-dots-vertical ")])]}}],null,!0)},[t(y["a"],[t(I["a"],{attrs:{link:""}},[t(D["d"],{on:{click:function(t){return e.viewPage(a.id)}}},[t(x["a"],{attrs:{small:""}},[e._v(" mdi-eye ")]),e._v(" ລາຍລະອຽດ ")],1)],1),t(I["a"],{attrs:{link:""},on:{click:function(t){return e.PaymentPage(a.id)}}},[t(D["d"],[t(x["a"],{attrs:{small:""}},[e._v(" mdi-credit-card ")]),e._v(" ຊຳລະບິນ ")],1)],1)],1)],1)]}}])}),t("br"),[e.pagination.total_pages>1?t("Pagination",{attrs:{pagination:e.pagination,offset:e.offset},on:{paginate:function(t){return e.fetchData()}}}):e._e()]],2)],1)},Z=[],ee={name:"Reject",props:["tab"],data(){return{loading:!1,offset:12,pagination:{},per_page:20,invoices:[],selectedStatus:["rejected"],reject_reason_id:[],rejects:[],plans:[],selectedPlan:[],districts:[],selectedDistrict:"",villages:[],selectedVillage:[],selectedUser:"",users:[],selectedCustomerType:"home",customer_types:[{name:"home",display:"ຄົວເຮືອນ"},{name:"company",display:"ບໍລິສັດ"}],headers:[{text:"InvoiceId",value:"invoice_id"},{text:"ລູກຄ້າ",value:"customer"},{text:"ຈຳນວນຖົງ",value:"total_bag",sortable:!1,align:"center"},{text:"ຈຳນວນຖົງເກີນ",value:"exceed_bag",sortable:!1,align:"center"},{text:"ຈຳນວນເງິນ",value:"exceed_bag_charge",sortable:!1},{text:"ໄລ່ເງິນເພີ່ມ",value:"new_exceed_bag_charge",sortable:!1},{text:"ສ່ວນຫຼຸດ",value:"discount"},{text:"SubTotal",value:"sub_total",sortable:!1},{text:"Total",value:"total",sortable:!1},{text:"ປະເພດບິນ",value:"type",sortable:!1},{text:"",value:"actions",sortable:!1}]}},watch:{tab(){"tab-4"==this.tab&&this.fetchData()},selectedCustomerType(){this.fetchData()},selectedPlan(){this.fetchData()},selectedVillage(){this.fetchData()},selectedDistrict(){this.fetchVillage(),this.fetchData()},reject_reason_id(){this.fetchData()},selectedUser(){this.fetchData()}},created(){this.fetchUser(),this.fetchData(),this.fetchRoutePlan(),this.fetchAddress(),this.fetchReject()},methods:{backPrevios(){this.$router.go(-1)},fetchData(){this.$store.commit("Loading_State",!0),this.$axios.get(`plan-month/${this.$route.params.id}/invoice`,{params:Object(P["a"])([{page:this.pagination.current_page},{per_page:this.per_page},{villages:this.selectedVillage},{statuses:this.selectedStatus},{route_plans:this.selectedPlan},{customer_type:this.selectedCustomerType},{reject_reasons:this.reject_reason_id},{user_id:this.selectedUser},{district_id:this.selectedDistrict}])}).then(e=>{200==e.data.code&&(this.$store.commit("Loading_State",!1),this.invoices=e.data.data.data,this.pagination=e.data.data.pagination)}).catch(e=>{this.$store.commit("Loading_State",!1),this.$store.commit("Toast_State",{value:!0,color:"error",msg:e.response?e.response.data.message:"Something went wrong"})})},fetchReject(){this.$axios.get("reject-reason").then(e=>{200==e.data.code&&(this.$store.commit("Loading_State",!1),this.rejects=e.data.data)}).catch(()=>{})},fetchRoutePlan(){this.$axios.get("route-plan").then(e=>{200==e.data.code&&(this.plans=e.data.data)}).catch(()=>{})},fetchAddress(){this.$axios.get("info/address",{params:{filter:"ນະຄອນຫລວງວຽງຈັນ"}}).then(e=>{200==e.data.code&&(this.address=e.data.data,this.address.map(e=>{this.districts=e.districts}))}).catch(()=>{})},PaymentPage(e){this.$router.push({name:"Payment",params:{id:e}})},fetchVillage(){this.$axios.get(`info/district/${this.selectedDistrict}/village`).then(e=>{200==e.data.code&&(this.villages=e.data.data)}).catch(()=>{})},viewPage(e){this.$router.push({name:"InvoiceDetail",params:{id:e}})},fetchUser(){this.$axios.get("user-setting/user",{params:{roles:["admin"]}}).then(e=>{200===e.data.code&&(this.users=e.data.data)}).catch(()=>{})}}},te=ee,ae=(a("462d"),Object(U["a"])(te,X,Z,!1,null,null,null)),se=ae.exports,ie=function(){var e=this,t=e._self._c;return t("div",[t(l["a"],[t(n["a"],[t("p",[e._v(" ລວມບິນ "),t("span",{staticClass:"primary-color"},[e._v("("+e._s(e.pagination.total)+")")])])]),t(n["a"],[t(f["a"],{attrs:{outlined:"",dense:"",items:e.customer_types,"item-text":"display","item-value":"name",label:"ປະເພດລູກຄ້າ"},model:{value:e.selectedCustomerType,callback:function(t){e.selectedCustomerType=t},expression:"selectedCustomerType"}})],1),t(n["a"],[t(f["a"],{attrs:{outlined:"",dense:"",items:e.users,"item-text":"name","item-value":"id",label:"User"},model:{value:e.selectedUser,callback:function(t){e.selectedUser=t},expression:"selectedUser"}})],1),t(n["a"],[t(f["a"],{attrs:{outlined:"",dense:"",items:e.plans,"item-text":"name","item-value":"id",label:"ແຜນເສັ້ນທາງ",multiple:""},model:{value:e.selectedPlan,callback:function(t){e.selectedPlan=t},expression:"selectedPlan"}})],1),t(n["a"],[t(f["a"],{attrs:{outlined:"",dense:"",items:e.districts,"item-text":"name","item-value":"id",label:"ເມືອງ"},model:{value:e.selectedDistrict,callback:function(t){e.selectedDistrict=t},expression:"selectedDistrict"}})],1),t(n["a"],[t(f["a"],{attrs:{outlined:"",dense:"",items:e.villages,"item-text":"name","item-value":"id",label:"ບ້ານ",multiple:""},model:{value:e.selectedVillage,callback:function(t){e.selectedVillage=t},expression:"selectedVillage"}})],1)],1),t("div",[t(_["a"],{attrs:{headers:e.headers,items:e.invoices,"disable-pagination":!0,"hide-default-footer":"","fixed-header":"",height:"100vh"},scopedSlots:e._u([{key:"item.customer",fn:function({item:a}){return[(a.customer.customer_type="company")?t("div",[e._v(" "+e._s(a.customer.company_name)+" ")]):e._e(),t("div",[e._v(e._s(a.customer.name))])]}},{key:"item.total_bag",fn:function({item:a}){return[t(g["a"],{attrs:{color:"success"}},[e._v(" "+e._s(a.total_bag)+" ")])]}},{key:"item.exceed_bag",fn:function({item:a}){return[t(g["a"],{attrs:{color:"error"}},[e._v(" "+e._s(a.exceed_bag)+" ")])]}},{key:"item.exceed_bag_charge",fn:function({item:a}){return[t("div",[e._v(" "+e._s(Intl.NumberFormat().format(a.exceed_bag_charge))+" ")])]}},{key:"item.new_exceed_bag_charge",fn:function({item:a}){return[t("div",{staticClass:"error--text"},[e._v(" "+e._s(Intl.NumberFormat().format(a.new_exceed_bag_charge))+" ")])]}},{key:"item.sub_total",fn:function({item:a}){return[t("div",[e._v(" "+e._s(Intl.NumberFormat().format(a.sub_total))+" ")])]}},{key:"item.total",fn:function({item:a}){return[t("div",[e._v(" "+e._s(Intl.NumberFormat().format(a.total))+" ")])]}},{key:"item.actions",fn:function({item:a}){return[t(x["a"],{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.viewPage(a.id)}}},[e._v(" mdi-eye ")])]}}])}),t("br"),[e.pagination.total_pages>1?t("Pagination",{attrs:{pagination:e.pagination,offset:e.offset},on:{paginate:function(t){return e.fetchData()}}}):e._e()]],2)],1)},re=[],ne={name:"SuccessPayment",props:["tab"],data(){return{loading:!1,offset:12,pagination:{},per_page:20,invoices:[],selectedStatus:["success"],plans:[],selectedPlan:[],districts:[],selectedDistrict:"",villages:[],selectedVillage:[],selectedUser:"",users:[],selectedCustomerType:"home",customer_types:[{name:"home",display:"ຄົວເຮືອນ"},{name:"company",display:"ບໍລິສັດ"}],headers:[{text:"InvoiceId",value:"invoice_id"},{text:"ລູກຄ້າ",value:"customer"},{text:"ຈຳນວນຖົງ",value:"total_bag",sortable:!1,align:"center"},{text:"ຈຳນວນຖົງເກີນ",value:"exceed_bag",sortable:!1,align:"center"},{text:"ຈຳນວນເງິນ",value:"exceed_bag_charge",sortable:!1},{text:"ໄລ່ເງິນເພີ່ມ",value:"new_exceed_bag_charge",sortable:!1},{text:"ສ່ວນຫຼຸດ",value:"discount"},{text:"SubTotal",value:"sub_total",sortable:!1},{text:"Total",value:"total",sortable:!1},{text:"ປະເພດຊຳລະ",value:"payment_method",sortable:!1},{text:"ປະເພດບິນ",value:"type",sortable:!1},{text:"",value:"actions",sortable:!1}]}},watch:{tab(){"tab-5"==this.tab&&this.fetchData()},selectedCustomerType(){this.fetchData()},selectedPlan(){this.fetchData()},selectedVillage(){this.fetchData()},selectedDistrict(){this.fetchVillage(),this.fetchData()},selectedUser(){this.fetchData()}},created(){this.fetchUser(),this.fetchData(),this.fetchRoutePlan(),this.fetchAddress()},methods:{fetchData(){this.$store.commit("Loading_State",!0),this.$axios.get(`plan-month/${this.$route.params.id}/invoice`,{params:Object(P["a"])([{page:this.pagination.current_page},{per_page:this.per_page},{villages:this.selectedVillage},{statuses:this.selectedStatus},{route_plans:this.selectedPlan},{customer_type:this.selectedCustomerType},{user_id:this.selectedUser},{district_id:this.selectedDistrict}])}).then(e=>{200==e.data.code&&(this.$store.commit("Loading_State",!1),this.invoices=e.data.data.data,this.pagination=e.data.data.pagination)}).catch(e=>{this.$store.commit("Loading_State",!1),this.$store.commit("Toast_State",{value:!0,color:"error",msg:e.response?e.response.data.message:"Something went wrong"})})},fetchRoutePlan(){this.$axios.get("route-plan").then(e=>{200==e.data.code&&(this.plans=e.data.data)}).catch(()=>{})},fetchAddress(){this.$axios.get("info/address",{params:{filter:"ນະຄອນຫລວງວຽງຈັນ"}}).then(e=>{200==e.data.code&&(this.address=e.data.data,this.address.map(e=>{this.districts=e.districts}))}).catch(()=>{})},fetchVillage(){this.$axios.get(`info/district/${this.selectedDistrict}/village`).then(e=>{200==e.data.code&&(this.villages=e.data.data)}).catch(()=>{})},viewPage(e){this.$router.push({name:"InvoiceDetail",params:{id:e}})},fetchUser(){this.$axios.get("user-setting/user",{params:{roles:["admin"]}}).then(e=>{200===e.data.code&&(this.users=e.data.data)}).catch(()=>{})}}},oe=ne,le=(a("68ba"),Object(U["a"])(oe,ie,re,!1,null,null,null)),ce=le.exports,de={title(){return"Vientiane Waste Co-Dev|Invoice"},components:{allInvoice:A,approvedInvoice:N,confirmPayment:Q,reject:se,success:ce},data(){return{tab:null,plan_month:[]}},watch:{tab(e){"tab-1"==e?this.$router.push({name:"InvoiceTab",query:{tab:"invoice-all"}}).catch(()=>{}):"tab-2"==e?this.$router.push({name:"InvoiceTab",query:{tab:"invoice-approved"}}).catch(()=>{}):"tab-3"==e?this.$router.push({name:"InvoiceTab",query:{tab:"invoice-confirm-payment"}}).catch(()=>{}):"tab-4"==e?this.$router.push({name:"InvoiceTab",query:{tab:"invoice-reject"}}).catch(()=>{}):"tab-5"==e&&this.$router.push({name:"InvoiceTab",query:{tab:"invoice-success"}}).catch(()=>{})}},created(){this.fetchPlanMonth(),"invoice-all"==this.$route.query.tab?this.tab="tab-1":"invoice-approved"==this.$route.query.tab?this.tab="tab-2":"invoice-confirm-payment"==this.$route.query.tab?this.tab="tab-3":"invoice-reject"==this.$route.query.tab?this.tab="tab-4":"invoice-success"==this.$route.query.tab&&(this.tab="tab-5")},methods:{fetchPlanMonth(){this.$axios.get("plan-month/"+this.$route.params.id).then(e=>{200==e.data.code&&(this.plan_month=e.data.data)}).catch(e=>{if(e.response&&422==e.response.status){const t=e.response.data.errors;for(const[e,a]of Object.entries(t))this.server_errors[e]=a[0]}})}}},he=de,ue=Object(U["a"])(he,m,p,!1,null,null,null);t["default"]=ue.exports},4140:function(e,t,a){"use strict";a("b9a7")},"462d":function(e,t,a){"use strict";a("9f00")},"4bd4":function(e,t,a){"use strict";a("14d9");var s=a("58df"),i=a("7e2b"),r=a("3206");t["a"]=Object(s["a"])(i["a"],Object(r["b"])("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(e){const t=Object.values(e).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput(e){const t=e=>e.$watch("hasError",t=>{this.$set(this.errorBag,e._uid,t)},{immediate:!0}),a={_uid:e._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?a.shouldValidate=e.$watch("shouldValidate",s=>{s&&(this.errorBag.hasOwnProperty(e._uid)||(a.valid=t(e)))}):a.valid=t(e),a},validate(){return 0===this.inputs.filter(e=>!e.validate(!0)).length},reset(){this.inputs.forEach(e=>e.reset()),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout(()=>{this.errorBag={}},0)},resetValidation(){this.inputs.forEach(e=>e.resetValidation()),this.resetErrorBag()},register(e){this.inputs.push(e),this.watchers.push(this.watchInput(e))},unregister(e){const t=this.inputs.find(t=>t._uid===e._uid);if(!t)return;const a=this.watchers.find(e=>e._uid===t._uid);a&&(a.valid(),a.shouldValidate()),this.watchers=this.watchers.filter(e=>e._uid!==t._uid),this.inputs=this.inputs.filter(e=>e._uid!==t._uid),this.$delete(this.errorBag,t._uid)}},render(e){return e("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:e=>this.$emit("submit",e)}},this.$slots.default)}})},"54da":function(e,t,a){"use strict";t["a"]=function(e){const t={};if(!e[0]){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(void 0!==e[t]&&null!==e[t]&&""!==e[t]||delete e[t]);return e}for(const a of e)1==Object.keys(a).length&&a[Object.keys(a)]&&(t[Object.keys(a)]=a[Object.keys(a)]);return t}},"68ba":function(e,t,a){"use strict";a("22d2")},6955:function(e,t,a){},"6eceb":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));const s=e=>{""!==e.search?""!==e.oldVal?e.oldVal!==e.search&&(e.oldVal=e.search,e.pagination.current_page=1,e.fetchData()):(""!==e.search&&(e.pagination.current_page=1,e.fetchData()),e.oldVal=e.search):e.oldVal=""}},7713:function(e,t,a){"use strict";a("6955")},"8f5a":function(e,t,a){},"9f00":function(e,t,a){},b9a7:function(e,t,a){},c671:function(e,t,a){"use strict";var s=a("1e6c");t["a"]=s["a"].extend({name:"v-tab-item",props:{id:String},methods:{genWindowItem(){const e=s["a"].options.methods.genWindowItem.call(this);return e.data.domProps=e.data.domProps||{},e.data.domProps.id=this.id||this.value,e}}})},c6a6:function(e,t,a){"use strict";a("2bfd");var s=a("b974"),i=a("8654"),r=a("d9f7"),n=a("80d2");const o={...s["b"],offsetY:!0,offsetOverflow:!0,transition:!1};t["a"]=s["a"].extend({name:"v-autocomplete",props:{autoSelectFirst:{type:Boolean,default:!1},filter:{type:Function,default:(e,t,a)=>a.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1},hideNoData:Boolean,menuProps:{type:s["a"].options.props.menuProps.type,default:()=>o},noFilter:Boolean,searchInput:{type:String}},data(){return{lazySearch:this.searchInput}},computed:{classes(){return{...s["a"].options.computed.classes.call(this),"v-autocomplete":!0,"v-autocomplete--is-selecting-index":this.selectedIndex>-1}},computedItems(){return this.filteredItems},selectedValues(){return this.selectedItems.map(e=>this.getValue(e))},hasDisplayedItems(){return this.hideSelected?this.filteredItems.some(e=>!this.hasItem(e)):this.filteredItems.length>0},currentRange(){return null==this.selectedItem?0:String(this.getText(this.selectedItem)).length},filteredItems(){return!this.isSearching||this.noFilter||null==this.internalSearch?this.allItems:this.allItems.filter(e=>{const t=Object(n["r"])(e,this.itemText),a=null!=t?String(t):"";return this.filter(e,String(this.internalSearch),a)})},internalSearch:{get(){return this.lazySearch},set(e){this.lazySearch!==e&&(this.lazySearch=e,this.$emit("update:search-input",e))}},isAnyValueAllowed(){return!1},isDirty(){return this.searchIsDirty||this.selectedItems.length>0},isSearching(){return this.multiple&&this.searchIsDirty||this.searchIsDirty&&this.internalSearch!==this.getText(this.selectedItem)},menuCanShow(){return!!this.isFocused&&(this.hasDisplayedItems||!this.hideNoData)},$_menuProps(){const e=s["a"].options.computed.$_menuProps.call(this);return e.contentClass=("v-autocomplete__content "+(e.contentClass||"")).trim(),{...o,...e}},searchIsDirty(){return null!=this.internalSearch&&""!==this.internalSearch},selectedItem(){return this.multiple?null:this.selectedItems.find(e=>this.valueComparator(this.getValue(e),this.getValue(this.internalValue)))},listData(){const e=s["a"].options.computed.listData.call(this);return e.props={...e.props,items:this.virtualizedItems,noFilter:this.noFilter||!this.isSearching||!this.filteredItems.length,searchInput:this.internalSearch},e}},watch:{filteredItems:"onFilteredItemsChanged",internalValue:"setSearch",isFocused(e){e?(document.addEventListener("copy",this.onCopy),this.$refs.input&&this.$refs.input.select()):(document.removeEventListener("copy",this.onCopy),this.blur(),this.updateSelf())},isMenuActive(e){!e&&this.hasSlot&&(this.lazySearch=null)},items(e,t){t&&t.length||!this.hideNoData||!this.isFocused||this.isMenuActive||!e.length||this.activateMenu()},searchInput(e){this.lazySearch=e},internalSearch:"onInternalSearchChanged",itemText:"updateSelf"},created(){this.setSearch()},destroyed(){document.removeEventListener("copy",this.onCopy)},methods:{onFilteredItemsChanged(e,t){if(e!==t){if(!this.autoSelectFirst){const a=t[this.$refs.menu.listIndex];a?this.setMenuIndex(e.findIndex(e=>e===a)):this.setMenuIndex(-1),this.$emit("update:list-index",this.$refs.menu.listIndex)}this.$nextTick(()=>{this.internalSearch&&(1===e.length||this.autoSelectFirst)&&(this.$refs.menu.getTiles(),this.autoSelectFirst&&e.length&&(this.setMenuIndex(0),this.$emit("update:list-index",this.$refs.menu.listIndex)))})}},onInternalSearchChanged(){this.updateMenuDimensions()},updateMenuDimensions(){this.isMenuActive&&this.$refs.menu&&this.$refs.menu.updateDimensions()},changeSelectedIndex(e){this.searchIsDirty||(this.multiple&&e===n["y"].left?-1===this.selectedIndex?this.selectedIndex=this.selectedItems.length-1:this.selectedIndex--:this.multiple&&e===n["y"].right?this.selectedIndex>=this.selectedItems.length-1?this.selectedIndex=-1:this.selectedIndex++:e!==n["y"].backspace&&e!==n["y"].delete||this.deleteCurrentItem())},deleteCurrentItem(){const e=this.selectedIndex,t=this.selectedItems[e];if(!this.isInteractive||this.getDisabled(t))return;const a=this.selectedItems.length-1;if(-1===this.selectedIndex&&0!==a)return void(this.selectedIndex=a);const s=this.selectedItems.length,i=e!==s-1?e:e-1,r=this.selectedItems[i];r?this.selectItem(t):this.setValue(this.multiple?[]:null),this.selectedIndex=i},clearableCallback(){this.internalSearch=null,s["a"].options.methods.clearableCallback.call(this)},genInput(){const e=i["a"].options.methods.genInput.call(this);return e.data=Object(r["a"])(e.data,{attrs:{"aria-activedescendant":Object(n["p"])(this.$refs.menu,"activeTile.id"),autocomplete:Object(n["p"])(e.data,"attrs.autocomplete","off")},domProps:{value:this.internalSearch}}),e},genInputSlot(){const e=s["a"].options.methods.genInputSlot.call(this);return e.data.attrs.role="combobox",e},genSelections(){return this.hasSlot||this.multiple?s["a"].options.methods.genSelections.call(this):[]},onClick(e){this.isInteractive&&(this.selectedIndex>-1?this.selectedIndex=-1:this.onFocus(),this.isAppendInner(e.target)||this.activateMenu())},onInput(e){if(this.selectedIndex>-1||!e.target)return;const t=e.target,a=t.value;t.value&&this.activateMenu(),this.multiple||""!==a||this.deleteCurrentItem(),this.internalSearch=a,this.badInput=t.validity&&t.validity.badInput},onKeyDown(e){const t=e.keyCode;!e.ctrlKey&&[n["y"].home,n["y"].end].includes(t)||s["a"].options.methods.onKeyDown.call(this,e),this.changeSelectedIndex(t)},onSpaceDown(e){},onTabDown(e){s["a"].options.methods.onTabDown.call(this,e),this.updateSelf()},onUpDown(e){e.preventDefault(),this.activateMenu()},selectItem(e){s["a"].options.methods.selectItem.call(this,e),this.setSearch()},setSelectedItems(){s["a"].options.methods.setSelectedItems.call(this),this.isFocused||this.setSearch()},setSearch(){this.$nextTick(()=>{this.multiple&&this.internalSearch&&this.isMenuActive||(this.internalSearch=!this.selectedItems.length||this.multiple||this.hasSlot?null:this.getText(this.selectedItem))})},updateSelf(){(this.searchIsDirty||this.internalValue)&&(this.multiple||this.valueComparator(this.internalSearch,this.getValue(this.internalValue))||this.setSearch())},hasItem(e){return this.selectedValues.indexOf(this.getValue(e))>-1},onCopy(e){var t,a;if(-1===this.selectedIndex)return;const s=this.selectedItems[this.selectedIndex],i=this.getText(s);null===(t=e.clipboardData)||void 0===t||t.setData("text/plain",i),null===(a=e.clipboardData)||void 0===a||a.setData("text/vnd.vuetify.autocomplete.item+plain",i),e.preventDefault()}}})},ca67:function(e,t,a){"use strict";a("cd8f")},cd8f:function(e,t,a){},ef9a:function(e,t,a){"use strict";a("8f5a");var s=a("7efd"),i=a("a9ad"),r=a("58df");t["a"]=Object(r["a"])(s["a"],i["a"]).extend({name:"v-chip-group",provide(){return{chipGroup:this}},props:{column:Boolean},computed:{classes(){return{...s["a"].options.computed.classes.call(this),"v-chip-group":!0,"v-chip-group--column":this.column}}},watch:{column(e){e&&(this.scrollOffset=0),this.$nextTick(this.onResize)}},methods:{genData(){return this.setTextColor(this.color,{...s["a"].options.methods.genData.call(this)})}}})}}]);
//# sourceMappingURL=chunk-0fd60cca.8c6ef5e2.js.map