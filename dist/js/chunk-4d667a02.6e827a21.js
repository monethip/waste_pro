(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d667a02"],{"0110":function(e,t,a){},"4bd4":function(e,t,a){"use strict";a("14d9");var s=a("58df"),i=a("7e2b"),r=a("3206");t["a"]=Object(s["a"])(i["a"],Object(r["b"])("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(e){const t=Object.values(e).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput(e){const t=e=>e.$watch("hasError",t=>{this.$set(this.errorBag,e._uid,t)},{immediate:!0}),a={_uid:e._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?a.shouldValidate=e.$watch("shouldValidate",s=>{s&&(this.errorBag.hasOwnProperty(e._uid)||(a.valid=t(e)))}):a.valid=t(e),a},validate(){return 0===this.inputs.filter(e=>!e.validate(!0)).length},reset(){this.inputs.forEach(e=>e.reset()),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout(()=>{this.errorBag={}},0)},resetValidation(){this.inputs.forEach(e=>e.resetValidation()),this.resetErrorBag()},register(e){this.inputs.push(e),this.watchers.push(this.watchInput(e))},unregister(e){const t=this.inputs.find(t=>t._uid===e._uid);if(!t)return;const a=this.watchers.find(e=>e._uid===t._uid);a&&(a.valid(),a.shouldValidate()),this.watchers=this.watchers.filter(e=>e._uid!==t._uid),this.inputs=this.inputs.filter(e=>e._uid!==t._uid),this.$delete(this.errorBag,t._uid)}},render(e){return e("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:e=>this.$emit("submit",e)}},this.$slots.default)}})},"6ca7":function(e,t,a){},"6eceb":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));const s=e=>{""!==e.search?""!==e.oldVal?e.oldVal!==e.search&&(e.oldVal=e.search,e.pagination.current_page=1,e.fetchData()):(""!==e.search&&(e.pagination.current_page=1,e.fetchData()),e.oldVal=e.search):e.oldVal=""}},"759d":function(e,t,a){"use strict";a.r(t);var s=a("8212"),i=a("8336"),r=a("b0af"),n=a("99d9"),o=a("ac7c"),l=a("62ad"),c=a("a523"),d=a("8fea"),u=a("ce7e"),h=a("4bd4"),m=a("132d"),p=a("0fd9"),f=a("2fa4"),_=a("8654"),g=function(){var e=this,t=e._self._c;return t(c["a"],[t(p["a"],{staticClass:"mb-n6"},[t(l["a"],[t(i["a"],{staticClass:"btn-primary",on:{click:function(t){return e.openAddModal()}}},[t(m["a"],[e._v("mdi-plus")])],1)],1)],1),t(p["a"],{attrs:{justify:"center"}},[t(l["a"],[t(r["a"],{staticClass:"pa-2"},[t(n["c"],[e._v(" ຂໍ້ມູນແອກລົດ ("+e._s(e.pagination.total)+") "),t(u["a"],{staticClass:"mx-4",attrs:{vertical:""}}),t(f["a"]),t(o["a"],{staticClass:"my-auto",scopedSlots:e._u([{key:"label",fn:function(){return[t("div",[e._v("ມີທີມ")])]},proxy:!0}]),model:{value:e.has_team_member,callback:function(t){e.has_team_member=t},expression:"has_team_member"}}),t(f["a"]),t(_["a"],{attrs:{outlined:"",dense:"",clearable:"","prepend-inner-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.Search()}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),t(d["a"],{attrs:{headers:e.headers,items:e.data,search:e.search,"disable-pagination":!0,"hide-default-footer":""},scopedSlots:e._u([{key:"item.media",fn:function({item:a}){return e._l(a.media,(function(a,i){return t(s["a"],{key:i,attrs:{size:"36px"}},[a.url?t("img",{attrs:{src:a.url}}):e._e()])}))}},{key:"item.actions",fn:function({item:a}){return[t(m["a"],{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.OpenModalEdit(a)}}},[e._v(" mdi-pencil ")]),t(m["a"],{attrs:{small:""},on:{click:function(t){return e.deleteItem(a.id)}}},[e._v(" mdi-delete ")])]}}])}),t("br"),[e.pagination.total_pages>1?t("Pagination",{attrs:{pagination:e.pagination,offset:e.offset},on:{paginate:function(t){return e.fetchData()}}}):e._e()]],2)],1)],1),t("ModalAdd",[[t(r["a"],[t(n["c"],[t("p",[e._v("ເພີ່ມແອກລົດ")])]),t(n["b"],[t(c["a"],[t(h["a"],{ref:"form",attrs:{"lazy-validation":""}},[t(p["a"],[t(l["a"],{attrs:{align:"center"}},[t("div",{staticClass:"field"},[t("div",{staticClass:"file is-large is-boxed"},[t("label",{staticClass:"file-label"},[t("input",{ref:"image",staticClass:"file-input input-file-image",attrs:{type:"file",name:"image",accept:"image/*"},on:{change:e.onFileChange}}),t("span",{staticClass:"file-cta"},[t("span",{staticClass:"file-icon"},[t(m["a"],{staticClass:"fas fa-cloud-upload",staticStyle:{"font-size":"60px !important",color:"#719aff",cursor:"pointer"}},[e._v("mdi-cloud-upload")])],1),t("span",{staticClass:"file-label",staticStyle:{"margin-top":"10px","text-transform":"uppercase","padding-top":"20px"}},[e._v("Choose Profile")])])])])])])],1),t(p["a"],[e.imageUrl?t(l["a"],{staticClass:"mt-5",attrs:{align:"center"}},[t(s["a"],{staticClass:"avatar rounded",attrs:{size:"94px"}},[t("img",{attrs:{src:e.imageUrl,alt:""}})])],1):e._e()],1),t(p["a"],[t(l["a"],{attrs:{cols:"12"}},[t(_["a"],{attrs:{label:"Card Id *",required:""},model:{value:e.user.card_id,callback:function(t){e.$set(e.user,"card_id",t)},expression:"user.card_id"}}),t("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.card_id)+" ")])],1),t(l["a"],{attrs:{cols:"12"}},[t(_["a"],{attrs:{label:"Name *",required:"",rules:e.nameRules},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}}),t("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.name)+" ")])],1),t(l["a"],{attrs:{cols:"12"}},[t(_["a"],{attrs:{label:"Surname *",required:"",rules:e.nameRules},model:{value:e.user.surname,callback:function(t){e.$set(e.user,"surname",t)},expression:"user.surname"}}),t("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.surname)+" ")])],1),t(l["a"],{attrs:{cols:"12"}},[t(_["a"],{staticClass:"input-number",attrs:{label:"ເບີໂທ *",required:"",rules:e.phoneRules,type:"number"},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}}),t("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.phone)+" ")])],1)],1)],1)],1),t(n["a"],[t(f["a"]),t(i["a"],{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.closeAddModal()}}},[e._v(" ຍົກເລີກ ")]),t(i["a"],{attrs:{color:"blue darken-1",text:"",loading:e.loading,disabled:e.loading},on:{click:function(t){return e.AddItem()}}},[e._v(" ບັນທຶກ ")])],1)],1)],1)]],2),t("ModalEdit",{scopedSlots:e._u([{key:"default",fn:function(){return[t(r["a"],[t(n["c"],[t("p",[e._v("ແກ້ໄຂແອກລົດ")])]),t(n["b"],[t(c["a"],[t(h["a"],{ref:"form",attrs:{"lazy-validation":""}},[t(p["a"],[t(l["a"],{attrs:{align:"center"}},[t("div",{staticClass:"field"},[t("div",{staticClass:"file is-large is-boxed"},[t("label",{staticClass:"file-label"},[t("input",{staticClass:"file-input input-file-image",attrs:{type:"file",accept:"image/*"},on:{change:e.onFileChange}}),t("span",{staticClass:"file-cta"},[t("span",{staticClass:"file-icon"},[t(m["a"],{staticClass:"fas fa-cloud-upload",staticStyle:{"font-size":"60px !important",color:"#719aff",cursor:"pointer"}},[e._v("mdi-cloud-upload")])],1),t("span",{staticClass:"file-label",staticStyle:{"margin-top":"10px","text-transform":"uppercase","padding-top":"20px"}},[e._v("Choose Profile")])])])])])])],1),t(p["a"],[e.imageUrl?t(l["a"],{staticClass:"mt-5",attrs:{align:"center"}},[t(s["a"],{staticClass:"avatar rounded",attrs:{size:"94px"}},[t("img",{attrs:{src:e.imageUrl,alt:""}})])],1):t(l["a"],{staticClass:"mt-5",attrs:{align:"center"}},e._l(e.edit_user.media,(function(e,a){return t(s["a"],{key:a,staticClass:"avatar rounded mr-6",attrs:{size:"94px"}},[t("img",{attrs:{src:e.url}})])})),1)],1),t(p["a"],[t(l["a"],{attrs:{cols:"12"}},[t(_["a"],{attrs:{label:"Card Id *",required:""},model:{value:e.edit_user.card_id,callback:function(t){e.$set(e.edit_user,"card_id",t)},expression:"edit_user.card_id"}}),t("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.card_id)+" ")])],1),t(l["a"],{attrs:{cols:"12"}},[t(_["a"],{attrs:{label:"Name *",required:"",rules:e.nameRules},model:{value:e.edit_user.name,callback:function(t){e.$set(e.edit_user,"name",t)},expression:"edit_user.name"}}),t("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.name)+" ")])],1),t(l["a"],{attrs:{cols:"12"}},[t(_["a"],{attrs:{label:"Surname *",required:"",rules:e.nameRules},model:{value:e.edit_user.surname,callback:function(t){e.$set(e.edit_user,"surname",t)},expression:"edit_user.surname"}}),t("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.surname)+" ")])],1),t(l["a"],{attrs:{cols:"12"}},[t(_["a"],{staticClass:"input-number",attrs:{label:"ເບີໂທ *",required:"",rules:e.phoneRules,type:"number"},model:{value:e.edit_user.phone,callback:function(t){e.$set(e.edit_user,"phone",t)},expression:"edit_user.phone"}}),t("p",{staticClass:"errors"},[e._v(" "+e._s(e.server_errors.phone)+" ")])],1)],1)],1)],1),t(n["a"],[t(f["a"]),t(i["a"],{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.closeUpdateModal()}}},[e._v(" Close ")]),t(i["a"],{attrs:{color:"blue darken-1",text:"",loading:e.loading,disabled:e.loading},on:{click:function(t){return e.updateItem()}}},[e._v(" Update ")])],1)],1)],1)]},proxy:!0}])}),t("ModalDelete",[[t(n["a"],[t(f["a"]),t(i["a"],{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v(" Cancel ")]),t(i["a"],{attrs:{color:"blue darken-1",text:"",loading:e.loading,disabled:e.loading},on:{click:e.deleteItemConfirm}},[e._v(" OK ")]),t(f["a"])],1)]],2)],1)},v=[],b=a("6eceb"),C={name:"User",title(){return"Vientiane Waste Co-Dev|Employee"},data(){return{headers:[{text:"ລະຫັດ",value:"card_id"},{text:"ຊື່",value:"name"},{text:"ນາມສະກຸນ",value:"surname"},{text:"ເບີໂທ",value:"phone",sortable:!1},{text:"Profile",value:"media",sortable:!1},{text:"",value:"actions",sortable:!1}],loading:!1,status:!1,data:[],user:{},edit_user:{},userID:"",server_errors:{email:"",roleId:""},errormsg:"",image:"",imageUrl:"",offset:12,pagination:{},per_page:100,search:"",oldVal:"",vehicle:[],selectedVehicle:"",has_team_member:!1,statuses:[{id:1,name:"active"},{id:1,name:"inactive"}],emailRules:[e=>!!e||"E-mail is required",e=>/.+@.+\..+/.test(e)||"E-mail must be valid"],nameRules:[e=>!!e||"Name is required",e=>e&&e.length>=2||"Name must be less than 2 characters"],phoneRules:[e=>!!e||"Phone is required",e=>e&&e.length>=6&&e.length<=8||"Phone number must be  6 - 8 numbers"]}},watch:{selectedStatus(){this.fetchData()},"user.card_id":function(){this.server_errors.card_id=""},"user.name":function(){this.server_errors.name=""},"user.surname":function(){this.server_errors.surname=""},"user.phone":function(){this.server_errors.phone=""},"edit_user.name":function(){this.server_errors.name=""},"edit_user.surname":function(){this.server_errors.surname=""},"edit_user.phone":function(){this.server_errors.phone=""},has_team_member(){this.fetchData()},search(e){""==e&&this.fetchData()}},created(){this.fetchData()},methods:{onFileChange(e){const t=e.target,a=e.target.files[0];this.image=t.files[0],this.imageUrl=URL.createObjectURL(a)},openAddModal(){this.$store.commit("modalAdd_State",!0)},AddItem(){const e=new FormData;e.append("card_id",this.user.card_id),e.append("name",this.user.name),e.append("surname",this.user.surname),e.append("phone",this.user.phone),e.append("image",this.image),1==this.$refs.form.validate()&&(this.$store.commit("Loading_State",!0),this.$axios.post("employee",e,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{200==e.data.code&&setTimeout(()=>{this.$store.commit("Loading_State",!1),this.closeAddModal(),this.user={},this.imageUrl="",this.imageUrl="",this.fetchData(),this.reset(),this.$store.commit("Toast_State",{value:!0,color:"success",msg:e.data.message})},300)}).catch(e=>{if(this.$store.commit("Loading_State",!1),this.$store.commit("Toast_State",{value:!0,color:"error",msg:e.response?e.response.data.message:"Something went wrong"}),e.response&&422==e.response.status){const t=e.response.data.errors;for(const[e,a]of Object.entries(t))this.server_errors[e]=a[0]}}))},fetchData(){this.$store.commit("Loading_State",!0),this.$axios.get("employee",{params:{page:this.pagination.current_page,per_page:this.per_page,filter:this.search,has_team_member:this.has_team_member}}).then(e=>{200==e.data.code&&(this.$store.commit("Loading_State",!1),this.$store.commit("Loading_State",!1),this.data=e.data.data.data,this.pagination=e.data.data.pagination,this.data.map(e=>{"active"==e.status?this.status=!0:this.status=!1}))}).catch(e=>{if(this.$store.commit("Loading_State",!1),e.response&&422==e.response.status){const t=e.response.data.errors;for(const[e,a]of Object.entries(t))this.server_errors[e]=a[0]}})},closeAddModal(){this.$store.commit("modalAdd_State",!1)},OpenModalEdit(e){this.edit_user=e,this.$store.commit("modalEdit_State",!0)},updateItem(){const e=new FormData;e.append("card_id",this.user.card_id),e.append("name",this.edit_user.name),e.append("surname",this.edit_user.surname),e.append("phone",this.edit_user.phone),e.append("image",this.image),e.append("_method","PUT"),1==this.$refs.form.validate()&&(this.$store.commit("Loading_State",!0),this.$axios.post("employee/"+this.edit_user.id,e,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{200==e.data.code&&setTimeout(()=>{this.$store.commit("Loading_State",!1),this.closeUpdateModal(),this.imageUrl="",this.imageUrl="",this.fetchData(),this.reset(),this.$store.commit("Toast_State",{value:!0,color:"success",msg:e.data.message})},300)}).catch(e=>{if(this.$store.commit("Loading_State",!1),this.$store.commit("Toast_State",{value:!0,color:"error",msg:e.response?e.response.data.message:"Something went wrong"}),e.response&&422==e.response.status){const t=e.response.data.errors;for(const[e,a]of Object.entries(t))this.server_errors[e]=a[0]}}))},closeUpdateModal(){this.$store.commit("modalEdit_State",!1)},closeDelete(){this.$store.commit("modalDelete_State",!1)},deleteItem(e){this.userID=e,this.$store.commit("modalDelete_State",!0)},deleteItemConfirm(){this.$store.commit("Loading_State",!0),this.$axios.delete("employee/"+this.userID).then(e=>{200==e.data.code&&setTimeout(()=>{this.$store.commit("Loading_State",!1),this.$store.commit("modalDelete_State",!1),this.fetchData(),this.$store.commit("Toast_State",{value:!0,color:"success",msg:e.data.message})},300)}).catch(e=>{this.fetchData(),this.$store.commit("Toast_State",{value:!0,color:"error",msg:e.response?e.response.data.message:"Something went wrong"}),this.$store.commit("modalDelete_State",!1),this.$store.commit("Loading_State",!1)})},reset(){this.$refs.form.reset()},Search(){Object(b["a"])(this)}}},$=C,x=(a("9d9c"),a("2877")),k=Object(x["a"])($,g,v,!1,null,null,null);t["default"]=k.exports},"9d9c":function(e,t,a){"use strict";a("0110")},ac7c:function(e,t,a){"use strict";a("6ca7"),a("ec29");var s=a("9d26"),i=a("c37a"),r=a("fe09");t["a"]=r["a"].extend({name:"v-checkbox",props:{indeterminate:Boolean,indeterminateIcon:{type:String,default:"$checkboxIndeterminate"},offIcon:{type:String,default:"$checkboxOff"},onIcon:{type:String,default:"$checkboxOn"}},data(){return{inputIndeterminate:this.indeterminate}},computed:{classes(){return{...i["a"].options.computed.classes.call(this),"v-input--selection-controls":!0,"v-input--checkbox":!0,"v-input--indeterminate":this.inputIndeterminate}},computedIcon(){return this.inputIndeterminate?this.indeterminateIcon:this.isActive?this.onIcon:this.offIcon},validationState(){if(!this.isDisabled||this.inputIndeterminate)return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0}},watch:{indeterminate(e){this.$nextTick(()=>this.inputIndeterminate=e)},inputIndeterminate(e){this.$emit("update:indeterminate",e)},isActive(){this.indeterminate&&(this.inputIndeterminate=!1)}},methods:{genCheckbox(){const{title:e,...t}=this.attrs$;return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(s["a"],this.setTextColor(this.validationState,{props:{dense:this.dense,dark:this.dark,light:this.light}}),this.computedIcon),this.genInput("checkbox",{...t,"aria-checked":this.inputIndeterminate?"mixed":this.isActive.toString()}),this.genRipple(this.setTextColor(this.rippleState))])},genDefaultSlot(){return[this.genCheckbox(),this.genLabel()]}}})},ec29:function(e,t,a){},fe09:function(e,t,a){"use strict";a("14d9");var s=a("c37a"),i=a("5607"),r=a("2b0e"),n=r["a"].extend({name:"rippleable",directives:{ripple:i["a"]},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple(e={}){return this.ripple?(e.staticClass="v-input--selection-controls__ripple",e.directives=e.directives||[],e.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",e)):null}}}),o=a("8547"),l=a("58df");function c(e){e.preventDefault()}t["a"]=Object(l["a"])(s["a"],n,o["a"]).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive(){const e=this.value,t=this.internalValue;return this.isMultiple?!!Array.isArray(t)&&t.some(t=>this.valueComparator(t,e)):void 0===this.trueValue||void 0===this.falseValue?e?this.valueComparator(e,t):Boolean(t):this.valueComparator(t,this.trueValue)},isDirty(){return this.isActive},rippleState(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue(e){this.lazyValue=e,this.hasColor=e}},methods:{genLabel(){const e=s["a"].options.methods.genLabel.call(this);return e?(e.data.on={click:c},e):e},genInput(e,t){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:e,type:e},t),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:c},ref:"input"})},onClick(e){this.onChange(),this.$emit("click",e)},onChange(){if(!this.isInteractive)return;const e=this.value;let t=this.internalValue;if(this.isMultiple){Array.isArray(t)||(t=[]);const a=t.length;t=t.filter(t=>!this.valueComparator(t,e)),t.length===a&&t.push(e)}else t=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(t,this.trueValue)?this.falseValue:this.trueValue:e?this.valueComparator(t,e)?null:e:!t;this.validate(!0,t),this.internalValue=t,this.hasColor=t},onFocus(e){this.isFocused=!0,this.$emit("focus",e)},onBlur(e){this.isFocused=!1,this.$emit("blur",e)},onKeydown(e){}}})}}]);
//# sourceMappingURL=chunk-4d667a02.6e827a21.js.map