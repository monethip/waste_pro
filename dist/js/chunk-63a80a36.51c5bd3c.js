(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63a80a36"],{"1e6c":function(t,e,a){"use strict";var n=a("9d65"),o=a("4e82"),i=a("c3f0"),s=a("80d2"),r=a("58df"),c=Object(r["a"])(n["a"],Object(o["a"])("windowGroup","v-window-item","v-window"));e["a"]=c.extend().extend().extend({name:"v-window-item",directives:{Touch:i["a"]},props:{disabled:Boolean,reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},value:{required:!1}},data:function(){return{isActive:!1,inTransition:!1}},computed:{classes:function(){return this.groupClasses},computedTransition:function(){return this.windowGroup.internalReverse?"undefined"!==typeof this.reverseTransition?this.reverseTransition||"":this.windowGroup.computedTransition:"undefined"!==typeof this.transition?this.transition||"":this.windowGroup.computedTransition}},methods:{genDefaultSlot:function(){return this.$slots.default},genWindowItem:function(){return this.$createElement("div",{staticClass:"v-window-item",class:this.classes,directives:[{name:"show",value:this.isActive}],on:this.$listeners},this.genDefaultSlot())},onAfterTransition:function(){this.inTransition&&(this.inTransition=!1,this.windowGroup.transitionCount>0&&(this.windowGroup.transitionCount--,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=void 0)))},onBeforeTransition:function(){this.inTransition||(this.inTransition=!0,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=Object(s["g"])(this.windowGroup.$el.clientHeight)),this.windowGroup.transitionCount++)},onTransitionCancelled:function(){this.onAfterTransition()},onEnter:function(t){var e=this;this.inTransition&&this.$nextTick((function(){e.computedTransition&&e.inTransition&&(e.windowGroup.transitionHeight=Object(s["g"])(t.clientHeight))}))}},render:function(t){var e=this;return t("transition",{props:{name:this.computedTransition},on:{beforeEnter:this.onBeforeTransition,afterEnter:this.onAfterTransition,enterCancelled:this.onTransitionCancelled,beforeLeave:this.onBeforeTransition,afterLeave:this.onAfterTransition,leaveCancelled:this.onTransitionCancelled,enter:this.onEnter}},this.showLazyContent((function(){return[e.genWindowItem()]})))}})},"33d6":function(t,e,a){"use strict";a("d466")},"5cceb":function(t,e,a){"use strict";a("ee65")},"6eceb":function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));a("ac1f"),a("841c");var n=function(t){""!==t.search?""!==t.oldVal?t.oldVal!==t.search&&(t.oldVal=t.search,t.pagination.current_page=1,t.fetchData()):(""!==t.search&&(t.pagination.current_page=1,t.fetchData()),t.oldVal=t.search):t.oldVal=""}},ab17:function(t,e,a){"use strict";a("f951")},c671:function(t,e,a){"use strict";var n=a("1e6c");e["a"]=n["a"].extend({name:"v-tab-item",props:{id:String},methods:{genWindowItem:function(){var t=n["a"].options.methods.genWindowItem.call(this);return t.data.domProps=t.data.domProps||{},t.data.domProps.id=this.id||this.value,t}}})},d466:function(t,e,a){},e21c5:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-breadcrumbs",{staticClass:"pt-0",attrs:{large:""}},[t._v("ລາຍງານຂໍ້ມູນບິນ")]),a("v-row",{staticClass:"mb-n6"},[a("v-col",[a("v-btn",{staticClass:"btn-primary",on:{click:function(e){return t.exportData()}}},[t._v("Export ")])],1),a("v-col",[a("v-select",{attrs:{outlined:"",dense:"",items:t.duration,"item-text":"name","item-value":"duration",label:"ຊ່ວງເວລາ"},model:{value:t.selectedDuration,callback:function(e){t.selectedDuration=e},expression:"selectedDuration"}})],1),"year"==t.selectedDuration?a("v-col",[a("section",[a("date-picker",{staticStyle:{height:"40px"},attrs:{type:"year",placeholder:"ເລີ່ມປີ"},model:{value:t.year_from,callback:function(e){t.year_from=e},expression:"year_from"}})],1)]):t._e(),"year"==t.selectedDuration?a("v-col",[a("section",[a("date-picker",{attrs:{type:"year",placeholder:"ຫາປີ"},model:{value:t.year_to,callback:function(e){t.year_to=e},expression:"year_to"}})],1)]):t._e(),"month"==t.selectedDuration?a("v-col",[a("section",[a("date-picker",{attrs:{type:"month",placeholder:"ເລີ່ມເດືອນ"},model:{value:t.month_from,callback:function(e){t.month_from=e},expression:"month_from"}})],1)]):t._e(),"month"==t.selectedDuration?a("v-col",[a("section",[a("date-picker",{attrs:{type:"month",placeholder:"ຫາເດືອນ"},model:{value:t.month_to,callback:function(e){t.month_to=e},expression:"month_to"}})],1)]):t._e(),a("v-col",[a("v-text-field",{attrs:{outlined:"",dense:"",clearable:"","prepend-inner-icon":"mdi-magnify",label:"ຊື່ລູກຄ້າ,ເລກບິນ",type:"text"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.Search()}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1),a("v-card",{attrs:{elevation:"1"}},[a("v-card-text",[a("v-tabs",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab",{attrs:{href:"#tab-1"}},[t._v(" ຄົວເຮືອນ ")]),a("v-tab",{attrs:{href:"#tab-2"}},[t._v(" ບໍລິສັດ ")])],1),a("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",{attrs:{value:"tab-1"}},[a("HomeInvoice",{attrs:{tab:t.tab}})],1)],1),a("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",{attrs:{value:"tab-2"}},[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("CompanyInvoice",{attrs:{tab:t.tab}})],1)],1)],1)],1)],1)],1)],1)},o=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("div",[t._l(t.summary,(function(e,n){return a("v-row",{key:n},[a("v-col",[a("h3",[t._v("ປີ "+t._s(e.year))])]),a("v-col",[a("p",[t._v(" ສ້າງບິນ "),a("span",{staticClass:"success--text"},[t._v(t._s(Intl.NumberFormat().format(e.home.total_created)))])])]),a("v-col",[a("p",[t._v(" ອະນຸມັດ "),a("span",{staticClass:"success--text"},[t._v(t._s(Intl.NumberFormat().format(e.home.total_approved)))])])]),a("v-col",[a("p",[t._v(" ຍົກເລີກ "),a("span",{staticClass:"success--text"},[t._v(t._s(Intl.NumberFormat().format(e.home.total_rejected)))])])]),a("v-col",[a("p",[t._v(" ຊຳລະສຳເລັດ "),a("span",{staticClass:"success--text"},[t._v(t._s(Intl.NumberFormat().format(e.home.total_to_confirm_payment)))])])]),a("v-col",[a("p",[t._v(" ສຳເລັດທັງໝົດ "),a("span",{staticClass:"success--text"},[t._v(t._s(Intl.NumberFormat().format(e.home.total_success)))])])]),a("v-col",[a("p",[t._v(" ລວມ "),a("span",{staticClass:"success--text"},[t._v(t._s(Intl.NumberFormat().format(e.home.sum_total))+" ")])])])],1)})),a("v-data-table",{attrs:{headers:t.headers,items:t.invoices,search:t.search,"disable-pagination":!0,"hide-default-footer":""},scopedSlots:t._u([{key:"item.sub_total",fn:function(e){var n=e.item;return[a("div",[t._v(" "+t._s(Intl.NumberFormat().format(n.sub_total))+" ")])]}},{key:"item.total",fn:function(e){var n=e.item;return[a("div",[t._v(" "+t._s(Intl.NumberFormat().format(n.total))+" ")])]}},{key:"item.status",fn:function(e){var n=e.item;return[a("v-chip",{attrs:{label:"",color:t.statusColor(n.status)}},[t._v(t._s(n.status))])]}},{key:"item.created_at",fn:function(e){var n=e.item;return[a("div",[a("span",[t._v(t._s(t.moment(n.created_at).format("DD-MM-YY")))])])]}}])}),a("br"),[t.pagination.total_pages>1?a("Pagination",{attrs:{pagination:t.pagination,offset:t.offset},on:{paginate:function(e){return t.fetchData()}}}):t._e()]],2)])},s=[],r=a("6eceb"),c=a("c1df"),u=a.n(c),l={title:function(){return"Vientiane Waste Co-Dev|Report Invoice"},data:function(){return{tab:"tab-1",customers:[],loading:!1,customerId:"",year_from:"",year_to:"",month_from:"",month_to:"",offset:12,pagination:{},per_page:15,search:"",oldVal:"",invoices:[],summary:{},selectedDuration:"year",duration:[{name:"ປີ",duration:"year"},{name:"ເດືອນ",duration:"month"}],invoiceType:"home"}},methods:{fetchData:function(){var t=this,e=new FormData;e.append("page",this.pagination.current_page),e.append("per_page",this.per_page),e.append("type",this.invoiceType),e.append("duration",this.selectedDuration),""!==this.year_from&&""!==this.year_to&&"year"==this.selectedDuration&&(e.append("year_from",this.moment(this.year_from).format("YYYY")),e.append("year_to",this.moment(this.year_to).format("YYYY"))),""!==this.month_from&&""!==this.month_to&&"month"==this.selectedDuration&&(e.append("month_from",this.moment(this.month_from).format("YYYY-MM")),e.append("month_to",this.moment(this.month_to).format("YYYY-MM"))),this.$store.commit("Loading_State",!0),this.$axios.post("report-invoice",e).then((function(e){200==e.data.code&&setTimeout((function(){t.$store.commit("Loading_State",!1),t.invoices=e.data.data.details.data,t.summary=e.data.data.summary,t.pagination=e.data.data.details.pagination}),300)})).catch((function(e){t.$store.commit("Loading_State",!1),t.$store.commit("Toast_State",{value:!0,color:"error",msg:e.response.data.message})}))},exportData:function(){var t=this,e=new FormData;e.append("type",this.invoiceType),e.append("duration",this.selectedDuration),e.append("download",1),""!==this.year_from&&""!==this.year_to&&"year"==this.selectedDuration&&(e.append("year_from",this.moment(this.year_from).format("YYYY")),e.append("year_to",this.moment(this.year_to).format("YYYY"))),""!==this.month_from&&""!==this.month_to&&"month"==this.selectedDuration&&(e.append("month_from",this.moment(this.month_from).format("YYYY-MM")),e.append("month_to",this.moment(this.month_to).format("YYYY-MM"))),this.loading=!0,this.$axios.post("report-invoice",e).then((function(e){200==e.status&&(null!=e.data.data.download_link&&window.open(e.data.data.download_link),t.loading=!1)})).catch((function(e){t.$store.commit("Toast_State",{value:!0,color:"error",msg:e.response.data.message}),t.loading=!1}))},editPage:function(t){this.$router.push({name:"InvoiceDetail",params:{id:t}})},viewPage:function(t){this.$router.push({name:"InvoiceDetail",params:{id:t}})},Search:function(){Object(r["a"])(this)}},watch:{selectedDuration:function(){this.pagination.current_page="",this.fetchData()},search:function(t){this.pagination.current_page="",""==t&&this.fetchData()},year_from:function(t){var e=u()(t).format("YYYY"),a=u()(this.year_to).format("YYYY");this.pagination.current_page="",""!==e&&""!==a&&e>a&&(this.year_from=""),this.fetchData()},year_to:function(t){var e=u()(t).format("YYYY"),a=u()(this.year_from).format("YYYY");this.pagination.current_page="",""!==e&&""!==a&&e<a&&(this.year_to=""),this.fetchData()},month_from:function(t){var e=u()(t).format("YYYY-MM"),a=u()(this.month_to).format("YYYY-MM");""!==e&&""!==a&&e>a&&(this.month_from=""),this.pagination.current_page="",this.fetchData()},month_to:function(t){var e=u()(this.month_from).format("YYYY-MM"),a=u()(t).format("YYYY-MM");this.pagination.current_page="",""!==e&&""!==a&&a<e&&(this.month_to=""),this.pagination.current_page="",this.fetchData()},tab:function(t){"tab-1"==t?(this.fetchData(),this.invoiceType="home",this.$router.push({name:"Report-Invoice",query:{tab:"home"}}).catch((function(){}))):"tab-2"==t&&(this.fetchData(),this.invoiceType="company",this.$router.push({name:"Report-Invoice",query:{tab:"company"}}).catch((function(){})))}},created:function(){"home"==this.$route.query.tab?(this.tab="tab-1",this.invoiceType="home",this.fetchData()):"company"==this.$route.query.tab&&(this.tab="tab-2",this.invoiceType="company",this.fetchData()),this.pagination=[]}},m={mixins:[l],name:"HomeInvoice",title:function(){return"Vientiane Waste Co-Dev|Report Invoice"},data:function(){return{customers:[],loading:!1,customerId:"",offset:12,pagination:{},per_page:100,search:"",oldVal:"",headers:[{text:"Invoice Id",value:"invoice_id",sortable:!1},{text:"ວັນທີ",value:"month",sortable:!1},{text:"ລູກຄ້າ",value:"full_name"},{text:"ຈຳນວນເກັບ",value:"total_time",sortable:!1},{text:"ຈຳນວນຖົງ",value:"total_bag",sortable:!1},{text:"ສ່ວນຫຼຸດ",value:"discount"},{text:"SubTotal",value:"sub_total",sortable:!1},{text:"Total",value:"total",sortable:!1},{text:"ສະຖານະ",value:"status",sortable:!1},{text:"Type",value:"type",sortable:!1}]}},methods:{Search:function(){Object(r["a"])(this)},statusColor:function(t){return"success"==t?"success":"pending"==t?"primary":"info"}},watch:{tab:function(){this.tab}},created:function(){this.fetchData()}},h=m,d=(a("ab17"),a("2877")),p=a("6544"),f=a.n(p),v=a("cc20"),_=a("62ad"),b=a("a523"),y=a("8fea"),g=a("0fd9"),Y=Object(d["a"])(h,i,s,!1,null,null,null),x=Y.exports;f()(Y,{VChip:v["a"],VCol:_["a"],VContainer:b["a"],VDataTable:y["a"],VRow:g["a"]});var w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("div",[t._l(t.summary,(function(e,n){return a("v-row",{key:n},[a("v-col",[a("h3",[t._v("ປີ "+t._s(e.year))])]),a("v-col",[e.company?a("p",[t._v(" ສ້າງບິນ "),a("span",{staticClass:"success--text"},[t._v(t._s(Intl.NumberFormat().format(e.company.total_created)))])]):t._e()]),a("v-col",[e.company?a("p",[t._v(" ອະນຸມັດ "),a("span",{staticClass:"success--text"},[t._v(t._s(Intl.NumberFormat().format(e.company.total_approved)))])]):t._e()]),a("v-col",[e.company?a("p",[t._v(" ຍົກເລີກ "),a("span",{staticClass:"success--text"},[t._v(t._s(Intl.NumberFormat().format(e.company.total_rejected)))])]):t._e()]),a("v-col",[e.company?a("p",[t._v(" ຊຳລະສຳເລັດ "),a("span",{staticClass:"success--text"},[t._v(t._s(Intl.NumberFormat().format(e.company.total_to_confirm_payment)))])]):t._e()]),a("v-col",[e.company?a("p",[t._v(" ສຳເລັດທັງໝົດ "),a("span",{staticClass:"success--text"},[t._v(t._s(Intl.NumberFormat().format(e.company.total_success)))])]):t._e()]),a("v-col",[e.company?a("p",[t._v(" ລວມ "),a("span",{staticClass:"success--text"},[t._v(t._s(Intl.NumberFormat().format(e.company.sum_total)))])]):t._e()])],1)})),a("v-data-table",{attrs:{headers:t.headers,items:t.invoices,search:t.search,"disable-pagination":!0,"hide-default-footer":""},scopedSlots:t._u([{key:"item.sub_total",fn:function(e){var n=e.item;return[a("div",[t._v(" "+t._s(Intl.NumberFormat().format(n.sub_total))+" ")])]}},{key:"item.total",fn:function(e){var n=e.item;return[a("div",[t._v(" "+t._s(Intl.NumberFormat().format(n.total))+" ")])]}},{key:"item.status",fn:function(e){var n=e.item;return[a("v-chip",{attrs:{label:"",color:t.statusColor(n.status)}},[t._v(t._s(n.status))])]}},{key:"item.created_at",fn:function(e){var n=e.item;return[a("div",[a("span",[t._v(t._s(t.moment(n.created_at).format("DD-MM-YY")))])])]}}])}),a("br"),[t.pagination.total_pages>1?a("Pagination",{attrs:{pagination:t.pagination,offset:t.offset},on:{paginate:function(e){return t.fetchData()}}}):t._e()]],2)])},C=[],T={mixins:[l],title:function(){return"Vientiane Waste Co-Dev|Report Invoice"},data:function(){return{customers:[],loading:!1,customerId:"",offset:12,pagination:{},per_page:100,search:"",oldVal:"",headers:[{text:"Invoice Id",value:"invoice_id",sortable:!1},{text:"ວັນທີ",value:"month",sortable:!1},{text:"ລູກຄ້າ",value:"company_name"},{text:"ຈຳນວນເກັບ",value:"total_time",sortable:!1},{text:"ຈຳນວນ Container",value:"total_container",sortable:!1,align:"center"},{text:"ຈຳນວນຄັ້ງ",value:"total_time",sortable:!1,align:"center"},{text:"ສ່ວນຫຼຸດ",value:"discount"},{text:"SubTotal",value:"sub_total",sortable:!1},{text:"Total",value:"total",sortable:!1},{text:"ສະຖານະ",value:"status",sortable:!1},{text:"Type",value:"type",sortable:!1}]}},methods:{Search:function(){Object(r["a"])(this)},statusColor:function(t){return"success"==t?"success":"pending"==t?"primary":"info"}},watch:{tab:function(){this.tab}},created:function(){}},D=T,I=(a("5cceb"),Object(d["a"])(D,w,C,!1,null,null,null)),k=I.exports;f()(I,{VChip:v["a"],VCol:_["a"],VContainer:b["a"],VDataTable:y["a"],VRow:g["a"]});var V={title:function(){return"Vientiane Waste Co-Dev|Calendar"},mixins:[l],components:{HomeInvoice:x,CompanyInvoice:k},data:function(){return{data:{}}},methods:{backPrevios:function(){this.$router.go(-1)}},watch:{}},$=V,M=(a("33d6"),a("2bc5")),S=a("8336"),F=a("b0af"),N=a("99d9"),G=a("b974"),j=a("71a3"),O=a("c671"),E=a("fe57"),R=a("aac8"),B=a("8654"),H=Object(d["a"])($,n,o,!1,null,null,null);e["default"]=H.exports;f()(H,{VBreadcrumbs:M["a"],VBtn:S["a"],VCard:F["a"],VCardText:N["b"],VCol:_["a"],VContainer:b["a"],VRow:g["a"],VSelect:G["a"],VTab:j["a"],VTabItem:O["a"],VTabs:E["a"],VTabsItems:R["a"],VTextField:B["a"]})},ee65:function(t,e,a){},f951:function(t,e,a){}}]);
//# sourceMappingURL=chunk-63a80a36.51c5bd3c.js.map