{"version":3,"sources":["webpack:///./src/views/report/TabCollectionTab/homeInvoice.vue?0d27","webpack:///./src/Helpers/GetValue.js","webpack:///./src/views/report/TabCollectionTab/homeInvoice.vue","webpack:///./src/views/report/TabCollectionTab/invoiceEvent.js","webpack:///src/views/report/TabCollectionTab/homeInvoice.vue","webpack:///./src/views/report/TabCollectionTab/homeInvoice.vue?c637","webpack:///./src/views/report/TabCollectionTab/homeInvoice.vue?b574"],"names":["GetOldValueOnInput","context","search","oldVal","pagination","current_page","fetchData","staticClass","exportData","_vm","duration","callback","expression","selectedDuration","staticStyle","attrs","value","year_from","model","month_from","selectedCollectionStatus","selectedPaymentStatus","key","index","_v","NumberFormat","_s","format","pending_total","_c","headers","invoices","scopedSlots","_u","fn","item","staticRenderFns","title","data","tab","customers","loading","customerId","year_to","month_to","offset","per_page","summary","name","invoiceType","collectionStatus","id","dis_play","paymentStatus","methods","FormData","append","this","moment","map","$store","commit","$axios","post","then","res","code","setTimeout","details","catch","error","color","msg","response","message","status","download_link","window","open","editPage","$router","push","params","viewPage","Search","watch","query","created","$route","mixins","invoice","text","sortable","statusColor","paymentStatusText","component"],"mappings":"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","file":"js/chunk-47753694.c9afcdb4.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./homeInvoice.vue?vue&type=style&index=0&id=62371ed4&prod&lang=scss&\"","export const GetOldValueOnInput = (context) => {\n  if (context.search !== '') {\n    if (context.oldVal !== '') {\n      if (context.oldVal !== context.search) {\n        context.oldVal = context.search;\n        context.pagination.current_page = 1;\n        context.fetchData();\n      }\n    } else {\n      if (context.search !== '') {\n        context.pagination.current_page = 1;\n        context.fetchData();\n      }\n      context.oldVal = context.search;\n    }\n  } else {\n    context.oldVal = '';\n  }\n};\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-container',[_c('v-breadcrumbs',{staticClass:\"pt-0\",attrs:{\"large\":\"\"}},[_vm._v(\" ລາຍງານຂໍ້ມູນບິນເກັບຂີ້ເຫື້ຍອພິເສດ \")]),_c('v-row',{staticClass:\"mb-n6\"},[_c('v-col',[_c('v-btn',{staticClass:\"btn-primary\",on:{\"click\":function($event){return _vm.exportData()}}},[_vm._v(\" Export \")])],1),_c('v-col',[_c('v-select',{attrs:{\"outlined\":\"\",\"dense\":\"\",\"items\":_vm.duration,\"item-text\":\"name\",\"item-value\":\"duration\",\"label\":\"ຊ່ວງເວລາ\"},model:{value:(_vm.selectedDuration),callback:function ($$v) {_vm.selectedDuration=$$v},expression:\"selectedDuration\"}})],1),(_vm.selectedDuration == 'year')?_c('v-col',[_c('section',[_c('date-picker',{staticStyle:{\"height\":\"40px\"},attrs:{\"type\":\"year\",\"placeholder\":\"ເລີ່ມປີ\"},model:{value:(_vm.year_from),callback:function ($$v) {_vm.year_from=$$v},expression:\"year_from\"}})],1)]):_vm._e(),(_vm.selectedDuration == 'year')?_c('v-col',[_c('section',[_c('date-picker',{attrs:{\"type\":\"year\",\"placeholder\":\"ຫາປີ\"},model:{value:(_vm.year_to),callback:function ($$v) {_vm.year_to=$$v},expression:\"year_to\"}})],1)]):_vm._e(),(_vm.selectedDuration == 'month')?_c('v-col',[_c('section',[_c('date-picker',{attrs:{\"type\":\"month\",\"placeholder\":\"ເລີ່ມເດືອນ\"},model:{value:(_vm.month_from),callback:function ($$v) {_vm.month_from=$$v},expression:\"month_from\"}})],1)]):_vm._e(),(_vm.selectedDuration == 'month')?_c('v-col',[_c('section',[_c('date-picker',{attrs:{\"type\":\"month\",\"placeholder\":\"ຫາເດືອນ\"},model:{value:(_vm.month_to),callback:function ($$v) {_vm.month_to=$$v},expression:\"month_to\"}})],1)]):_vm._e()],1),_c('v-row',[_c('v-col',{attrs:{\"cols\":\"\"}},[_c('v-select',{attrs:{\"outlined\":\"\",\"dense\":\"\",\"items\":_vm.collectionStatus,\"item-text\":\"dis_play\",\"item-value\":\"name\",\"label\":\"ສະຖານະບໍລິການ\",\"multiple\":\"\",\"clearable\":\"\"},model:{value:(_vm.selectedCollectionStatus),callback:function ($$v) {_vm.selectedCollectionStatus=$$v},expression:\"selectedCollectionStatus\"}})],1),_c('v-col',{attrs:{\"col\":\"\"}},[_c('v-select',{attrs:{\"outlined\":\"\",\"dense\":\"\",\"items\":_vm.paymentStatus,\"item-text\":\"dis_play\",\"item-value\":\"name\",\"label\":\"ສະຖານະການຊຳລະ\",\"multiple\":\"\",\"clearable\":\"\"},model:{value:(_vm.selectedPaymentStatus),callback:function ($$v) {_vm.selectedPaymentStatus=$$v},expression:\"selectedPaymentStatus\"}})],1)],1),_c('div',[_vm._l((_vm.summary),function(sum,index){return _c('v-row',{key:index},[_c('v-col',[(sum.year)?_c('p',[_vm._v(\" ປີ \"+_vm._s(sum.year)+\" \")]):_vm._e(),(sum.month)?_c('p',[_vm._v(\" ເດືອນ \"+_vm._s(sum.month)+\" \")]):_vm._e()]),_c('v-col',[_c('p',[_vm._v(\" ຍອດທີ່ປະຕິເສດ \"),_c('span',{staticClass:\"success--text\"},[_vm._v(_vm._s(Intl.NumberFormat().format(sum.rejected_total)))])])]),_c('v-col',[_c('p',[_vm._v(\" ຍອດທີ່ຈ່າຍແລ້ວ(ລໍຖ້າການຢືນຢັນ) \"),_c('span',{staticClass:\"success--text\"},[_vm._v(_vm._s(Intl.NumberFormat().format(sum.to_confirm_payment_total)))])])]),_c('v-col',[_c('p',[_vm._v(\" ຍອດທີ່ຈ່າຍແລ້ວ \"),_c('span',{staticClass:\"success--text\"},[_vm._v(_vm._s(Intl.NumberFormat().format(sum.success_total)))])])]),_c('v-col',[_c('p',[_vm._v(\" ຍອດທີ່ຍັງບໍ່ຈ່າຍ \"),_c('span',{staticClass:\"success--text\"},[_vm._v(_vm._s(Intl.NumberFormat().format(sum.pending_total))+\" \")])])])],1)}),_c('v-card',[_c('v-card-text',[_c('v-data-table',{attrs:{\"headers\":_vm.headers,\"items\":_vm.invoices,\"search\":_vm.search,\"disable-pagination\":true,\"hide-default-footer\":\"\"},scopedSlots:_vm._u([{key:\"item.sub_total\",fn:function({ item }){return [_c('div',[_vm._v(\" \"+_vm._s(Intl.NumberFormat().format(item.sub_total))+\" \")])]}},{key:\"item.total\",fn:function({ item }){return [_c('div',[_vm._v(\" \"+_vm._s(Intl.NumberFormat().format(item.total))+\" \")])]}},{key:\"item.status\",fn:function({ item }){return [_c('v-chip',{attrs:{\"label\":\"\",\"color\":_vm.statusColor(item.payment_status)}},[_vm._v(\" \"+_vm._s(_vm.paymentStatusText(item.payment_status))+\" \")])]}},{key:\"item.created_at\",fn:function({ item }){return [_c('div',[_c('span',[_vm._v(_vm._s(_vm.moment(item.created_at).format(\"DD-MM-YY\")))])])]}}])})],1)],1),_c('br'),[(_vm.pagination.total_pages > 1)?_c('Pagination',{attrs:{\"pagination\":_vm.pagination,\"offset\":_vm.offset},on:{\"paginate\":function($event){return _vm.fetchData()}}}):_vm._e()]],2)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { GetOldValueOnInput } from '@/Helpers/GetValue';\nimport moment from 'moment';\n\nexport default {\n  title() {\n    return `Vientiane Waste Co-Dev|Report Invoice`;\n  },\n  data() {\n    return {\n      tab: 'tab-1',\n      customers: [],\n      loading: false,\n      customerId: '',\n      // Year\n      year_from: '',\n      year_to: '',\n      // Month\n      month_from: '',\n      month_to: '',\n      // Pagination\n      offset: 12,\n      pagination: {},\n      per_page: 15,\n      search: '',\n      oldVal: '',\n      invoices: [],\n      summary: {},\n      // companyInvoices: [],\n      // companySummary: {},\n      selectedDuration: 'year',\n      duration: [\n        {\n          name: 'ປີ',\n          duration: 'year',\n        },\n        {\n          name: 'ເດືອນ',\n          duration: 'month',\n        },\n      ],\n      invoiceType: 'home',\n\n      selectedCollectionStatus: [],\n      collectionStatus: [\n        {\n          id: 1,\n          name: 'requested',\n          dis_play: 'ຮ້ອງຂໍເກັບຂີ້ເຫື້ຍອ',\n        },\n        {\n          id: 2,\n          name: 'rejected',\n          dis_play: 'ປະຕິເສດເກັບຂີ້ເຫື້ຍອ',\n        },\n        {\n          id: 3,\n          name: 'approved',\n          dis_play: 'ອະນຸມັດເກັບຂີ້ເຫື້ຍອ',\n\n        },\n        {\n          id: 4,\n          name: 'collected',\n          dis_play: 'ເກັບຂີເຫື້ຍອສຳເລັດ',\n        },\n        {\n          id: 5,\n          name: 'collect_confirm',\n          dis_play: 'ລູກຄ້າຢືນຢັນການເກັບ',\n        },\n        {\n          id: 5,\n          name: 'collect_reject',\n          dis_play: 'ການເກັບຖືກປະຕິເສດ',\n        },\n      ],\n      selectedPaymentStatus: [],\n      paymentStatus: [\n        {\n          id: 1,\n          name: 'pending',\n          dis_play: 'ລໍຖ້າເກັບເງິນ',\n        },\n        {\n          id: 2,\n          name: 'to_confirm_payment',\n          dis_play: 'ລໍຖ້າຢືນຢັນຊຳລະ',\n        },\n        {\n          id: 3,\n          name: 'rejected',\n          dis_play: 'ປະຕິເສດການຊຳລະ',\n        },\n        {\n          id: 4,\n          name: 'success',\n          dis_play: 'ຊຳລະສຳເລັດ',\n        },\n      ],\n    };\n  },\n  methods: {\n    fetchData() {\n      const data = new FormData();\n      data.append('page', this.pagination.current_page);\n      data.append('per_page', this.per_page);\n      data.append('duration', this.selectedDuration);\n      if ((this.year_from !== '' && this.year_to !== '') && (this.selectedDuration == 'year')) {\n        data.append('year_from', this.moment(this.year_from).format('YYYY'));\n        data.append('year_to', this.moment(this.year_to).format('YYYY'));\n      }\n      if ((this.month_from !== '' && this.month_to !== '') && (this.selectedDuration == 'month')) {\n        data.append('month_from', this.moment(this.month_from).format('YYYY-MM'));\n        data.append('month_to', this.moment(this.month_to).format('YYYY-MM'));\n      }\n      this.selectedCollectionStatus.map((item) => {\n        data.append('collect_statuses[]', item);\n      });\n      this.selectedPaymentStatus.map((item) => {\n        data.append('payment_statuses[]', item);\n      });\n      this.$store.commit('Loading_State', true);\n      this.$axios\n        .post('report-event-collection-payment', data,\n          //  {\n          //     params: {\n          //         page: this.pagination.current_page,\n          //         per_page: this.per_page,\n          //         filter: this.search,\n          //         duration: this.selectedDuration,\n          //         type: this.selectedInvoceType,\n          //     },\n          // }\n        )\n        .then((res) => {\n          if (res.data.code == 200) {\n            setTimeout(() => {\n              this.$store.commit('Loading_State', false);\n              this.invoices = res.data.data.details.data;\n              this.summary = res.data.data.summary;\n              this.pagination = res.data.data.details.pagination;\n            }, 300);\n          }\n        })\n        .catch((error) => {\n          this.$store.commit('Loading_State', false);\n          this.$store.commit('Toast_State', {\n            value: true,\n            color: 'error',\n            msg: error.response.data.message,\n          });\n        });\n    },\n\n    exportData() {\n      const data = new FormData();\n      data.append('type', this.invoiceType);\n      data.append('duration', this.selectedDuration);\n      data.append('download', 1);\n      if ((this.year_from !== '' && this.year_to !== '') && (this.selectedDuration == 'year')) {\n        data.append('year_from', this.moment(this.year_from).format('YYYY'));\n        data.append('year_to', this.moment(this.year_to).format('YYYY'));\n      }\n      if ((this.month_from !== '' && this.month_to !== '') && (this.selectedDuration == 'month')) {\n        data.append('month_from', this.moment(this.month_from).format('YYYY-MM'));\n        data.append('month_to', this.moment(this.month_to).format('YYYY-MM'));\n      }\n      this.selectedCollectionStatus.map((item) => {\n        data.append('collect_statuses[]', item);\n      });\n      this.selectedPaymentStatus.map((item) => {\n        data.append('payment_statuses[]', item);\n      });\n      this.$store.commit('Loading_State', true);\n      this.$axios\n        .post(\n          'report-event-collection-payment', data,\n          // {\n          //     params: {\n          //         duration: this.selectedDuration,\n          //         type: this.selectedInvoceType,\n          //         download: 1,\n          //     }\n          // },\n          // { responseType: \"blob\" }\n        )\n        .then((res) => {\n          if (res.status == 200) {\n            if (res.data.data.download_link != null) {\n              window.open(res.data.data.download_link);\n            }\n            this.$store.commit('Loading_State', false);\n            // setTimeout(() => {\n            //     this.$store.commit('Loading_State', false);;\n            //     const fileUrl = window.URL.createObjectURL(\n            //         new Blob([res.data])\n            //     );\n            //     const fileLink = document.createElement(\"a\");\n            //     fileLink.href = fileUrl;\n            //     fileLink.setAttribute(\n            //         \"download\",\n            //         \"Report_Invoice\" + \".xlsx\"\n            //     );\n            //     document.body.appendChild(fileLink);\n            //     fileLink.click();\n            //     document.body.removeChild(fileLink);\n            // }, 300);\n          }\n        })\n        .catch((error) => {\n          this.$store.commit('Toast_State', {\n            value: true,\n            color: 'error',\n            msg: error.response.data.message,\n          });\n          this.$store.commit('Loading_State', false);\n        });\n    },\n\n    editPage(id) {\n      this.$router.push({\n        name: 'InvoiceDetail',\n        params: { id },\n      });\n    },\n    viewPage(id) {\n      this.$router.push({\n        name: 'InvoiceDetail',\n        params: { id },\n      });\n    },\n    Search() {\n      GetOldValueOnInput(this);\n    },\n  },\n  watch: {\n    selectedPaymentStatus() {\n      this.pagination.current_page = '';\n      this.fetchData();\n    },\n    selectedCollectionStatus() {\n      this.pagination.current_page = '';\n      this.fetchData();\n    },\n    selectedDuration() {\n      this.pagination.current_page = '';\n      this.fetchData();\n    },\n    search(value) {\n      this.pagination.current_page = '';\n      if (value == '') {\n        this.fetchData();\n      }\n    },\n\n    year_from(value) {\n      const year_from = moment(value).format('YYYY');\n      const year_to = moment(this.year_to).format('YYYY');\n      this.pagination.current_page = '';\n      if (year_from !== '' && year_to !== '') {\n        if (year_from > year_to) {\n          this.year_from = '';\n        }\n      }\n      this.fetchData();\n    },\n    year_to(value) {\n      const year_to = moment(value).format('YYYY');\n      const year_from = moment(this.year_from).format('YYYY');\n      this.pagination.current_page = '';\n      if (year_to !== '' && year_from !== '') {\n        if (year_to < year_from) {\n          this.year_to = '';\n        }\n      }\n      this.fetchData();\n    },\n    month_from(value) {\n      const month_from = moment(value).format('YYYY-MM');\n      const month_to = moment(this.month_to).format('YYYY-MM');\n      if (month_from !== '' && month_to !== '') {\n        if (month_from > month_to) {\n          this.month_from = '';\n        }\n      }\n      this.pagination.current_page = '';\n      this.fetchData();\n    },\n    month_to(value) {\n      const month_from = moment(this.month_from).format('YYYY-MM');\n      const month_to = moment(value).format('YYYY-MM');\n      this.pagination.current_page = '';\n      if (month_from !== '' && month_to !== '') {\n        if (month_to < month_from) {\n          this.month_to = '';\n        }\n      }\n      this.pagination.current_page = '';\n      this.fetchData();\n    },\n\n    tab(value) {\n      if (value == 'tab-1') {\n        this.fetchData();\n        this.invoiceType = 'home';\n        this.$router\n          .push({ name: 'Report-Invoice', query: { tab: 'home' } })\n          .catch(() => { });\n      } else if (value == 'tab-2') {\n        this.fetchData();\n        this.invoiceType = 'company';\n        this.$router\n          .push({\n            name: 'Report-Invoice',\n            query: { tab: 'company' },\n          })\n          .catch(() => { });\n      }\n    },\n  },\n  created() {\n    if (this.$route.query.tab == 'home') {\n      this.tab = 'tab-1';\n      this.invoiceType = 'home';\n      this.fetchData();\n    } else if (this.$route.query.tab == 'company') {\n      this.tab = 'tab-2';\n      this.invoiceType = 'company';\n      this.fetchData();\n    }\n    this.pagination = [];\n  },\n};\n","<template>\n  <v-container>\n    <v-breadcrumbs\n      large\n      class=\"pt-0\"\n    >\n      ລາຍງານຂໍ້ມູນບິນເກັບຂີ້ເຫື້ຍອພິເສດ\n    </v-breadcrumbs>\n    <v-row class=\"mb-n6\">\n      <v-col>\n        <v-btn\n          class=\"btn-primary\"\n          @click=\"exportData()\"\n        >\n          Export\n        </v-btn>\n      </v-col>\n      <v-col>\n        <v-select\n          v-model=\"selectedDuration\"\n          outlined\n          dense\n          :items=\"duration\"\n          item-text=\"name\"\n          item-value=\"duration\"\n          label=\"ຊ່ວງເວລາ\"\n        />\n      </v-col>\n      <v-col v-if=\"selectedDuration == 'year'\">\n        <section>\n          <date-picker\n            v-model=\"year_from\"\n            style=\"height: 40px\"\n            type=\"year\"\n            placeholder=\"ເລີ່ມປີ\"\n          />\n        </section>\n      </v-col>\n      <v-col v-if=\"selectedDuration == 'year'\">\n        <section>\n          <date-picker\n            v-model=\"year_to\"\n            type=\"year\"\n            placeholder=\"ຫາປີ\"\n          />\n        </section>\n      </v-col>\n      <v-col v-if=\"selectedDuration == 'month'\">\n        <section>\n          <date-picker\n            v-model=\"month_from\"\n            type=\"month\"\n            placeholder=\"ເລີ່ມເດືອນ\"\n          />\n        </section>\n      </v-col>\n      <v-col v-if=\"selectedDuration == 'month'\">\n        <section>\n          <date-picker\n            v-model=\"month_to\"\n            type=\"month\"\n            placeholder=\"ຫາເດືອນ\"\n          />\n        </section>\n      </v-col>\n    </v-row>\n    <v-row>\n      <v-col cols>\n        <v-select\n          v-model=\"selectedCollectionStatus\"\n          outlined\n          dense\n          :items=\"collectionStatus\"\n          item-text=\"dis_play\"\n          item-value=\"name\"\n          label=\"ສະຖານະບໍລິການ\"\n          multiple\n          clearable\n        />\n      </v-col>\n      <v-col col>\n        <v-select\n          v-model=\"selectedPaymentStatus\"\n          outlined\n          dense\n          :items=\"paymentStatus\"\n          item-text=\"dis_play\"\n          item-value=\"name\"\n          label=\"ສະຖານະການຊຳລະ\"\n          multiple\n          clearable\n        />\n      </v-col>\n    </v-row>\n\n    <div>\n      <v-row\n        v-for=\"(sum, index) in summary\"\n        :key=\"index\"\n      >\n        <v-col>\n          <p v-if=\"sum.year\">\n            ປີ {{ sum.year }}\n          </p>\n          <p v-if=\"sum.month\">\n            ເດືອນ {{ sum.month }}\n          </p>\n        </v-col>\n        <v-col>\n          <p>\n            ຍອດທີ່ປະຕິເສດ\n            <span class=\"success--text\">{{\n              Intl.NumberFormat().format(sum.rejected_total)\n            }}</span>\n          </p>\n        </v-col>\n        <v-col>\n          <p>\n            ຍອດທີ່ຈ່າຍແລ້ວ(ລໍຖ້າການຢືນຢັນ)\n            <span class=\"success--text\">{{\n              Intl.NumberFormat().format(sum.to_confirm_payment_total)\n            }}</span>\n          </p>\n        </v-col>\n        <v-col>\n          <p>\n            ຍອດທີ່ຈ່າຍແລ້ວ\n            <span class=\"success--text\">{{\n              Intl.NumberFormat().format(sum.success_total)\n            }}</span>\n          </p>\n        </v-col>\n        <v-col>\n          <p>\n            ຍອດທີ່ຍັງບໍ່ຈ່າຍ\n            <span\n              class=\"success--text\"\n            >{{ Intl.NumberFormat().format(sum.pending_total) }}\n            </span>\n          </p>\n        </v-col>\n      </v-row>\n      <v-card>\n        <v-card-text>\n          <v-data-table\n            :headers=\"headers\"\n            :items=\"invoices\"\n            :search=\"search\"\n            :disable-pagination=\"true\"\n            hide-default-footer\n          >\n            <!--Role -->\n            <template v-slot:item.sub_total=\"{ item }\">\n              <div>\n                {{ Intl.NumberFormat().format(item.sub_total) }}\n              </div>\n            </template>\n            <template v-slot:item.total=\"{ item }\">\n              <div>\n                {{ Intl.NumberFormat().format(item.total) }}\n              </div>\n            </template>\n            <template v-slot:item.status=\"{ item }\">\n              <v-chip\n                label\n                :color=\"statusColor(item.payment_status)\"\n              >\n                {{\n                  paymentStatusText(item.payment_status)\n                }}\n              </v-chip>\n            </template>\n            <template v-slot:item.created_at=\"{ item }\">\n              <div>\n                <span>{{ moment(item.created_at).format(\"DD-MM-YY\") }}</span>\n              </div>\n            </template>\n          </v-data-table>\n        </v-card-text>\n      </v-card>\n      <br>\n      <template>\n        <Pagination\n          v-if=\"pagination.total_pages > 1\"\n          :pagination=\"pagination\"\n          :offset=\"offset\"\n          @paginate=\"fetchData()\"\n        />\n      </template>\n    </div>\n  </v-container>\n</template>\n\n<script>\nimport { GetOldValueOnInput } from '@/Helpers/GetValue';\nimport invoice from '@views/report/TabCollectionTab/invoiceEvent';\n\nexport default {\n  name: 'InvoiceCollectionEvent',\n  mixins: [invoice],\n  // props: [\"tab\"],\n  title() {\n    return `Vientiane Waste Co-Dev|Report Invoice Collection Event`;\n  },\n  data() {\n    return {\n      customers: [],\n      loading: false,\n      customerId: '',\n      // Pagination\n      offset: 12,\n      pagination: {},\n      per_page: 100,\n      search: '',\n      oldVal: '',\n      headers: [\n        { text: 'ວັນທີ', value: 'date', sortable: false },\n        { text: 'ລູກຄ້າ', value: 'full_name' },\n        // { text: \"ຈຳນວນຖົງ\", value: \"total_bag\", sortable: false },\n        { text: 'ສ່ວນຫຼຸດ', value: 'discount' },\n        { text: 'SubTotal', value: 'sub_total', sortable: false },\n        { text: 'Total', value: 'total', sortable: false },\n        { text: 'ຊຳລະ', value: 'status', sortable: false },\n        { text: 'Type', value: 'type', sortable: false },\n        // { text: \"\", value: \"actions\", sortable: false },\n      ],\n    };\n  },\n  watch: {\n    tab() {\n      if (this.tab == 'tab-1') {\n        // this.fetchData();\n      }\n    },\n  },\n  created() {\n    this.fetchData();\n  },\n  methods: {\n    Search() {\n      GetOldValueOnInput(this);\n    },\n    statusColor(value) {\n      if (value == 'success') return 'success';\n      if (value == 'pending') return 'primary';\n      if (value == 'rejected') return 'error';\n      return 'info';\n    },\n    paymentStatusText(status) {\n      if (status == 'pending') return 'ລໍຖ້າເກັບເງິນ';\n      if (status == 'to_confirm_payment') return 'ລໍຖ້າຢືນຢັນຊຳລະ';\n      if (status == 'rejected') return 'ປະຕິເສດການຊຳລະ';\n      if (status == 'success') return 'ຊຳລະສຳເລັດ';\n      return '';\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"../../../../public/scss/main.scss\";\n.mx-input {\n  height: 40px !important;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./homeInvoice.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./homeInvoice.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./homeInvoice.vue?vue&type=template&id=62371ed4&\"\nimport script from \"./homeInvoice.vue?vue&type=script&lang=js&\"\nexport * from \"./homeInvoice.vue?vue&type=script&lang=js&\"\nimport style0 from \"./homeInvoice.vue?vue&type=style&index=0&id=62371ed4&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}