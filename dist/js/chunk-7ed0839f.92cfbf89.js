(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ed0839f"],{"22aa":function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"d",(function(){return o})),a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return s})),a.d(e,"f",(function(){return i})),a.d(e,"e",(function(){return c})),a.d(e,"g",(function(){return l})),a.d(e,"h",(function(){return u}));const n=function(t){switch(t){case"created":case"ລໍຖ້າອະນຸມັດ":return"#73b8fd";case"approved":case"ອະນຸມັດແລ້ວ":return"#0080fc";case"canceled":case"ບິນຖືກຍົກເລີກ":return"#eb004c";case"rejected":case"ການຈ່າຍຖືກປະຕິເສດ":return"#740127";case"to_confirm_payment":case"ຈ່າຍແລ້ວ ລໍຖ້າກວດສອບ":return"#9c540d";case"success":case"ຈ່າຍແລ້ວ ກວດສອບສຳເລັດ":return"#02a38a"}},o=function(t){switch(t){case"created":return"ລໍຖ້າອະນຸມັດ";case"approved":return"ອະນຸມັດແລ້ວ";case"canceled":return"ບິນຖືກຍົກເລີກ";case"rejected":return"ການຈ່າຍຖືກປະຕິເສດ";case"to_confirm_payment":return"ຈ່າຍແລ້ວ ລໍຖ້າກວດສອບ";case"success":return"ຈ່າຍແລ້ວ ກວດສອບສຳເລັດ";case"cash":return"ຊຳລະເງິນສົດ";case"bcel":return"BCEL";default:return t}},r=function(t){switch(t){case"CustomBill":return"ບິນຍ້ອນຫຼັງ";case"NewCollectionEvent":return"ບີນບໍລີການຂີ້ເຫຍື້ອພິເສດ";case"FutureInvoice":return"ບິນບໍລິການລ່ວງໜ້າ";case"NewInvoice":return"ບິນບໍລິການປະຈຳເດືອນ";default:return t}},s=function(t){switch(t){case"requested":return"ຮ້ອງຂໍເກັບຂີ້ເຫື້ຍອ";case"rejected":return"ປະຕິເສດເກັບຂີ້ເຫື້ຍອ";case"approved":return"ອະນຸມັດເກັບຂີ້ເຫື້ຍອ";case"collected":return"ເກັບຂີເຫື້ຍອສຳເລັດ";case"collect_confirm":return"ລູກຄ້າຢືນຢັນການເກັບ";case"collect_reject":return"ການເກັບຖືກປະຕິເສດ";default:return t}},i=[{value:"cash",text:"ເງິນສົດ"},{value:"bcel",text:"ເງິນໂອນ"},{value:"bcel_online",text:"bcel bill payments"}],c=["created","approved","to_confirm_payment","success"],l=["rejected","canceled"],u=["kg","ຖົງ","container","ຄັ້ງ"]},"54da":function(t,e,a){"use strict";e["a"]=function(t){const e={};if(!t[0]){for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(void 0!==t[e]&&null!==t[e]&&""!==t[e]||delete t[e]);return t}for(const a of t)1==Object.keys(a).length&&a[Object.keys(a)]&&(e[Object.keys(a)]=a[Object.keys(a)]);return e}},"6eceb":function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));const n=t=>{""!==t.search?""!==t.oldVal?t.oldVal!==t.search&&(t.oldVal=t.search,t.pagination.current_page=1,t.fetchData()):(""!==t.search&&(t.pagination.current_page=1,t.fetchData()),t.oldVal=t.search):t.oldVal=""}},"6f3a":function(t,e,a){"use strict";a("b96d")},7660:function(t,e,a){"use strict";a.d(e,"g",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"h",(function(){return r})),a.d(e,"e",(function(){return s})),a.d(e,"f",(function(){return i})),a.d(e,"a",(function(){return c})),a.d(e,"b",(function(){return l})),a.d(e,"d",(function(){return u}));a("14d9");const n=function(t){switch(t){case"container":return"ຄອນເທນເນີ";case"fix_cost":return"ເປັນຖ້ຽວ";case"chartered":return"ມອບເໝົາ";case"bag":return"ບໍລິມາດ";case"infect":return"ຂີ້ເຫຍື້ອຕິດເຊື້ອ";case"32km":return"ຫຼັກ32";default:return t}},o=[{en:"container",la:"ຄອນເທນເນີ"},{en:"fix_cost",la:"ເປັນຖ້ຽວ"},{en:"chartered",la:"ມອບເໝົາ"},{en:"bag",la:"ບໍລິມາດ"},{en:"infect",la:"ຂີ້ເຫຍື້ອຕິດເຊື້ອ"},{en:"32km",la:"ຫຼັກ32"}],r=function(t){switch(t){case"company":return"ຫົວໜ່ວຍທຸລະກິດ";case"home":return"ຄົວເຮືອນ";default:return t}},s=function(t){switch(t){case"bag":case"chartered":case"32km":case"infect":return"ຖົງ";case"container":return"ຄອນເທນເນີ";case"fix_cost":return"ຖ້ຽວ";default:return t}},i=[{en:"requested",la:"ລູກຄ້າຮ້ອງຂໍເຂົ້າມາ",color:"#34495e"},{en:"rejected",la:"ປະຕິເສດລູກຄ້າແລ້ວ",color:"#eff3f5"},{en:"approved",la:"ອະນຸມັດແລ້ວ ລໍຖ້າລົງເກັບ",color:"#54a0ff"},{en:"collected",la:"ເກັບແລ້ວ ລໍຖ້າຢືນຢັນ",color:"#c1c40f"},{en:"collect_confirm",la:"ລູກຄ້າຢືນຢັນການເກັບແລ້ວ",color:"#30cb83"},{en:"collect_reject",la:"ລູກຄ້າປະຕິເສດການເກັບ",color:"#e74c3c"}],c=[{text:"ວັນທີຈ່າຍບິນ",value:"paided_at"},{text:"ວັນທີສ້າງບິນ",value:"created_at"},{text:"ວັນທີອະນຸມັດບິນ",value:"approved_at"},{text:"ວັນທີກວດສອບບິນສຳເລັດ",value:"confirmed_payment_at"}],l=(t=[])=>{const e=[];for(const a of t)e.push({id:a.id,name:`${a.name} (${Intl.NumberFormat().format(a.price)} ກີບ)`});return e},u=[{value:"",text:"ທັງໝົດ"},{value:"can",text:"ເກັບໄດ້"},{value:"not",text:"ເກັບບໍ່ໄດ້"}]},b96d:function(t,e,a){},ca79:function(t,e,a){"use strict";var n=a("b0af"),o=a("99d9"),r=a("cc20"),s=a("132d"),i=function(){var t=this,e=t._self._c;return e(n["a"],{staticStyle:{height:"100px"},attrs:{outlined:""},on:{click:function(e){return t.openNewTab(t.route)}}},[e(o["c"],{staticClass:"d-flex justify-between w-full text-wrap",staticStyle:{position:"relative"}},[t.icon?e(r["a"],{staticClass:"text-caption text-wrap",attrs:{color:t.icon_color,dark:""}},[e(s["a"],{attrs:{"x-small":!0}},[t._v(" "+t._s(t.icon)+" ")]),e("div",{staticClass:"ml-1",attrs:{color:t.icon_color}},[t._v(" "+t._s(t.title)+" ")])],1):e(r["a"],{staticClass:"text-caption text-wrap",attrs:{color:t.bg_color,dark:""}},[t._v(" "+t._s(t.title)+" ")]),null!=t.billing_count&&""!=t.billing_count&&void 0!=t.billing_count?e(r["a"],{staticClass:"text-caption text-wrap",staticStyle:{position:"absolute",right:"10px"},attrs:{color:t.bg_color,outlined:""}},[t._v(" "+t._s(Intl.NumberFormat().format(t.billing_count))+" "+t._s(t.unit_count?t.unit_count:"ບິນ")+" ")]):t._e()],1),t.total?e(o["b"],[e("div",{staticClass:"text-h5 text-wrap"},[t._v(" "+t._s(Intl.NumberFormat().format(t.total))+" K ")])]):t._e()],1)},c=[],l={props:["title","billing_count","total","bg_color","route","icon","icon_color","unit_count"],data(){return{}},created(){},beforeUpdate(){this.$store.commit("Loading_State",!0)},updated(){this.$store.commit("Loading_State",!1)},methods:{getColor(t){return"background-color: "+t},openNewTab(t){t&&window.open(t.href,"_blank")}}},u=l,m=a("2877"),d=Object(m["a"])(u,i,c,!1,null,null,null);e["a"]=d.exports},e8d1:function(t,e,a){"use strict";a.r(e);var n=a("2bc5"),o=a("8336"),r=a("b0af"),s=a("99d9"),i=a("cc20"),c=a("62ad"),l=a("a523"),u=a("8fea"),m=a("0fd9"),d=a("b974"),h=function(){var t=this,e=t._self._c;return e(l["a"],[e(n["a"],{staticClass:"pt-0",attrs:{large:""}},[t._v(" ລາຍງານຂໍ້ມູນບິນເກັບຂີ້ເຫື້ຍອພິເສດ ")]),e(m["a"],{staticClass:"mb-n6"},[e(c["a"],[e(o["a"],{staticClass:"btn-primary",on:{click:function(e){return t.exportData()}}},[t._v(" Export ")])],1),e(c["a"],[e(d["a"],{attrs:{outlined:"",dense:"",items:t.duration,"item-text":"name","item-value":"duration",label:"ຊ່ວງເວລາ"},model:{value:t.selectedDuration,callback:function(e){t.selectedDuration=e},expression:"selectedDuration"}})],1),"year"==t.selectedDuration?e(c["a"],[e("section",[e("date-picker",{staticStyle:{height:"40px"},attrs:{type:"year",placeholder:"ເລີ່ມປີ"},model:{value:t.year_from,callback:function(e){t.year_from=e},expression:"year_from"}})],1)]):t._e(),"year"==t.selectedDuration?e(c["a"],[e("section",[e("date-picker",{attrs:{type:"year",placeholder:"ຫາປີ"},model:{value:t.year_to,callback:function(e){t.year_to=e},expression:"year_to"}})],1)]):t._e(),"month"==t.selectedDuration?e(c["a"],[e("section",[e("date-picker",{attrs:{type:"month",placeholder:"ເລີ່ມເດືອນ"},model:{value:t.month_from,callback:function(e){t.month_from=e},expression:"month_from"}})],1)]):t._e(),"month"==t.selectedDuration?e(c["a"],[e("section",[e("date-picker",{attrs:{type:"month",placeholder:"ຫາເດືອນ"},model:{value:t.month_to,callback:function(e){t.month_to=e},expression:"month_to"}})],1)]):t._e()],1),e(m["a"],[e(c["a"],{attrs:{cols:""}},[e(d["a"],{attrs:{outlined:"",dense:"",items:t.collectionStatus,"item-text":"dis_play","item-value":"name",label:"ສະຖານະບໍລິການ",multiple:"",clearable:""},model:{value:t.selectedCollectionStatus,callback:function(e){t.selectedCollectionStatus=e},expression:"selectedCollectionStatus"}})],1),e(c["a"],{attrs:{col:""}},[e(d["a"],{attrs:{outlined:"",dense:"",items:t.paymentStatus,"item-text":"dis_play","item-value":"name",label:"ສະຖານະການຊຳລະ",multiple:"",clearable:""},model:{value:t.selectedPaymentStatus,callback:function(e){t.selectedPaymentStatus=e},expression:"selectedPaymentStatus"}})],1)],1),e("div",[e(m["a"],t._l(t.summary,(function(a,n){return e(c["a"],{key:n},[e("MoneyCard",{attrs:{title:a.status_la,total:a.total,bg_color:t.getBgColorFunc(a.status)}})],1)})),1),e(r["a"],[e(s["b"],[e(u["a"],{attrs:{headers:t.headers,items:t.invoices,search:t.search,"disable-pagination":!0,"hide-default-footer":""},scopedSlots:t._u([{key:"item.sub_total",fn:function({item:a}){return[e("div",[t._v(" "+t._s(Intl.NumberFormat().format(a.sub_total))+" ")])]}},{key:"item.total",fn:function({item:a}){return[e("div",[t._v(" "+t._s(Intl.NumberFormat().format(a.total))+" ")])]}},{key:"item.status_la",fn:function({item:a}){return[e(i["a"],{attrs:{label:"",color:t.statusColor(a.status)}},[t._v(" "+t._s(a.status_la)+" ")])]}},{key:"item.billingable.collect_status_la",fn:function({item:a}){return[e(i["a"],{attrs:{label:"",dark:"",color:t.findEventStatus(a.billingable.collect_status)?t.findEventStatus(a.billingable.collect_status).color:""}},[t._v(" "+t._s(a.billingable.collect_status_la)+" ")])]}},{key:"item.created_at",fn:function({item:a}){return[e("div",[e("span",[t._v(t._s(t.moment(a.created_at).format("DD-MM-YY")))])])]}}])})],1)],1),e("br"),[t.pagination.total_pages>1?e("Pagination",{attrs:{pagination:t.pagination,offset:t.offset},on:{paginate:function(e){return t.fetchData()}}}):t._e()]],2)],1)},p=[],_=a("6eceb"),f=a("7660"),y=a("22aa"),b=(a("14d9"),a("c1df")),g=a.n(b),v=a("54da"),Y={title(){return"Vientiane Waste Co-Dev|Report Invoice"},data(){return{tab:"tab-1",customers:[],loading:!1,customerId:"",year_from:"",year_to:"",month_from:"",month_to:"",offset:12,pagination:{},per_page:15,search:"",oldVal:"",invoices:[],summary:{},selectedDuration:"year",duration:[{name:"ປີ",duration:"year"},{name:"ເດືອນ",duration:"month"}],invoiceType:"home",selectedCollectionStatus:[],collectionStatus:[{id:1,name:"requested",dis_play:"ຮ້ອງຂໍເກັບຂີ້ເຫື້ຍອ"},{id:2,name:"rejected",dis_play:"ປະຕິເສດເກັບຂີ້ເຫື້ຍອ"},{id:3,name:"approved",dis_play:"ອະນຸມັດເກັບຂີ້ເຫື້ຍອ"},{id:4,name:"collected",dis_play:"ເກັບຂີເຫື້ຍອສຳເລັດ"},{id:5,name:"collect_confirm",dis_play:"ລູກຄ້າຢືນຢັນການເກັບ"},{id:5,name:"collect_reject",dis_play:"ການເກັບຖືກປະຕິເສດ"}],selectedPaymentStatus:[],paymentStatus:[{id:1,name:"pending",dis_play:"ລໍຖ້າເກັບເງິນ"},{id:2,name:"to_confirm_payment",dis_play:"ລໍຖ້າຢືນຢັນຊຳລະ"},{id:3,name:"rejected",dis_play:"ປະຕິເສດການຊຳລະ"},{id:4,name:"success",dis_play:"ຊຳລະສຳເລັດ"}]}},methods:{fetchData(){const t=new FormData;t.append("page",this.pagination.current_page),t.append("per_page",this.per_page),t.append("duration",this.selectedDuration),""!==this.year_from&&""!==this.year_to&&"year"==this.selectedDuration&&(t.append("year_from",this.moment(this.year_from).format("YYYY")),t.append("year_to",this.moment(this.year_to).format("YYYY"))),""!==this.month_from&&""!==this.month_to&&"month"==this.selectedDuration&&(t.append("month_from",this.moment(this.month_from).format("YYYY-MM")),t.append("month_to",this.moment(this.month_to).format("YYYY-MM"))),this.selectedCollectionStatus.map(e=>{t.append("collect_statuses[]",e)}),this.selectedPaymentStatus.map(e=>{t.append("payment_statuses[]",e)});const e=[{per_page:this.per_page},{page:this.pagination.current_page},{duration:this.selectedDuration}];""!==this.year_from&&"year"==this.selectedDuration&&e.push({year_from:this.moment(this.year_from).format("YYYY")}),""!==this.year_to&&"year"==this.selectedDuration&&e.push({year_to:this.moment(this.year_to).format("YYYY")}),""!==this.month_from&&"month"==this.selectedDuration&&e.push({month_from:this.moment(this.month_from).format("YYYY-MM")}),""!==this.month_to&&"month"==this.selectedDuration&&e.push({month_to:this.moment(this.month_to).format("YYYY-MM")}),this.selectedCollectionStatus.map(t=>{e.push({"collect_statuses[]":t})}),this.selectedPaymentStatus.map(t=>{e.push({"payment_statuses[]":t})}),this.$store.commit("Loading_State",!0),this.$axios.get("v2/report-billing-collection-event",{params:Object(v["a"])(e)}).then(t=>{200==t.data.code&&setTimeout(()=>{this.$store.commit("Loading_State",!1),this.invoices=t.data.data.data.data,this.summary=t.data.data.summary,this.pagination=t.data.data.data.pagination},300)}).catch(t=>{this.$store.commit("Loading_State",!1),this.$store.commit("Toast_State",{value:!0,color:"error",msg:t.response.data.message})})},exportData(){const t=new FormData;t.append("type",this.invoiceType),t.append("duration",this.selectedDuration),t.append("download",1),""!==this.year_from&&""!==this.year_to&&"year"==this.selectedDuration&&(t.append("year_from",this.moment(this.year_from).format("YYYY")),t.append("year_to",this.moment(this.year_to).format("YYYY"))),""!==this.month_from&&""!==this.month_to&&"month"==this.selectedDuration&&(t.append("month_from",this.moment(this.month_from).format("YYYY-MM")),t.append("month_to",this.moment(this.month_to).format("YYYY-MM"))),this.selectedCollectionStatus.map(e=>{t.append("collect_statuses[]",e)}),this.selectedPaymentStatus.map(e=>{t.append("payment_statuses[]",e)}),this.$store.commit("Loading_State",!0),this.$axios.post("report-event-collection-payment",t).then(t=>{200==t.status&&(null!=t.data.data.download_link&&window.open(t.data.data.download_link),this.$store.commit("Loading_State",!1))}).catch(t=>{this.$store.commit("Toast_State",{value:!0,color:"error",msg:t.response.data.message}),this.$store.commit("Loading_State",!1)})},editPage(t){this.$router.push({name:"InvoiceDetail",params:{id:t}})},viewPage(t){this.$router.push({name:"InvoiceDetail",params:{id:t}})},Search(){Object(_["a"])(this)}},watch:{selectedPaymentStatus(){this.pagination.current_page="",this.fetchData()},selectedCollectionStatus(){this.pagination.current_page="",this.fetchData()},selectedDuration(){this.pagination.current_page="",this.fetchData()},search(t){this.pagination.current_page="",""==t&&this.fetchData()},year_from(t){const e=g()(t).format("YYYY"),a=g()(this.year_to).format("YYYY");this.pagination.current_page="",""!==e&&""!==a&&e>a&&(this.year_from=""),this.fetchData()},year_to(t){const e=g()(t).format("YYYY"),a=g()(this.year_from).format("YYYY");this.pagination.current_page="",""!==e&&""!==a&&e<a&&(this.year_to=""),this.fetchData()},month_from(t){const e=g()(t).format("YYYY-MM"),a=g()(this.month_to).format("YYYY-MM");""!==e&&""!==a&&e>a&&(this.month_from=""),this.pagination.current_page="",this.fetchData()},month_to(t){const e=g()(this.month_from).format("YYYY-MM"),a=g()(t).format("YYYY-MM");this.pagination.current_page="",""!==e&&""!==a&&a<e&&(this.month_to=""),this.pagination.current_page="",this.fetchData()},tab(t){"tab-1"==t?(this.fetchData(),this.invoiceType="home",this.$router.push({name:"Report-Invoice",query:{tab:"home"}}).catch(()=>{})):"tab-2"==t&&(this.fetchData(),this.invoiceType="company",this.$router.push({name:"Report-Invoice",query:{tab:"company"}}).catch(()=>{}))}},created(){"home"==this.$route.query.tab?(this.tab="tab-1",this.invoiceType="home",this.fetchData()):"company"==this.$route.query.tab&&(this.tab="tab-2",this.invoiceType="company",this.fetchData()),this.pagination=[]}},x=a("ca79"),D={name:"InvoiceCollectionEvent",mixins:[Y],title(){return"Vientiane Waste Co-Dev|Report Invoice Collection Event"},components:{MoneyCard:x["a"]},data(){return{customers:[],loading:!1,customerId:"",offset:12,pagination:{},per_page:100,search:"",oldVal:"",headers:[{text:"ວັນທີ",value:"date",sortable:!1},{text:"ໄອດີການເກັບ",value:"billingable.display_id"},{text:"ລູກຄ້າ",value:"display_customer_name"},{text:"ໄອດີບິນ",value:"billing_display_id"},{text:"ສ່ວນຫຼຸດ",value:"discount"},{text:"SubTotal",value:"sub_total",sortable:!1},{text:"Total",value:"total",sortable:!1},{text:"ສະຖານະຊຳລະ",value:"status_la",sortable:!1},{text:"ສະຖານະເກັບ",value:"billingable.collect_status_la",sortable:!1}],getEventStatus:f["f"]}},watch:{tab(){this.tab}},created(){this.fetchData()},methods:{Search(){Object(_["a"])(this)},getBgColorFunc(t){return Object(y["a"])(t)},statusColor(t){return"success"==t?"success":"pending"==t?"primary":"rejected"==t?"error":"info"},paymentStatusText(t){return"pending"==t?"ລໍຖ້າເກັບເງິນ":"to_confirm_payment"==t?"ລໍຖ້າຢືນຢັນຊຳລະ":"rejected"==t?"ປະຕິເສດການຊຳລະ":"success"==t?"ຊຳລະສຳເລັດ":""},findEventStatus(t){return this.getEventStatus.find(e=>e.en==t)}}},S=D,k=(a("6f3a"),a("2877")),w=Object(k["a"])(S,h,p,!1,null,null,null);e["default"]=w.exports}}]);
//# sourceMappingURL=chunk-7ed0839f.92cfbf89.js.map