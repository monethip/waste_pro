(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3532c19f","chunk-2d7c45c5"],{"00c4":function(t,e,s){},"014a":function(t,e,s){"use strict";s.r(e);var a=s("db5a"),i=s("0f35"),n=s("1da9"),l=s("d415"),r=s("fde7"),o=s("d62f"),c=s("2f5e"),d=s("0af3"),u=s("a151"),h=s("e28e"),m=s("9b44"),p=function(){var t=this,e=t._self._c;return e("div",[e(o["a"],[e(n["a"],[e(r["a"],{attrs:{"close-on-content-click":!0,"nudge-right":40,"min-width":"auto","offset-y":"",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(m["a"],t._g(t._b({attrs:{clearable:"",dense:"",label:"ບິນປະຈຳເດືອນ",outlined:"",readonly:""},model:{value:t.lastMonthBillPaid,callback:function(e){t.lastMonthBillPaid=e},expression:"lastMonthBillPaid"}},"v-text-field",a,!1),s))]}}]),model:{value:t.start_menu_created,callback:function(e){t.start_menu_created=e},expression:"start_menu_created"}},[e(l["a"],{attrs:{type:"month"},model:{value:t.lastMonthBillPaid,callback:function(e){t.lastMonthBillPaid=e},expression:"lastMonthBillPaid"}})],1)],1),e(n["a"],[e(r["a"],{attrs:{"close-on-content-click":!0,"nudge-right":40,"min-width":"auto","offset-y":"",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(m["a"],t._g(t._b({attrs:{clearable:"",dense:"",label:"ເດືອນທີ່ສ້າງບິນ",outlined:"",readonly:""},model:{value:t.lastMonthBill,callback:function(e){t.lastMonthBill=e},expression:"lastMonthBill"}},"v-text-field",a,!1),s))]}}]),model:{value:t.start_menu,callback:function(e){t.start_menu=e},expression:"start_menu"}},[e(l["a"],{attrs:{type:"month"},model:{value:t.lastMonthBill,callback:function(e){t.lastMonthBill=e},expression:"lastMonthBill"}})],1)],1)],1),e(o["a"],[e(n["a"],[e(u["a"],{staticStyle:{position:"sticky",top:"4rem","z-index":"2"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.items,(function(s){return e(c["a"],{key:s.tab},[t._v(" "+t._s(s.tab)+" ")])})),1),e(h["a"],{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.items,(function(t){return e(d["a"],{key:t.tab},[e(a["a"],{attrs:{flat:""}},[e(i["b"],[e(t.content,{tag:"component"})],1)],1)],1)})),1)],1)],1)],1)},_=[],g=s("7286"),f=s("a892"),v=s("07b0"),b=s("28e8"),y=s("1789"),x=s("0cb6"),S=s("1d7d"),w=(s("558b"),s("f81c"),s("2dec")),k=s("3870"),C=s("d799"),D=s("679e"),$=s("710c"),B=s("9c0c"),I=Object(B["a"])(C["a"],Object(D["a"])({onVisible:["init"]}),$["a"]).extend({name:"v-pagination",directives:{Resize:k["a"]},props:{circle:Boolean,disabled:Boolean,navigationColor:String,navigationTextColor:String,length:{type:Number,default:0,validator:t=>t%1===0},nextIcon:{type:String,default:"$next"},prevIcon:{type:String,default:"$prev"},totalVisible:[Number,String],value:{type:Number,default:0},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},wrapperAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.wrapper"}},data(){return{maxButtons:0,selected:null}},computed:{classes(){return{"v-pagination":!0,"v-pagination--circle":this.circle,"v-pagination--disabled":this.disabled,...this.themeClasses}},items(){const t=parseInt(this.totalVisible,10);if(0===t||isNaN(this.length)||this.length>Number.MAX_SAFE_INTEGER)return[];const e=Math.min(Math.max(0,t)||this.length,Math.max(0,this.maxButtons)||this.length,this.length);if(this.length<=e)return this.range(1,this.length);const s=e%2===0?1:0,a=Math.floor(e/2),i=this.length-a+1+s;if(this.value>a&&this.value<i){const t=1,e=this.length,i=this.value-a+2,n=this.value+a-2-s,l=i-1===t+1?2:"...",r=n+1===e-1?n+1:"...";return[1,l,...this.range(i,n),r,this.length]}if(this.value===a){const t=this.value+a-1-s;return[...this.range(1,t),"...",this.length]}if(this.value===i){const t=this.value-a+1;return[1,"...",...this.range(t,this.length)]}return[...this.range(1,a),"...",...this.range(i,this.length)]}},watch:{value(){this.init()}},beforeMount(){this.init()},methods:{init(){this.selected=null,this.onResize(),this.$nextTick(this.onResize),setTimeout(()=>this.selected=this.value,100)},onResize(){const t=this.$el&&this.$el.parentElement?this.$el.parentElement.clientWidth:window.innerWidth;this.maxButtons=Math.floor((t-96)/42)},next(t){t.preventDefault(),this.$emit("input",this.value+1),this.$emit("next")},previous(t){t.preventDefault(),this.$emit("input",this.value-1),this.$emit("previous")},range(t,e){const s=[];t=t>0?t:1;for(let a=t;a<=e;a++)s.push(a);return s},genIcon(t,e,s,a,i){return t("li",[t("button",this.setBackgroundColor(this.navigationColor,{staticClass:"v-pagination__navigation",class:{"v-pagination__navigation--disabled":s},attrs:{disabled:s,type:"button","aria-label":i},on:s?{}:{click:a}}),[t(w["a"],{props:{color:this.navigationTextColor}},[e])])])},genItem(t,e){const s=e===this.value&&(this.color||"primary"),a=e===this.value,i=a?this.currentPageAriaLabel:this.pageAriaLabel;return t("button",this.setBackgroundColor(s,{staticClass:"v-pagination__item",class:{"v-pagination__item--active":e===this.value},attrs:{type:"button","aria-current":a,"aria-label":this.$vuetify.lang.t(i,e)},on:{click:()=>this.$emit("input",e)}}),[e.toString()])},genItems(t){return this.items.map((e,s)=>t("li",{key:s},[isNaN(Number(e))?t("span",{class:"v-pagination__more"},[e.toString()]):this.genItem(t,e)]))},genList(t,e){return t("ul",{directives:[{modifiers:{quiet:!0},name:"resize",value:this.onResize}],class:this.classes},e)}},render(t){const e=[this.genIcon(t,this.$vuetify.rtl?this.nextIcon:this.prevIcon,this.value<=1,this.previous,this.$vuetify.lang.t(this.previousAriaLabel)),this.genItems(t),this.genIcon(t,this.$vuetify.rtl?this.prevIcon:this.nextIcon,this.value>=this.length,this.next,this.$vuetify.lang.t(this.nextAriaLabel))];return t("nav",{attrs:{role:"navigation","aria-label":this.$vuetify.lang.t(this.wrapperAriaLabel)}},[this.genList(t,e)])}}),M=s("26bf"),L=s("a729"),O=function(){var t=this,e=t._self._c;return e(y["a"],[e(o["a"],[e("span",{staticClass:"text-h5"},[t._v("ລວມທັງໝົດ "),t.selectSaleObject?e("strong",[t._v("("+t._s(t.selectSaleObject.name)+")")]):t._e()])]),e(o["a"],[e(n["a"],[e(f["a"],{attrs:{items:t.districts,dense:"","item-text":"name","item-value":"id",label:"District *",outlined:"",required:"","return-object":""},model:{value:t.selectedDistrict,callback:function(e){t.selectedDistrict=e},expression:"selectedDistrict"}})],1),e(n["a"],[e(f["a"],{attrs:{items:t.villageList,dense:"","item-text":"name","item-value":"id",label:"Village *",outlined:"",required:""},model:{value:t.selectedVillage,callback:function(e){t.selectedVillage=e},expression:"selectedVillage"}})],1),e(n["a"],[e(f["a"],{attrs:{items:t.billDates,clearable:"","item-text":"text","item-value":"value",label:"ເລືອກປະເພດວັນທີ",outlined:""},model:{value:t.selectedBillDate,callback:function(e){t.selectedBillDate=e},expression:"selectedBillDate"}})],1),e(n["a"],[e(r["a"],{attrs:{"close-on-content-click":!1,"nudge-right":40,"min-width":"auto","offset-y":"",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(m["a"],t._g(t._b({attrs:{clearable:"",dense:"",label:"ເລີ່ມວັນທີ",outlined:"",readonly:""},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}},"v-text-field",a,!1),s))]}}]),model:{value:t.start_menu,callback:function(e){t.start_menu=e},expression:"start_menu"}},[e(l["a"],{on:{input:function(e){return t.fetchData()}},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}})],1)],1),e(n["a"],[e(r["a"],{attrs:{"close-on-content-click":!1,"nudge-right":40,"min-width":"auto","offset-y":"",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(m["a"],t._g(t._b({attrs:{dense:"",label:"ຫາວັນທີ",outlined:"",readonly:""},model:{value:t.end_date,callback:function(e){t.end_date=e},expression:"end_date"}},"v-text-field",a,!1),s))]}}]),model:{value:t.end_menu,callback:function(e){t.end_menu=e},expression:"end_menu"}},[e(l["a"],{on:{input:function(e){return t.fetchData()}},model:{value:t.end_date,callback:function(e){t.end_date=e},expression:"end_date"}})],1)],1),e(n["a"],[e(M["a"],{attrs:{items:t.paymentMethods,dense:"","item-text":"text","item-value":"value",label:"ເລືອກປະເພດການຈ່າຍ",outlined:""},on:{change:function(e){return t.fetchData()}},model:{value:t.selectedPaymentMethod,callback:function(e){t.selectedPaymentMethod=e},expression:"selectedPaymentMethod"}})],1),e(n["a"],[e(f["a"],{attrs:{items:t.sales,dense:"","item-text":"name","item-value":"id",label:"ເລືອກເຊວທີ່ກ່ຽວຂ້ອງ",outlined:""},model:{value:t.selectedSale,callback:function(e){t.selectedSale=e},expression:"selectedSale"}})],1),e(n["a"],[e(v["a"],{attrs:{color:"green",dark:""},on:{click:t.handleExport}},[t._v(" Export ")])],1)],1),e(o["a"],[e(n["a"],[e(a["a"],{attrs:{outlined:""}},[e(i["c"],[t._v("ລວມທັງໝົດ")]),e(i["b"],[e("span",{staticClass:"text-subtitle-1 mt-2"},[t._v("ທີ່ລູກຄ້າຈ່າຍແລ້ວ")]),e("RowSection",{attrs:{cards:t.sectionSuccess}}),e("span",{staticClass:"text-subtitle-1 mt-2"},[t._v("ທີ່ລູກຄ້າຍັງບໍ່ທັນຈ່າຍ")]),e("RowSection",{attrs:{cards:t.sectionPending}})],1)],1)],1)],1),e(o["a"],[e(n["a"],[e(a["a"],{attrs:{outlined:""}},[e(i["c"],[t._v("ຕາມປະເພດບິນ")]),e(i["b"],[e(L["a"],{scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",[t._v("ປະເພດບິນ")]),t._l(t.detailStatuses,(function(s){return e("th",{key:s.text,staticClass:"text-left"},[e(b["a"],{attrs:{color:t.getBgColorFunc(s.text),dark:""}},[t._v(" "+t._s(s.text)+" ")])],1)}))],2)]),e("tbody",t._l(t.summaryDetails,(function(s){return e("tr",{key:s.billing_type},[e("td",[e("span",{staticClass:"font-weight-medium"},[t._v(" "+t._s(s.billing_type)+" ")]),e("span",{staticClass:"font-weight-medium text-caption"},[t._v(" "+t._s(` (${t.formatNumber(s.count_billing)} ບິນ)`)+" ")])]),t._l(t.detailStatuses,(function(a){return e("td",{key:a.text},[e("span",{staticClass:"font-weight-medium"},[t._v(" "+t._s(t.formatNumber(s[a.text].total))+" ")]),e("span",{staticClass:"font-weight-medium text-caption"},[t._v(" "+t._s(` (${t.formatNumber(s[a.text].count_billing)} ບິນ)`)+" ")])])}))],2)})),0)]},proxy:!0}])})],1)],1)],1)],1),e(o["a"],[e(n["a"],[e(a["a"],{attrs:{outlined:""}},[e(i["c"],[t._v("ແຍກຈາກເຊວ")]),e(i["b"],[e(o["a"],[e(n["a"],[e(g["a"],{attrs:{outlined:"",color:"purple"}},[e(o["a"],[e(n["a"],{on:{click:function(e){return t.changeSaleMode("sale")}}},[e("span",{staticClass:"text-title mt-2 font-weight-bold"},[t._v("ບິນທີ່ເປັນຂອງເຊວ")]),e("RowSection",{attrs:{cards:t.sectionSale}})],1),e(n["a"],{on:{click:function(e){return t.changeSaleMode("sale_inactive")}}},[e("span",{staticClass:"text-title mt-2 font-weight-bold"},[t._v("ຊະເພາະ (inactive)")]),e("RowSection",{attrs:{cards:t.sectionSaleInactive}})],1)],1)],1)],1),e(n["a"],{attrs:{cols:"4"},on:{click:function(e){return t.changeSaleMode("not_sale")}}},[e("span",{staticClass:"text-title mt-2"},[t._v("ບິນທີ່ບໍ່ເປັນຂອງເຊວ")]),e("RowSection",{attrs:{cards:t.sectionNotSale}})],1)],1)],1)],1)],1)],1),e(o["a"],[e(n["a"],[e(a["a"],{attrs:{outlined:""}},[e(i["c"],[e(o["a"],[e(n["a"],[t._v("ລາຍການບິນທັງໝົດ "),e("strong",[t._v(t._s(t.sale_mode?"sale"==t.sale_mode?"ທີ່ເປັນຂອງເຊວ":"ທີ່ບໍ່ເປັນຂອງເຊວ":""))])]),e(n["a"],[e(m["a"],{attrs:{"append-icon":"mdi-magnify","hide-details":"",placeholder:"ຊື່ຫົວບິນ, ລູກຄ້າ...","single-line":""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetchData.apply(null,arguments)}},model:{value:t.billingListsearch,callback:function(e){t.billingListsearch=e},expression:"billingListsearch"}})],1)],1)],1),e(i["b"],[e(o["a"],[e(n["a"],[e(x["a"],{attrs:{headers:t.billingListHeader,items:t.billings.data.data,"items-per-page":100,"hide-default-footer":""},scopedSlots:t._u([{key:"item.status",fn:function({item:s}){return[e(b["a"],{attrs:{color:t.getBgColorFunc(s.status),dark:""}},[t._v(" "+t._s(t.getLaoStatusFunc(s.status))+" ")])]}},{key:"item.total",fn:function({item:e}){return[t._v(" "+t._s(t.formatNumber(e.total))+" ")]}},{key:"item.paided_by_user.full_name",fn:function({item:s}){return[s.paided_by_user?e("p",{class:s.paided_by_user&&s.paided_by_user.roles&&s.paided_by_user.roles.length?"":"text-decoration-line-through"},[t._v(" "+t._s(s.paided_by_user.full_name)+" ")]):t._e()]}},{key:"item.display_type",fn:function({item:e}){return[t._v(" "+t._s(t.getLaoBillingTypeFunc(e.display_type))+" ")]}},{key:"item.custom_type",fn:function({item:s}){return["home"==t.customerType(s)?e("span",[t._v("ຄົວເຮືອນ")]):t._e(),"company"==t.customerType(s)?e("span",[t._v("ທຸລະກິດ")]):t._e(),t.customerType(s)?t._e():e("span",[t._v("ທົ່ວໄປ")])]}},{key:"item.action",fn:function({item:s}){return[e(v["a"],{staticClass:"btn elevation-0",attrs:{color:"info",small:""},on:{click:function(e){return t.ViewInvoice(s.id)}}},[e(S["a"],{staticClass:"mr-1",attrs:{small:""}},[t._v(" mdi-eye ")])],1)]}}])})],1)],1),e(o["a"],[e(n["a"],[e(I,{staticClass:"my-4",attrs:{length:t.billings.data.pagination.total_pages},model:{value:t.current_page,callback:function(e){t.current_page=e},expression:"current_page"}})],1)],1)],1)],1)],1)],1)],1)},j=[],T=s("398d"),P=s("22aa"),V=s("7660");function R(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var N=s("54da"),E={name:"ReportBillingType",title(){return"Vientiane Waste Co-Dev|Report Invoice"},components:{RowSection:T["a"]},data(){return{loading:!1,firstLoad:!0,sale_mode:"",paymentMethods:P["f"],selectedPaymentMethod:"",billingListsearch:"",exportMode:"",start_date:""+(new Date).toISOString().substr(0,10),end_date:"",start_menu:!1,end_menu:!1,villages:[],selectedVillage:"",districts:[],selectedDistrict:"",selectedSale:"",salesData:[],current_page:1,billings:{summary:{count_billing:0,total:[]},villages:[],billingable:[],details:[],data:{data:[],pagination:{total:0,count:0,per_page:100,current_page:null,total_pages:0}},download_link:""},selectedBillDate:"paided_at",billingListHeader:[{text:"ໄອດີ",value:"billing_display_id"},{text:"ຊື່ຫົວບິນ",align:"start",value:"content",width:"150px"},{text:"ສະຖານະ",value:"status"},{text:"ປະເພດການຈ່າຍ",value:"payment_method_la"},{text:"ຜູ້ຈ່າຍ",value:"paided_by_user.full_name"},{text:"ປະເພດບິນ",value:"display_type_la",width:"100px"},{text:"ຈຳນວນ",value:"total"},{text:"ລູກຄ້າ",value:"display_customer_name"},{text:"ປະເພດລູກຄ້າ",value:"custom_type",width:"100px"},{text:"ບ້ານ",value:"display_customer_village",width:"100px"},{text:"ເມືອງ",value:"display_customer_district"},{text:"action",value:"action"}],lastMonthBill:localStorage.getItem("lastMonthBill"),lastMonthBillPaid:localStorage.getItem("lastMonthBillPaid")}},computed:{selectSaleObject(){let t=null;if(this.selectedSale){const e=this.sales.find(t=>t.id==this.selectedSale);e&&(t=e)}return t},lastMonthCreated(){return""},lastMonthBillCreated(){return""},billDates(){return V["a"]},sales(){const t=[];for(const e of this.salesData){let s="";e.name&&(s+=e.name+" "),e.phone&&(s+=e.phone+" "),e.emp_name&&(s+=e.emp_name+" "),e.emp_surname&&(s+=e.emp_surname+" "),e.emp_card_id&&(s+=e.emp_card_id),t.push({name:s,id:e.id})}return t},villageList(){return this.selectedDistrict?this.selectedDistrict.villages:[]},summaryDetails(){const t=[];for(const e of this.billings.details){const s={billing_type:e.billingable_type_la,count_billing:e.count_billing};for(const t of e.total)s[t.status_la]={count_billing:t.count_billing,total:t.total};t.push(s)}return t},detailStatuses(){const t=[];if(this.billings.summary&&this.billings.summary.total.length)for(const e of this.billings.summary.total)t.push({text:e.status_la,value:e.total});return t},headers(){let t=[{text:"ປະເພດບິນ",align:"start",value:"billing_type"}];return this.detailStatuses.length&&(t=[t,...this.detailStatuses]),t},defaultStatus(){return{status:"",status_la:"",total:0,count_billing:0,bg_color:""}},sectionSuccess(){return[this.successStatus,this.toConfirmPaymentStatus,this.rejectedStatus]},sectionSale(){let t=this.defaultStatus;return this.billings.sum_sale&&this.billings.sum_sale.total&&(t=this.billings.sum_sale.total.find(t=>"success"==t.status)),[{...t,bg_color:"teal"}]},sectionSaleInactive(){let t=this.defaultStatus;return this.billings.sum_inactive_sale&&this.billings.sum_inactive_sale.total&&(t=this.billings.sum_inactive_sale.total.find(t=>"success"==t.status)),[{...t,bg_color:"indigo"}]},sectionNotSale(){let t=this.defaultStatus;return this.billings.sum_not_sale&&this.billings.sum_not_sale.total&&(t=this.billings.sum_not_sale.total.find(t=>"success"==t.status)),[{...t,bg_color:"teal darken-4"}]},sectionPending(){return[this.approvedStatus,this.createdStatus]},successStatus(){return this.getCard("success")},createdStatus(){return this.getCard("created")},cancelStatus(){return this.getCard("cancel")},rejectedStatus(){return this.getCard("rejected")},toConfirmPaymentStatus(){return this.getCard("to_confirm_payment")},approvedStatus(){return this.getCard("approved")}},watch:{lastMonthCreated(){this.firstLoad||this.fetchData()},lastMonthBillCreated(){this.firstLoad||this.fetchData()},selectedBillDate(){this.firstLoad||!this.start_date&&!this.end_date||this.fetchData()},selectedSale(){this.firstLoad||this.fetchData()},current_page(){this.firstLoad||this.fetchData(this.current_page)},selectedDistrict(){this.firstLoad||this.fetchData()},selectedVillage(){this.firstLoad||this.fetchData()},exportMode(){this.firstLoad||this.fetchData()}},beforeCreate(){},async created(){await this.fetchDistrict(),this.$route.query.selected_district&&(this.selectedDistrict=this.districts.find(t=>t.id==this.$route.query.selected_district),this.selectedVillage="number"!==typeof this.$route.query.selected_village?parseInt(this.$route.query.selected_village):this.$route.query.selected_village),this.sale_mode=this.$route.query.sale_mode,this.selectedBillDate=this.$route.query.date_method,this.start_date=this.$route.query.date_from,this.end_date=this.$route.query.date_to,this.fetchSale().then(async()=>{this.selectedSale="number"!==typeof this.$route.query.selected_sale?parseInt(this.$route.query.selected_sale):this.$route.query.selected_sale}).finally(()=>{this.$store.commit("Loading_State",!1),this.selectedBillDate="paided_at",this.start_date=(new Date).toISOString().substr(0,10),this.fetchData()})},methods:{changeSaleMode(t){this.sale_mode=t,this.fetchData()},handleExport(){this.exportMode="excel"},customerType(t){return!(!t.user||!t.user.customer)&&(!!t.user.customer.customer_type&&t.user.customer.customer_type)},async fetchDistrict(){try{const t=await this.$axios.get("info/district",{params:{province_id:1}});this.districts=t.data.data}catch(t){console.log(t)}},fetchData(t=1){this.start_menu=!1,this.end_menu=!1;const e=[{per_page:100},{page:t},{sale_id:this.selectedSale},{payment_method:this.selectedPaymentMethod},{date_method:this.selectedBillDate},{start_date:this.start_date},{end_date:this.end_date},{download:this.exportMode},{created_month:this.lastMonthCreated},{bill_month:this.lastMonthBillCreated},{without_customer_activity:!0},{without_month_info:!0},{sale_mode:this.sale_mode},{filter:this.billingListsearch}];this.selectedVillage?e.push({village_id:this.selectedVillage}):this.selectedDistrict&&e.push({district_id:this.selectedDistrict}),this.$store.commit("Loading_State",!0),this.$axios.get("v2/report-billing-by-type",{params:Object(N["a"])(e)}).then(t=>{200==t.data.code&&setTimeout(()=>{this.exportMode="",t.data.data.download_link?window.open(t.data.data.download_link):(this.billings=t.data.data,this.current_page=this.billings.data.pagination.current_page)},300)}).catch(t=>{if(t.response&&422==t.response.status){const e=t.response.data.errors;for(const[t,s]of Object.entries(e))this.server_errors[t]=s[0]}}).finally(()=>{this.firstLoad=!1,this.$store.commit("Loading_State",!1)})},async fetchSale(){this.$store.commit("Loading_State",!0);const t=await this.$axios.get("user-setting/user",{params:Object(N["a"])([{roles:["sale","sale_admin","sale_register","sale_partner","sale_editor"]},{order_by:"newest"}])}).catch(t=>{if(t.response&&422===t.response.status){const e=t.response.data.errors;for(const[t,s]of Object.entries(e))this.server_errors[t]=s[0]}}).finally(()=>{this.$store.commit("Loading_State",!1)});200===t.data.code&&(this.salesData=t.data.data),this.$store.commit("Loading_State",!1)},ViewInvoice(t){const e=this.$router.resolve({name:"billing-detail",params:{id:t}});window.open(e.href,"_blank")},getCard(t){const e=this.billings.summary.total.find(e=>e.status==t);if(e){const s=this.$router.resolve({path:"/billing",query:{tab:t}});e.route=s,e.bg_color=Object(P["a"])(e.status)}return e||this.defaultStatus},getBgColorFunc(t){return Object(P["a"])(t)},getLaoBillingTypeFunc(t){return Object(P["b"])(t)},getLaoStatusFunc(t){return Object(P["d"])(t)},formatNumber(t){return R(t)}}},A=E,F=(s("ec0a"),s("4a4e")),q=Object(F["a"])(A,O,j,!1,null,null,null),z=q.exports,W=function(){var t=this,e=t._self._c;return e(y["a"],[e(o["a"],[e("span",{staticClass:"text-h5"},[t._v("ຫົວໜ່ວຍທຸລະກິດ")])]),e(o["a"],[e(n["a"],[e(f["a"],{attrs:{items:t.costByList,dense:"","item-text":"la","item-value":"en",label:"ປະເພດບໍລິການ *",outlined:"",required:""},model:{value:t.selectedCostBy,callback:function(e){t.selectedCostBy=e},expression:"selectedCostBy"}})],1),e(n["a"],[e(f["a"],{attrs:{items:t.districts,dense:"","item-text":"name","item-value":"id",label:"District *",outlined:"",required:"","return-object":""},model:{value:t.selectedDistrict,callback:function(e){t.selectedDistrict=e},expression:"selectedDistrict"}})],1),e(n["a"],[e(f["a"],{attrs:{items:t.villageList,dense:"","item-text":"name","item-value":"id",label:"Village *",outlined:"",required:""},model:{value:t.selectedVillage,callback:function(e){t.selectedVillage=e},expression:"selectedVillage"}})],1),e(n["a"],[e(f["a"],{attrs:{items:t.billDates,clearable:"","item-text":"text","item-value":"value",label:"ເລືອກປະເພດວັນທີ",outlined:""},model:{value:t.selectedBillDate,callback:function(e){t.selectedBillDate=e},expression:"selectedBillDate"}})],1),e(n["a"],[e(r["a"],{attrs:{"close-on-content-click":!1,"nudge-right":40,"min-width":"auto","offset-y":"",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(m["a"],t._g(t._b({attrs:{dense:"",label:"ເລີ່ມວັນທີ",outlined:"",readonly:""},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}},"v-text-field",a,!1),s))]}}]),model:{value:t.start_menu,callback:function(e){t.start_menu=e},expression:"start_menu"}},[e(l["a"],{on:{input:function(e){return t.fetchData()}},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}})],1)],1),e(n["a"],[e(r["a"],{attrs:{"close-on-content-click":!1,"nudge-right":40,"min-width":"auto","offset-y":"",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(m["a"],t._g(t._b({attrs:{dense:"",label:"ຫາວັນທີ",outlined:"",readonly:""},model:{value:t.end_date,callback:function(e){t.end_date=e},expression:"end_date"}},"v-text-field",a,!1),s))]}}]),model:{value:t.end_menu,callback:function(e){t.end_menu=e},expression:"end_menu"}},[e(l["a"],{on:{input:function(e){return t.fetchData()}},model:{value:t.end_date,callback:function(e){t.end_date=e},expression:"end_date"}})],1)],1),e(n["a"],[e(M["a"],{attrs:{items:t.paymentMethods,dense:"","item-text":"text","item-value":"value",label:"ເລືອກປະເພດການຈ່າຍ",outlined:""},on:{change:function(e){return t.fetchData()}},model:{value:t.selectedPaymentMethod,callback:function(e){t.selectedPaymentMethod=e},expression:"selectedPaymentMethod"}})],1),e(n["a"],[e(f["a"],{attrs:{items:t.sales,dense:"","item-text":"name","item-value":"id",label:"ເລືອກເຊວທີ່ກ່ຽວຂ້ອງ",outlined:""},model:{value:t.selectedSale,callback:function(e){t.selectedSale=e},expression:"selectedSale"}})],1),e(n["a"],[e(v["a"],{attrs:{color:"green",dark:""},on:{click:t.handleExport}},[t._v(" Export ")])],1)],1),e(o["a"],[e(n["a"],[e(a["a"],{attrs:{outlined:""}},[e(i["c"],[t._v("ລວມທັງໝົດ")]),e(i["b"],[e("span",{staticClass:"text-subtitle-1 mt-2"},[t._v("ທີ່ລູກຄ້າຈ່າຍແລ້ວ")]),e("RowSection",{attrs:{cards:t.sectionSuccess}}),e("span",{staticClass:"text-subtitle-1 mt-2"},[t._v("ທີ່ລູກຄ້າຍັງບໍ່ທັນຈ່າຍ")]),e("RowSection",{attrs:{cards:t.sectionPending}})],1)],1)],1)],1),e(o["a"],[e(n["a"],[e(a["a"],{attrs:{outlined:""}},[e(i["c"],[t._v("ຕາມປະເພດບິນ")]),e(i["b"],[e(L["a"],{scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",[t._v("ປະເພດບິນ")]),t._l(t.detailStatuses,(function(s){return e("th",{key:s.text,staticClass:"text-left"},[e(b["a"],{attrs:{color:t.getBgColorFunc(s.text),dark:""}},[t._v(" "+t._s(s.text)+" ")])],1)}))],2)]),e("tbody",t._l(t.billings.billingable,(function(s){return e("tr",{key:s.display_type},[e("td",[e("a",{attrs:{href:"#"},on:{click:function(e){return t.openRoute({customer_type:"company"})}}},[e("span",{staticClass:"font-weight-medium"},[t._v(t._s(s.display_type_la))]),e("span",{staticClass:"font-weight-medium text-caption"},[t._v(" "+t._s(` (${t.formatNumber(s.count_billing)} ບິນ)`)+" ")])])]),t._l(s.total,(function(s){return e("td",{key:s.status},[e("a",{attrs:{href:"#"},on:{click:function(e){return t.openRoute({customer_type:"company",tab:s.status})}}},[e("span",{staticClass:"font-weight-medium"},[t._v(" "+t._s(t.formatNumber(s.total))+" ")]),e("span",{staticClass:"font-weight-medium text-caption"},[t._v(" "+t._s(` (${t.formatNumber(s.count_billing)} ບິນ)`)+" ")])])])}))],2)})),0)]},proxy:!0}])})],1)],1)],1)],1),e(o["a"],[e(n["a"],[e(a["a"],{attrs:{outlined:""}},[e(i["c"],[t._v("ແຍກຈາກເຊວ")]),e(i["b"],[e(o["a"],[e(n["a"],[e(g["a"],{attrs:{outlined:"",color:"purple"}},[e(o["a"],[e(n["a"],{on:{click:function(e){return t.changeSaleMode("sale")}}},[e("span",{staticClass:"text-title mt-2 font-weight-bold"},[t._v("ບິນທີ່ເປັນຂອງເຊວ")]),e("RowSection",{attrs:{cards:t.sectionSale}})],1),e(n["a"],{on:{click:function(e){return t.changeSaleMode("sale_inactive")}}},[e("span",{staticClass:"text-title mt-2 font-weight-bold"},[t._v("ຊະເພາະ (inactive)")]),e("RowSection",{attrs:{cards:t.sectionSaleInactive}})],1)],1)],1)],1),e(n["a"],{attrs:{cols:"4"},on:{click:function(e){return t.changeSaleMode("not_sale")}}},[e("span",{staticClass:"text-title mt-2"},[t._v("ບິນທີ່ບໍ່ເປັນຂອງເຊວ")]),e("RowSection",{attrs:{cards:t.sectionNotSale}})],1)],1)],1)],1)],1)],1),e(o["a"],[e(n["a"],[e(a["a"],{attrs:{outlined:""}},[e(i["c"],[t._v("ຕາມປະເພດບໍລິການ")]),e(i["b"],[e(L["a"],{scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",[t._v("ປະເພດບໍລິການ")]),t._l(t.detailStatuses,(function(s){return e("th",{key:s.text,staticClass:"text-left"},[e(b["a"],{attrs:{color:t.getBgColorFunc(s.text),dark:""}},[t._v(" "+t._s(s.text)+" ")])],1)}))],2)]),e("tbody",t._l(t.summaryDetails,(function(s){return e("tr",{key:s.cost_by},[e("td",[e("span",{staticClass:"font-weight-medium"},[t._v(t._s(s.cost_by))]),e("span",{staticClass:"font-weight-medium text-caption"},[t._v(" "+t._s(` (${t.formatNumber(s.count_billing)} ບິນ)`)+" ")])]),t._l(t.detailStatuses,(function(a){return e("td",{key:a.text},[e("span",{staticClass:"font-weight-medium"},[t._v(" "+t._s(t.formatNumber(s[a.text].total))+" ")]),e("span",{staticClass:"font-weight-medium text-caption"},[t._v(" "+t._s(` (${t.formatNumber(s[a.text].count_billing)} ບິນ)`)+" ")])])}))],2)})),0)]},proxy:!0}])})],1)],1)],1)],1),e(o["a"],[e(n["a"],[e(a["a"],{attrs:{outlined:""}},[e(i["c"],[t._v("ຕາມບ້ານ ("+t._s(t.billings.villages?t.billings.villages.length:0)+")")]),e(i["b"],[e(L["a"],{scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",[t._v("ບ້ານ")]),t._l(t.detailStatuses,(function(s){return e("th",{key:s.text,staticClass:"text-left"},[e(b["a"],{attrs:{color:t.getBgColorFunc(s.text),dark:""}},[t._v(" "+t._s(s.text)+" ")])],1)}))],2)]),e("tbody",t._l(t.billings.villages,(function(s){return e("tr",{key:s.display_type},[e("td",[e("span",{staticClass:"font-weight-medium"},[t._v(t._s(s.village_name))]),e("span",{staticClass:"font-weight-medium text-caption"},[t._v(" "+t._s(` (${t.formatNumber(s.count_billing)} ບິນ)`)+" ")])]),t._l(s.total,(function(s){return e("td",{key:s.status},[e("span",{staticClass:"font-weight-medium"},[t._v(" "+t._s(t.formatNumber(s.total))+" ")]),e("span",{staticClass:"font-weight-medium text-caption"},[t._v(" "+t._s(` (${t.formatNumber(s.count_billing)} ບິນ)`)+" ")])])}))],2)})),0)]},proxy:!0}])})],1)],1)],1)],1),e(o["a"],[e(n["a"],[e(a["a"],{attrs:{outlined:""}},[e(i["c"],[e(o["a"],[e(n["a"],[t._v("ລາຍການບິນທັງໝົດ "),e("strong",[t._v(t._s(t.sale_mode?"sale"==t.sale_mode?"ທີ່ເປັນຂອງເຊວ":"ທີ່ບໍ່ເປັນຂອງເຊວ":""))])]),e(n["a"],[e(m["a"],{attrs:{"append-icon":"mdi-magnify","hide-details":"",placeholder:"ຊື່ຫົວບິນ, ລູກຄ້າ...","single-line":""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetchData.apply(null,arguments)}},model:{value:t.billingListsearch,callback:function(e){t.billingListsearch=e},expression:"billingListsearch"}})],1)],1)],1),e(i["b"],[e(o["a"],[e(n["a"],[e(x["a"],{attrs:{headers:t.billingListHeader,items:t.billings.data.data,"items-per-page":100,"hide-default-footer":""},scopedSlots:t._u([{key:"item.status",fn:function({item:s}){return[e(b["a"],{attrs:{color:t.getBgColorFunc(s.status),dark:""}},[t._v(" "+t._s(t.getLaoStatusFunc(s.status))+" ")])]}},{key:"item.total",fn:function({item:e}){return[t._v(" "+t._s(t.formatNumber(e.total))+" ")]}},{key:"item.paided_by_user.full_name",fn:function({item:s}){return[s.paided_by_user?e("p",{class:s.paided_by_user&&s.paided_by_user.roles&&s.paided_by_user.roles.length?"":"text-decoration-line-through"},[t._v(" "+t._s(s.paided_by_user.full_name)+" ")]):t._e()]}},{key:"item.user.customer.cost_by",fn:function({item:e}){return[t._v(" "+t._s(t.getLaoCompanyCostByFunc(e.user.customer.cost_by))+" ")]}},{key:"item.custom_type",fn:function({item:s}){return["home"==t.customerType(s)?e("span",[t._v("ຄົວເຮືອນ")]):t._e(),"company"==t.customerType(s)?e("span",[t._v("ທຸລະກິດ")]):t._e(),t.customerType(s)?t._e():e("span",[t._v("ທົ່ວໄປ")])]}},{key:"item.action",fn:function({item:s}){return[e(v["a"],{staticClass:"btn elevation-0",attrs:{color:"info",small:""},on:{click:function(e){return t.ViewInvoice(s.id)}}},[e(S["a"],{staticClass:"mr-1",attrs:{small:""}},[t._v(" mdi-eye ")])],1)]}}])})],1)],1),e(o["a"],[e(n["a"],[e(I,{staticClass:"my-4",attrs:{length:t.billings.data.pagination.total_pages},model:{value:t.current_page,callback:function(e){t.current_page=e},expression:"current_page"}})],1)],1)],1)],1)],1)],1)],1)},H=[],G={name:"ReportBillingType",title(){return"Vientiane Waste Co-Dev|Report Invoice"},components:{RowSection:T["a"]},data(){return{loading:!1,sale_mode:"",paymentMethods:P["f"],selectedPaymentMethod:"",billingListsearch:"",exportMode:"",start_date:""+(new Date).toISOString().substr(0,10),end_date:"",start_menu:!1,end_menu:!1,villages:[],selectedVillage:"",districts:[],selectedDistrict:null,costByList:V["c"],selectedCostBy:"",selectedSale:null,salesData:[],current_page:1,billings:{summary:{count_billing:0,total:[]},villages:[],billingable:[],details:[],data:{data:[],pagination:{total:0,count:0,per_page:100,current_page:null,total_pages:0}}},selectedBillDate:"paided_at",billingListHeader:[{text:"ໄອດີ",value:"billing_display_id"},{text:"ຊື່ຫົວບິນ",align:"start",value:"content",width:"150px"},{text:"ສະຖານະ",value:"status"},{text:"ປະເພດການຈ່າຍ",value:"payment_method_la"},{text:"ຜູ້ຈ່າຍ",value:"paided_by_user.full_name"},{text:"ປະເພດບໍລິການ",value:"user.customer.cost_by"},{text:"ຈຳນວນ",value:"total"},{text:"ລູກຄ້າ",value:"display_customer_name"},{text:"ບ້ານ",value:"display_customer_village",width:"100px"},{text:"ເມືອງ",value:"display_customer_district"},{text:"action",value:"action"}],lastMonthBill:localStorage.getItem("lastMonthBill"),lastMonthBillPaid:localStorage.getItem("lastMonthBillPaid")}},computed:{lastMonthCreated(){return""},lastMonthBillCreated(){return""},billDates(){return V["a"]},sales(){const t=[];for(const e of this.salesData){let s="";e.name&&(s+=e.name+" "),e.phone&&(s+=e.phone+" "),e.emp_name&&(s+=e.emp_name+" "),e.emp_surname&&(s+=e.emp_surname+" "),e.emp_card_id&&(s+=e.emp_card_id),t.push({name:s,id:e.id})}return t},villageList(){return this.selectedDistrict?this.selectedDistrict.villages:[]},summaryDetails(){const t=[];for(const e of this.billings.details){const s={cost_by:e.cost_by_la,count_billing:e.count_billing};for(const t of e.total)s[t.status_la]={count_billing:t.count_billing,total:t.total};t.push(s)}return t},detailStatuses(){const t=[];if(this.billings.summary&&this.billings.summary.total.length)for(const e of this.billings.summary.total)t.push({text:e.status_la,value:e.total});return t},headers(){let t=[{text:"ປະເພດບິນ",align:"start",value:"cost_by_la"}];return this.detailStatuses.length&&(t=[t,...this.detailStatuses]),t},defaultStatus(){return{status:"",status_la:"",total:0,count_billing:0,bg_color:""}},sectionSuccess(){return[this.successStatus,this.toConfirmPaymentStatus,this.rejectedStatus]},sectionSale(){let t=this.defaultStatus;return this.billings.sum_sale&&this.billings.sum_sale.total&&(t=this.billings.sum_sale.total.find(t=>"success"==t.status)),[{...t,bg_color:"teal"}]},sectionSaleInactive(){let t=this.defaultStatus;return this.billings.sum_inactive_sale&&this.billings.sum_inactive_sale.total&&(t=this.billings.sum_inactive_sale.total.find(t=>"success"==t.status)),[{...t,bg_color:"indigo"}]},sectionNotSale(){let t=this.defaultStatus;return this.billings.sum_not_sale&&this.billings.sum_not_sale.total&&(t=this.billings.sum_not_sale.total.find(t=>"success"==t.status)),[{...t,bg_color:"teal darken-4"}]},sectionPending(){return[this.approvedStatus,this.createdStatus]},successStatus(){return this.getCard("success")},createdStatus(){return this.getCard("created")},cancelStatus(){return this.getCard("cancel")},rejectedStatus(){return this.getCard("rejected")},toConfirmPaymentStatus(){return this.getCard("to_confirm_payment")},approvedStatus(){return this.getCard("approved")}},watch:{lastMonthCreated(){this.fetchData()},lastMonthBillCreated(){this.fetchData()},billDates(){this.fetchData()},selectedDistrict(t,e){e!=t&&(this.selectedVillage=""),this.fetchData()},selectedVillage(){this.fetchData()},exportMode(){this.fetchData()},selectedBillDate(){(this.start_date||this.end_date)&&this.fetchData()},selectedSale(){this.fetchData()},current_page(){this.fetchData(this.current_page)},selectedCostBy(){this.fetchData()}},created(){this.fetchDistrict(),this.fetchData(),this.fetchSale()},methods:{changeSaleMode(t){this.sale_mode=t,this.fetchData()},handleExport(){this.exportMode="excel"},customerType(t){return!(!t.user||!t.user.customer)&&(!!t.user.customer.customer_type&&t.user.customer.customer_type)},async fetchDistrict(){try{const t=await this.$axios.get("info/district",{params:{province_id:1}});this.districts=t.data.data}catch(t){console.log(t)}},fetchData(t=1){this.start_menu=!1,this.end_menu=!1;const e=[{per_page:100},{page:t},{sale_id:this.selectedSale},{payment_method:this.selectedPaymentMethod},{date_method:this.selectedBillDate},{start_date:this.start_date},{end_date:this.end_date},{download:this.exportMode},{created_month:this.lastMonthCreated},{bill_month:this.lastMonthBillCreated},{without_customer_activity:!0},{without_month_info:!0},{sale_mode:this.sale_mode},{cost_by:this.selectedCostBy}];this.selectedVillage?e.push({village_id:this.selectedVillage}):this.selectedDistrict&&e.push({district_id:this.selectedDistrict}),this.$store.commit("Loading_State",!0),this.$axios.get("v2/report-billing-company",{params:Object(N["a"])(e)}).then(t=>{200==t.data.code&&setTimeout(()=>{this.exportMode="",t.data.data.download_link?window.open(t.data.data.download_link):(this.billings=t.data.data,this.current_page=this.billings.data.pagination.current_page)},300)}).catch(t=>{if(t.response&&422==t.response.status){const e=t.response.data.errors;for(const[t,s]of Object.entries(e))this.server_errors[t]=s[0]}}).finally(()=>{this.$store.commit("Loading_State",!1)})},fetchSale(){this.$store.commit("Loading_State",!0),this.$axios.get("user-setting/user",{params:Object(N["a"])([{roles:["sale","sale_admin","sale_register","sale_partner","sale_editor"]},{order_by:"newest"}])}).then(t=>{200===t.data.code&&(this.salesData=t.data.data)}).catch(t=>{if(t.response&&422===t.response.status){const e=t.response.data.errors;for(const[t,s]of Object.entries(e))this.server_errors[t]=s[0]}}).finally(()=>{this.$store.commit("Loading_State",!1)})},openRoute(t=null){const e=Object(N["a"])([{created_month:this.lastMonthCreated},{bill_month:this.lastMonthBillCreated},{without_customer_activity:!0},{without_month_info:!0},{sale_mode:this.sale_mode}]),s=t?{...e,...t}:e,a=this.$router.resolve({path:"/billing",query:s});window.open(a.href,"_blank")},ViewInvoice(t){const e=this.$router.resolve({name:"billing-detail",params:{id:t}});window.open(e.href,"_blank")},getCard(t){const e=this.billings.summary.total.find(e=>e.status==t);if(e){const s=this.$router.resolve({path:"/billing",query:{tab:t,customer_type:"company"}});e.route=s,e.bg_color=Object(P["a"])(e.status)}return e||this.defaultStatus},getBgColorFunc(t){return Object(P["a"])(t)},getLaoStatusFunc(t){return Object(P["d"])(t)},getLaoCompanyCostByFunc(t){return Object(V["g"])(t)},formatNumber(t){return R(t)}}},X=G,U=(s("83dc"),Object(F["a"])(X,W,H,!1,null,null,null)),Y=U.exports,K=function(){var t=this,e=t._self._c;return e(y["a"],[e(o["a"],[e("span",{staticClass:"text-h5"},[t._v("ຄົວເຮືອນ")])]),e(o["a"],[e(n["a"],[e(f["a"],{attrs:{items:t.packageList,dense:"","item-text":"name","item-value":"id",label:"ປະເພດສັນຍາ *",outlined:"",required:""},model:{value:t.selectedPackage,callback:function(e){t.selectedPackage=e},expression:"selectedPackage"}})],1),e(n["a"],[e(f["a"],{attrs:{items:t.districts,dense:"","item-text":"name","item-value":"id",label:"District *",outlined:"",required:"","return-object":""},model:{value:t.selectedDistrict,callback:function(e){t.selectedDistrict=e},expression:"selectedDistrict"}})],1),e(n["a"],[e(f["a"],{attrs:{items:t.villageList,dense:"","item-text":"name","item-value":"id",label:"Village *",outlined:"",required:""},model:{value:t.selectedVillage,callback:function(e){t.selectedVillage=e},expression:"selectedVillage"}})],1),e(n["a"],[e(f["a"],{attrs:{items:t.billDates,clearable:"","item-text":"text","item-value":"value",label:"ເລືອກປະເພດວັນທີ",outlined:""},model:{value:t.selectedBillDate,callback:function(e){t.selectedBillDate=e},expression:"selectedBillDate"}})],1),e(n["a"],[e(r["a"],{attrs:{"close-on-content-click":!1,"nudge-right":40,"min-width":"auto","offset-y":"",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(m["a"],t._g(t._b({attrs:{dense:"",label:"ເລີ່ມວັນທີ",outlined:"",readonly:""},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}},"v-text-field",a,!1),s))]}}]),model:{value:t.start_menu,callback:function(e){t.start_menu=e},expression:"start_menu"}},[e(l["a"],{on:{input:function(e){return t.fetchData()}},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}})],1)],1),e(n["a"],[e(r["a"],{attrs:{"close-on-content-click":!1,"nudge-right":40,"min-width":"auto","offset-y":"",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(m["a"],t._g(t._b({attrs:{dense:"",label:"ຫາວັນທີ",outlined:"",readonly:""},model:{value:t.end_date,callback:function(e){t.end_date=e},expression:"end_date"}},"v-text-field",a,!1),s))]}}]),model:{value:t.end_menu,callback:function(e){t.end_menu=e},expression:"end_menu"}},[e(l["a"],{on:{input:function(e){return t.fetchData()}},model:{value:t.end_date,callback:function(e){t.end_date=e},expression:"end_date"}})],1)],1),e(n["a"],[e(M["a"],{attrs:{items:t.paymentMethods,dense:"","item-text":"text","item-value":"value",label:"ເລືອກປະເພດການຈ່າຍ",outlined:""},on:{change:function(e){return t.fetchData()}},model:{value:t.selectedPaymentMethod,callback:function(e){t.selectedPaymentMethod=e},expression:"selectedPaymentMethod"}})],1),e(n["a"],[e(f["a"],{attrs:{items:t.sales,dense:"","item-text":"name","item-value":"id",label:"ເລືອກເຊວທີ່ກ່ຽວຂ້ອງ",outlined:""},model:{value:t.selectedSale,callback:function(e){t.selectedSale=e},expression:"selectedSale"}})],1),e(n["a"],[e(v["a"],{attrs:{color:"green",dark:""},on:{click:t.handleExport}},[t._v(" Export ")])],1)],1),e(o["a"],[e(n["a"],[e(a["a"],{attrs:{outlined:""}},[e(i["c"],[t._v("ລວມທັງໝົດ")]),e(i["b"],[e("span",{staticClass:"text-subtitle-1 mt-2"},[t._v("ທີ່ລູກຄ້າຈ່າຍແລ້ວ")]),e("RowSection",{attrs:{cards:t.sectionSuccess}}),e("span",{staticClass:"text-subtitle-1 mt-2"},[t._v("ທີ່ລູກຄ້າຍັງບໍ່ທັນຈ່າຍ")]),e("RowSection",{attrs:{cards:t.sectionPending}})],1)],1)],1)],1),t.billings.summary&&t.billings.summary.total.length?e(o["a"],[e(n["a"],[e(a["a"],{attrs:{outlined:""}},[e(i["c"],[t._v("ຕາມປະເພດບິນ")]),e(i["b"],[e(L["a"],{scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",[t._v("ປະເພດບິນ")]),t._l(t.billings.summary.total,(function(s){return e("th",{key:s.status,staticClass:"text-left"},[e(b["a"],{attrs:{color:t.getBgColorFunc(s.status),dark:""}},[t._v(" "+t._s(s.status_la)+" ")])],1)}))],2)]),e("tbody",t._l(t.billings.billingable,(function(s){return e("tr",{key:s.display_type},[e("td",[e("a",{attrs:{href:"#"},on:{click:function(e){return t.openRoute({customer_type:"home",billingable_type:s.display_type})}}},[e("span",{staticClass:"font-weight-medium"},[t._v(t._s(s.display_type_la))]),e("span",{staticClass:"font-weight-medium text-caption"},[t._v(" "+t._s(` (${t.formatNumber(s.count_billing)} ບິນ)`)+" ")])])]),t._l(s.total,(function(a){return e("td",{key:a.status},[e("a",{attrs:{href:"#"},on:{click:function(e){return t.openRoute({customer_type:"home",billingable_type:s.display_type,tab:a.status})}}},[e("span",{staticClass:"font-weight-medium"},[t._v(" "+t._s(t.formatNumber(a.total))+" ")]),e("span",{staticClass:"font-weight-medium text-caption"},[t._v(" "+t._s(` (${t.formatNumber(a.count_billing)} ບິນ)`)+" ")])])])}))],2)})),0)]},proxy:!0}],null,!1,2151704443)})],1)],1)],1)],1):t._e(),e(o["a"],[e(n["a"],[e(a["a"],{attrs:{outlined:""}},[e(i["c"],[t._v("ແຍກຈາກເຊວ")]),e(i["b"],[e(o["a"],[e(n["a"],[e(g["a"],{attrs:{outlined:"",color:"purple"}},[e(o["a"],[e(n["a"],{on:{click:function(e){return t.changeSaleMode("sale")}}},[e("span",{staticClass:"text-title mt-2 font-weight-bold"},[t._v("ບິນທີ່ເປັນຂອງເຊວ")]),e("RowSection",{attrs:{cards:t.sectionSale}})],1),e(n["a"],{on:{click:function(e){return t.changeSaleMode("sale_inactive")}}},[e("span",{staticClass:"text-title mt-2 font-weight-bold"},[t._v("ຊະເພາະ (inactive)")]),e("RowSection",{attrs:{cards:t.sectionSaleInactive}})],1)],1)],1)],1),e(n["a"],{attrs:{cols:"4"},on:{click:function(e){return t.changeSaleMode("not_sale")}}},[e("span",{staticClass:"text-title mt-2"},[t._v("ບິນທີ່ບໍ່ເປັນຂອງເຊວ")]),e("RowSection",{attrs:{cards:t.sectionNotSale}})],1)],1)],1)],1)],1)],1),t.billings.summary&&t.billings.summary.total.length?e(o["a"],[e(n["a"],[e(a["a"],{attrs:{outlined:""}},[e(i["c"],[t._v(" ຕາມບ້ານ ("+t._s(t.billings.villages?t.billings.villages.length:0)+") ")]),e(i["b"],[e(L["a"],{scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",[t._v("ບ້ານ")]),t._l(t.billings.summary.total,(function(s){return e("th",{key:s.text,staticClass:"text-left"},[e(b["a"],{attrs:{color:t.getBgColorFunc(s.status),dark:""}},[t._v(" "+t._s(s.status_la)+" ")])],1)}))],2)]),e("tbody",t._l(t.billings.villages,(function(s){return e("tr",{key:s.display_type},[e("td",[e("span",{staticClass:"font-weight-medium"},[t._v(t._s(s.village_name))]),e("span",{staticClass:"font-weight-medium text-caption"},[t._v(" "+t._s(` (${t.formatNumber(s.count_billing)} ບິນ)`)+" ")])]),t._l(s.total,(function(s){return e("td",{key:s.status},[e("span",{staticClass:"font-weight-medium"},[t._v(" "+t._s(t.formatNumber(s.total))+" ")]),e("span",{staticClass:"font-weight-medium text-caption"},[t._v(" "+t._s(` (${t.formatNumber(s.count_billing)} ບິນ)`)+" ")])])}))],2)})),0)]},proxy:!0}],null,!1,923025705)})],1)],1)],1)],1):t._e(),e(o["a"],[e(n["a"],[e(a["a"],{attrs:{outlined:""}},[e(i["c"],[e(o["a"],[e(n["a"],[t._v(" ລາຍການບິນທັງໝົດ "),e("strong",[t._v(t._s(t.sale_mode?"sale"==t.sale_mode?"ທີ່ເປັນຂອງເຊວ":"ທີ່ບໍ່ເປັນຂອງເຊວ":""))])]),e(n["a"],[e(m["a"],{attrs:{"append-icon":"mdi-magnify","hide-details":"",placeholder:"ຊື່ຫົວບິນ, ລູກຄ້າ...","single-line":""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetchData.apply(null,arguments)}},model:{value:t.billingListsearch,callback:function(e){t.billingListsearch=e},expression:"billingListsearch"}})],1)],1)],1),e(i["b"],[e(o["a"],[e(n["a"],[e(x["a"],{attrs:{headers:t.billingListHeader,items:t.billings.data.data,"items-per-page":100,"hide-default-footer":""},scopedSlots:t._u([{key:"item.status",fn:function({item:s}){return[e(b["a"],{attrs:{color:t.getBgColorFunc(s.status),dark:""}},[t._v(" "+t._s(t.getLaoStatusFunc(s.status))+" ")])]}},{key:"item.total",fn:function({item:e}){return[t._v(" "+t._s(t.formatNumber(e.total))+" ")]}},{key:"item.paided_by_user.full_name",fn:function({item:s}){return[s.paided_by_user?e("p",{class:s.paided_by_user&&s.paided_by_user.roles&&s.paided_by_user.roles.length?"":"text-decoration-line-through"},[t._v(" "+t._s(s.paided_by_user.full_name)+" ")]):t._e()]}},{key:"item.user.customer.package",fn:function({item:e}){return[t._v(" "+t._s(e.user.customer.package?""+e.user.customer.package.name:"")+" ")]}},{key:"item.custom_type",fn:function({item:s}){return["home"==t.customerType(s)?e("span",[t._v("ຄົວເຮືອນ")]):t._e(),"company"==t.customerType(s)?e("span",[t._v("ທຸລະກິດ")]):t._e(),t.customerType(s)?t._e():e("span",[t._v("ທົ່ວໄປ")])]}},{key:"item.action",fn:function({item:s}){return[e(v["a"],{staticClass:"btn elevation-0",attrs:{color:"info",small:""},on:{click:function(e){return t.ViewInvoice(s.id)}}},[e(S["a"],{staticClass:"mr-1",attrs:{small:""}},[t._v(" mdi-eye ")])],1)]}}])})],1)],1),e(o["a"],[e(n["a"],[e(I,{staticClass:"my-4",attrs:{length:t.billings.data.pagination.total_pages},model:{value:t.current_page,callback:function(e){t.current_page=e},expression:"current_page"}})],1)],1)],1)],1)],1)],1)],1)},J=[],Q={name:"ReportBillingType",title(){return"Vientiane Waste Co-Dev|Report Invoice"},components:{RowSection:T["a"]},data(){return{loading:!1,sale_mode:"",paymentMethods:P["f"],selectedPaymentMethod:"",billingListsearch:"",exportMode:"",start_date:""+(new Date).toISOString().substr(0,10),end_date:"",start_menu:!1,end_menu:!1,villages:[],selectedVillage:"",districts:[],selectedDistrict:null,packageList:[],selectedPackage:"",selectedSale:null,salesData:[],current_page:1,billings:{summary:{count_billing:0,total:[]},villages:[],billingable:[],details:[],data:{data:[],pagination:{total:0,count:0,per_page:100,current_page:null,total_pages:0}}},selectedBillDate:"paided_at",billingListHeader:[{text:"ໄອດີ",value:"billing_display_id"},{text:"ຊື່ຫົວບິນ",align:"start",value:"content",width:"150px"},{text:"ສະຖານະ",value:"status"},{text:"ປະເພດການຈ່າຍ",value:"payment_method_la"},{text:"ຜູ້ຈ່າຍ",value:"paided_by_user.full_name"},{text:"ປະເພດສັນຍາ",value:"user.customer.package"},{text:"ຈຳນວນ",value:"total"},{text:"ລູກຄ້າ",value:"display_customer_name"},{text:"ບ້ານ",value:"display_customer_village",width:"100px"},{text:"ເມືອງ",value:"display_customer_district"},{text:"action",value:"action"}],lastMonthBill:localStorage.getItem("lastMonthBill"),lastMonthBillPaid:localStorage.getItem("lastMonthBillPaid")}},computed:{lastMonthCreated(){return this.$store.getters["auth/getLastMonthBill"]},lastMonthBillCreated(){return this.$store.getters["auth/getLastMonthBillPaid"]},billDates(){return V["a"]},sales(){const t=[];for(const e of this.salesData){let s="";e.name&&(s+=e.name+" "),e.phone&&(s+=e.phone+" "),e.emp_name&&(s+=e.emp_name+" "),e.emp_surname&&(s+=e.emp_surname+" "),e.emp_card_id&&(s+=e.emp_card_id),t.push({name:s,id:e.id})}return t},villageList(){return this.selectedDistrict?this.selectedDistrict.villages:[]},summaryDetails(){const t=[];for(const e of this.billings.details){const s={package_name:e.package_name,count_billing:e.count_billing};for(const t of e.total)s[t.status_la]={count_billing:t.count_billing,total:t.total};t.push(s)}return t},detailStatuses(){const t=[];if(this.summaryDetails.length)for(const[e,s]of Object.entries(this.summaryDetails[0]))void 0!==s.count_billing&&t.push({text:e,value:e+".total"});return t},headers(){let t=[{text:"ປະເພດບິນ",align:"start",value:"package_name"}];return this.detailStatuses.length&&(t=[t,...this.detailStatuses]),t},defaultStatus(){return{status:"",status_la:"",total:0,count_billing:0,bg_color:""}},sectionSuccess(){return[this.successStatus,this.toConfirmPaymentStatus,this.rejectedStatus]},sectionSale(){let t=this.defaultStatus;return this.billings.sum_sale&&this.billings.sum_sale.length&&(t=this.billings.sum_sale.find(t=>"by_sale"==t.display_type)),[{...t,title:"ຈ່າຍແລ້ວ ກວດສອບສຳເລັດ",bg_color:"teal"}]},sectionSaleInactive(){const t=this.defaultStatus;return[{...t,title:"ຈ່າຍແລ້ວ ກວດສອບສຳເລັດ",bg_color:"indigo"}]},sectionNotSale(){let t=this.defaultStatus;return this.billings.sum_sale&&this.billings.sum_sale.length&&(t=this.billings.sum_sale.find(t=>"by_not_sale"==t.display_type)),[{...t,bg_color:"teal darken-4"}]},sectionPending(){return[this.approvedStatus,this.createdStatus]},successStatus(){return this.getCard("success")},createdStatus(){return this.getCard("created")},cancelStatus(){return this.getCard("cancel")},rejectedStatus(){return this.getCard("rejected")},toConfirmPaymentStatus(){return this.getCard("to_confirm_payment")},approvedStatus(){return this.getCard("approved")}},watch:{lastMonthCreated(){this.fetchData()},lastMonthBillCreated(){this.fetchData()},billDates(){this.fetchData()},selectedDistrict(t,e){e!=t&&(this.selectedVillage=""),this.fetchData()},selectedVillage(){this.fetchData()},exportMode(){this.fetchData()},selectedBillDate(){(this.start_date||this.end_date)&&this.fetchData()},selectedSale(){this.fetchData()},current_page(){this.fetchData(this.current_page)},selectedPackage(){this.fetchData()}},created(){this.fetchDistrict(),this.fetchPackage(),this.fetchData(),this.fetchSale()},methods:{openRoute(t=null){const e=Object(N["a"])([{created_month:this.lastMonthCreated},{bill_month:this.lastMonthBillCreated},{without_customer_activity:!0},{without_month_info:!0},{sale_mode:this.sale_mode}]),s=t?{...e,...t}:e,a=this.$router.resolve({path:"/billing",query:s});window.open(a.href,"_blank")},changeSaleMode(t){this.sale_mode=t,this.fetchData()},handleExport(){this.exportMode="excel"},customerType(t){return!(!t.user||!t.user.customer)&&(!!t.user.customer.customer_type&&t.user.customer.customer_type)},async fetchDistrict(){try{const t=await this.$axios.get("info/district",{params:{province_id:1}});this.districts=t.data.data}catch(t){console.log(t)}},async fetchPackage(){try{const t=await this.$axios.get("all-package");this.packageList=t.data.data}catch(t){console.log(t)}},fetchData(t=1){this.start_menu=!1,this.end_menu=!1;const e=[{per_page:100},{page:t},{without_month_info:!0},{without_billing_summary:!0},{sale_id:this.selectedSale},{payment_method:this.selectedPaymentMethod},{date_method:this.selectedBillDate},{start_date:this.start_date},{end_date:this.end_date},{download:this.exportMode},{created_month:this.lastMonthCreated},{bill_month:this.lastMonthBillCreated},{without_customer_activity:!0},{without_month_info:!0},{sale_mode:this.sale_mode},{package_id:this.selectedPackage}];this.selectedVillage?e.push({village_id:this.selectedVillage}):this.selectedDistrict&&e.push({district_id:this.selectedDistrict.id}),this.$store.commit("Loading_State",!0),this.$axios.get("v2/report-billing-home",{params:Object(N["a"])(e)}).then(t=>{200==t.data.code&&setTimeout(()=>{this.$store.commit("Loading_State",!1),this.exportMode="",t.data.data.download_link?window.open(t.data.data.download_link):(this.billings=t.data.data,this.billings.data.pagination.current_page)},300)}).catch(t=>{if(this.$store.commit("Loading_State",!1),t.response&&422==t.response.status){const e=t.response.data.errors;for(const[t,s]of Object.entries(e))this.server_errors[t]=s[0]}})},fetchSale(){this.$store.commit("Loading_State",!0),this.$axios.get("user-setting/user",{params:Object(N["a"])([{roles:["sale","sale_admin","sale_register","sale_partner","sale_editor"]},{order_by:"newest"}])}).then(t=>{200===t.data.code&&(this.$store.commit("Loading_State",!1),this.$store.commit("Loading_State",!1),this.salesData=t.data.data)}).catch(t=>{if(this.$store.commit("Loading_State",!1),t.response&&422===t.response.status){const e=t.response.data.errors;for(const[t,s]of Object.entries(e))this.server_errors[t]=s[0]}})},ViewInvoice(t){const e=this.$router.resolve({name:"billing-detail",params:{id:t}});window.open(e.href,"_blank")},getCard(t){const e=this.billings.summary.total.find(e=>e.status==t);if(e){const s=this.$router.resolve({path:"/billing",query:{tab:t}});e.route=s,e.bg_color=Object(P["a"])(e.status)}return e||this.defaultStatus},getBgColorFunc(t){return Object(P["a"])(t)},getLaoStatusFunc(t){return Object(P["d"])(t)},getLaoCompanyCostByFunc(t){return Object(V["g"])(t)},formatNumber(t){return R(t)}}},Z=Q,tt=(s("ccb0"),Object(F["a"])(Z,K,J,!1,null,null,null)),et=tt.exports,st=function(){var t=this,e=t._self._c;return e(y["a"],[e(o["a"],[e("span",{staticClass:"text-h5"},[t._v("ຖ້ຽວພິເສດ")])]),e(o["a"],[e(n["a"],[e(f["a"],{attrs:{items:t.districts,dense:"","item-text":"name","item-value":"id",label:"District *",outlined:"",required:"","return-object":""},model:{value:t.selectedDistrict,callback:function(e){t.selectedDistrict=e},expression:"selectedDistrict"}})],1),e(n["a"],[e(f["a"],{attrs:{items:t.villageList,dense:"","item-text":"name","item-value":"id",label:"Village *",outlined:"",required:""},model:{value:t.selectedVillage,callback:function(e){t.selectedVillage=e},expression:"selectedVillage"}})],1),e(n["a"],[e(f["a"],{attrs:{items:t.billDates,clearable:"","item-text":"text","item-value":"value",label:"ເລືອກປະເພດວັນທີ",outlined:""},model:{value:t.selectedBillDate,callback:function(e){t.selectedBillDate=e},expression:"selectedBillDate"}})],1),e(n["a"],[e(r["a"],{attrs:{"close-on-content-click":!1,"nudge-right":40,"min-width":"auto","offset-y":"",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(m["a"],t._g(t._b({attrs:{dense:"",label:"ເລີ່ມວັນທີ",outlined:"",readonly:""},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}},"v-text-field",a,!1),s))]}}]),model:{value:t.start_menu,callback:function(e){t.start_menu=e},expression:"start_menu"}},[e(l["a"],{on:{input:function(e){return t.fetchData()}},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}})],1)],1),e(n["a"],[e(r["a"],{attrs:{"close-on-content-click":!1,"nudge-right":40,"min-width":"auto","offset-y":"",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(m["a"],t._g(t._b({attrs:{dense:"",label:"ຫາວັນທີ",outlined:"",readonly:""},model:{value:t.end_date,callback:function(e){t.end_date=e},expression:"end_date"}},"v-text-field",a,!1),s))]}}]),model:{value:t.end_menu,callback:function(e){t.end_menu=e},expression:"end_menu"}},[e(l["a"],{on:{input:function(e){return t.fetchData()}},model:{value:t.end_date,callback:function(e){t.end_date=e},expression:"end_date"}})],1)],1),e(n["a"],[e(M["a"],{attrs:{items:t.paymentMethods,dense:"","item-text":"text","item-value":"value",label:"ເລືອກປະເພດການຈ່າຍ",outlined:""},on:{change:function(e){return t.fetchData()}},model:{value:t.selectedPaymentMethod,callback:function(e){t.selectedPaymentMethod=e},expression:"selectedPaymentMethod"}})],1),e(n["a"],[e(f["a"],{attrs:{items:t.sales,dense:"","item-text":"name","item-value":"id",label:"ເລືອກເຊວທີ່ກ່ຽວຂ້ອງ",outlined:""},model:{value:t.selectedSale,callback:function(e){t.selectedSale=e},expression:"selectedSale"}})],1),e(n["a"],[e(v["a"],{attrs:{color:"green",dark:""},on:{click:t.handleExport}},[t._v(" Export ")])],1)],1),e(o["a"],[e(n["a"],[e(a["a"],{attrs:{outlined:""}},[e(i["c"],[t._v("ແຍກຈາກເຊວ")]),e(i["b"],[e(o["a"],[e(n["a"],{on:{click:function(e){return t.changeSaleMode("sale")}}},[e("span",{staticClass:"text-title mt-2 font-weight-bold"},[t._v("ບິນທີ່ເປັນຂອງເຊວ")]),e("RowSection",{attrs:{cards:t.sectionSale}})],1),e(n["a"],{on:{click:function(e){return t.changeSaleMode("not_sale")}}},[e("span",{staticClass:"text-title mt-2"},[t._v("ບິນທີ່ບໍ່ເປັນຂອງເຊວ")]),e("RowSection",{attrs:{cards:t.sectionNotSale}})],1)],1)],1)],1)],1)],1),e(o["a"],[e(n["a"],[e(a["a"],{attrs:{outlined:""}},[e(i["c"],[t._v("ລວມທັງໝົດ")]),e(i["b"],[e("span",{staticClass:"text-subtitle-1 mt-2"},[t._v("ທີ່ລູກຄ້າຈ່າຍແລ້ວ")]),e("RowSection",{attrs:{cards:t.sectionSuccess}}),e("span",{staticClass:"text-subtitle-1 mt-2"},[t._v("ທີ່ລູກຄ້າຍັງບໍ່ທັນຈ່າຍ")]),e("RowSection",{attrs:{cards:t.sectionPending}})],1)],1)],1)],1),e(o["a"],[e(n["a"],[e(a["a"],{attrs:{outlined:""}},[e(i["c"],[e(o["a"],[e(n["a"],[t._v("ລາຍການບິນທັງໝົດ "),e("strong",[t._v(t._s(t.sale_mode?"sale"==t.sale_mode?"ທີ່ເປັນຂອງເຊວ":"ທີ່ບໍ່ເປັນຂອງເຊວ":""))])]),e(n["a"],[e(m["a"],{attrs:{"append-icon":"mdi-magnify","hide-details":"",placeholder:"ຊື່ຫົວບິນ, ລູກຄ້າ...","single-line":""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetchData.apply(null,arguments)}},model:{value:t.billingListsearch,callback:function(e){t.billingListsearch=e},expression:"billingListsearch"}})],1)],1)],1),e(i["b"],[e(o["a"],[e(n["a"],[e(x["a"],{attrs:{headers:t.billingListHeader,items:t.billings.data.data,"items-per-page":100,"hide-default-footer":""},scopedSlots:t._u([{key:"item.status",fn:function({item:s}){return[e(b["a"],{attrs:{color:t.getBgColorFunc(s.status),dark:""}},[t._v(" "+t._s(t.getLaoStatusFunc(s.status))+" ")])]}},{key:"item.total",fn:function({item:e}){return[t._v(" "+t._s(t.formatNumber(e.total))+" ")]}},{key:"item.paided_by_user.full_name",fn:function({item:s}){return[s.paided_by_user?e("p",{class:s.paided_by_user&&s.paided_by_user.roles&&s.paided_by_user.roles.length?"":"text-decoration-line-through"},[t._v(" "+t._s(s.paided_by_user.full_name)+" ")]):t._e()]}},{key:"item.user.customer.package",fn:function({item:e}){return[t._v(" "+t._s(""+e.user.customer.package.name)+" ")]}},{key:"item.custom_type",fn:function({item:s}){return["home"==t.customerType(s)?e("span",[t._v("ຄົວເຮືອນ")]):t._e(),"company"==t.customerType(s)?e("span",[t._v("ທຸລະກິດ")]):t._e(),t.customerType(s)?t._e():e("span",[t._v("ທົ່ວໄປ")])]}},{key:"item.action",fn:function({item:s}){return[e(v["a"],{staticClass:"btn elevation-0",attrs:{color:"info",small:""},on:{click:function(e){return t.ViewInvoice(s.id)}}},[e(S["a"],{staticClass:"mr-1",attrs:{small:""}},[t._v(" mdi-eye ")])],1)]}}])})],1)],1),e(o["a"],[e(n["a"],[e(I,{staticClass:"my-4",attrs:{length:t.billings.data.pagination.total_pages},model:{value:t.current_page,callback:function(e){t.current_page=e},expression:"current_page"}})],1)],1)],1)],1)],1)],1)],1)},at=[],it={name:"ReportBillingType",title(){return"Vientiane Waste Co-Dev|Report Invoice"},components:{RowSection:T["a"]},data(){return{loading:!1,sale_mode:"",paymentMethods:P["f"],selectedPaymentMethod:"",billingListsearch:"",exportMode:"",start_date:""+(new Date).toISOString().substr(0,10),end_date:"",start_menu:!1,end_menu:!1,villages:[],selectedVillage:"",districts:[],selectedDistrict:null,selectedSale:null,salesData:[],current_page:1,billings:{summary:[],data:{data:[],pagination:{total:0,count:0,per_page:100,current_page:null,total_pages:0}}},billingListHeader:[{text:"ໄອດີ",value:"billing_display_id"},{text:"ຊື່ຫົວບິນ",align:"start",value:"content",width:"150px"},{text:"ສະຖານະ",value:"status"},{text:"ປະເພດການຈ່າຍ",value:"payment_method_la"},{text:"ຜູ້ຈ່າຍ",value:"paided_by_user.full_name"},{text:"ຈຳນວນ",value:"total"},{text:"ລູກຄ້າ",value:"display_customer_name"},{text:"ປະເພດລູກຄ້າ",value:"custom_type",width:"100px"},{text:"ບ້ານ",value:"display_customer_village",width:"100px"},{text:"ເມືອງ",value:"display_customer_district"},{text:"action",value:"action"}],selectedBillDate:"paided_at"}},computed:{lastMonthCreated(){return""},lastMonthBillCreated(){return""},billDates(){return V["a"]},sales(){const t=[];for(const e of this.salesData){let s="";e.name&&(s+=e.name+" "),e.phone&&(s+=e.phone+" "),e.emp_name&&(s+=e.emp_name+" "),e.emp_surname&&(s+=e.emp_surname+" "),e.emp_card_id&&(s+=e.emp_card_id),t.push({name:s,id:e.id})}return t},villageList(){return this.selectedDistrict?this.selectedDistrict.villages:[]},summaryDetails(){const t=[];for(const e of this.billings.details){const s={package_name:e.package_name,count_billing:e.count_billing};for(const t of e.total)s[t.status_la]={count_billing:t.count_billing,total:t.total};t.push(s)}return t},detailStatuses(){const t=[];if(this.summaryDetails.length)for(const[e,s]of Object.entries(this.summaryDetails[0]))void 0!==s.count_billing&&t.push({text:e,value:e+".total"});return t},headers(){let t=[{text:"ປະເພດບິນ",align:"start",value:"package_name"}];return this.detailStatuses.length&&(t=[t,...this.detailStatuses]),t},defaultStatus(){return{status:"",status_la:"",total:0,count_billing:0,bg_color:""}},sectionSuccess(){return[this.successStatus,this.toConfirmPaymentStatus,this.rejectedStatus]},sectionSale(){let t=this.defaultStatus;return this.billings.sum_sale&&(t=this.billings.sum_sale.find(t=>"success"==t.status)),[{...t,bg_color:"teal"}]},sectionNotSale(){let t=this.defaultStatus;return this.billings.sum_not_sale&&(t=this.billings.sum_not_sale.find(t=>"success"==t.status)),[{...t,bg_color:"teal darken-4"}]},sectionPending(){return[this.approvedStatus,this.createdStatus]},successStatus(){return this.getCard("success")},createdStatus(){return this.getCard("created")},cancelStatus(){return this.getCard("cancel")},rejectedStatus(){return this.getCard("rejected")},toConfirmPaymentStatus(){return this.getCard("to_confirm_payment")},approvedStatus(){return this.getCard("approved")}},watch:{lastMonthCreated(){this.fetchData()},lastMonthBillCreated(){this.fetchData()},billDates(){this.fetchData()},selectedDistrict(t,e){e!=t&&(this.selectedVillage=""),this.fetchData()},selectedVillage(){this.fetchData()},exportMode(){this.fetchData()},selectedBillDate(){(this.start_date||this.end_date)&&this.fetchData()},selectedSale(){this.fetchData()},current_page(){this.fetchData(this.current_page)}},created(){this.fetchDistrict(),this.fetchData(),this.fetchSale()},methods:{changeSaleMode(t){this.sale_mode=t,this.fetchData()},handleExport(){this.exportMode="excel"},customerType(t){return!(!t.user||!t.user.customer)&&(!!t.user.customer.customer_type&&t.user.customer.customer_type)},async fetchDistrict(){try{const t=await this.$axios.get("info/district",{params:{province_id:1}});this.districts=t.data.data}catch(t){console.log(t)}},fetchData(t=1){this.start_menu=!1,this.end_menu=!1;const e=[{per_page:100},{page:t},{sale_id:this.selectedSale},{payment_method:this.selectedPaymentMethod},{date_method:this.selectedBillDate},{start_date:this.start_date},{end_date:this.end_date},{download:this.exportMode},{created_month:this.lastMonthCreated},{bill_month:this.lastMonthBillCreated},{without_customer_activity:!0},{without_month_info:!0},{sale_mode:this.sale_mode},{filter:this.billingListsearch}];this.selectedVillage?e.push({village_id:this.selectedVillage}):this.selectedDistrict&&e.push({district_id:this.selectedDistrict}),this.$store.commit("Loading_State",!0),this.$axios.get("v2/report-billing-collection-event",{params:Object(N["a"])(e)}).then(t=>{200==t.data.code&&setTimeout(()=>{this.$store.commit("Loading_State",!1),this.exportMode="",t.data.data.download_link?window.open(t.data.data.download_link):(this.billings=t.data.data,this.billings.data.pagination.current_page)},300)}).catch(t=>{if(this.$store.commit("Loading_State",!1),t.response&&422==t.response.status){const e=t.response.data.errors;for(const[t,s]of Object.entries(e))this.server_errors[t]=s[0]}})},fetchSale(){this.$store.commit("Loading_State",!0),this.$axios.get("user-setting/user",{params:Object(N["a"])([{roles:["sale","sale_admin","sale_register","sale_partner","sale_editor"]},{order_by:"newest"}])}).then(t=>{200===t.data.code&&(this.$store.commit("Loading_State",!1),this.$store.commit("Loading_State",!1),this.salesData=t.data.data)}).catch(t=>{if(this.$store.commit("Loading_State",!1),t.response&&422===t.response.status){const e=t.response.data.errors;for(const[t,s]of Object.entries(e))this.server_errors[t]=s[0]}})},ViewInvoice(t){const e=this.$router.resolve({name:"billing-detail",params:{id:t}});window.open(e.href,"_blank")},getCard(t){const e=this.billings.summary.find(e=>e.status==t);if(e){const s=this.$router.resolve({path:"/billing",query:{tab:t}});e.route=s,e.bg_color=Object(P["a"])(e.status)}return e||this.defaultStatus},getBgColorFunc(t){return Object(P["a"])(t)},getLaoStatusFunc(t){return Object(P["d"])(t)},getLaoCompanyCostByFunc(t){return Object(V["g"])(t)},formatNumber(t){return R(t)}}},nt=it,lt=(s("a412"),Object(F["a"])(nt,st,at,!1,null,null,null)),rt=lt.exports,ot=function(){var t=this,e=t._self._c;return e(y["a"],[e(o["a"],[e("span",{staticClass:"text-h5"},[t._v("ຈ່າຍລ່ວງໜ້າ")])]),e(o["a"],[e(n["a"],[e(f["a"],{attrs:{items:t.districts,dense:"","item-text":"name","item-value":"id",label:"District *",outlined:"",required:"","return-object":""},model:{value:t.selectedDistrict,callback:function(e){t.selectedDistrict=e},expression:"selectedDistrict"}})],1),e(n["a"],[e(f["a"],{attrs:{items:t.villageList,dense:"","item-text":"name","item-value":"id",label:"Village *",outlined:"",required:""},model:{value:t.selectedVillage,callback:function(e){t.selectedVillage=e},expression:"selectedVillage"}})],1),e(n["a"],[e(f["a"],{attrs:{items:t.billDates,clearable:"","item-text":"text","item-value":"value",label:"ເລືອກປະເພດວັນທີ",outlined:""},model:{value:t.selectedBillDate,callback:function(e){t.selectedBillDate=e},expression:"selectedBillDate"}})],1),e(n["a"],[e(r["a"],{attrs:{"close-on-content-click":!1,"nudge-right":40,"min-width":"auto","offset-y":"",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(m["a"],t._g(t._b({attrs:{dense:"",label:"ເລີ່ມວັນທີ",outlined:"",readonly:""},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}},"v-text-field",a,!1),s))]}}]),model:{value:t.start_menu,callback:function(e){t.start_menu=e},expression:"start_menu"}},[e(l["a"],{on:{input:function(e){return t.fetchData()}},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}})],1)],1),e(n["a"],[e(r["a"],{attrs:{"close-on-content-click":!1,"nudge-right":40,"min-width":"auto","offset-y":"",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(m["a"],t._g(t._b({attrs:{dense:"",label:"ຫາວັນທີ",outlined:"",readonly:""},model:{value:t.end_date,callback:function(e){t.end_date=e},expression:"end_date"}},"v-text-field",a,!1),s))]}}]),model:{value:t.end_menu,callback:function(e){t.end_menu=e},expression:"end_menu"}},[e(l["a"],{on:{input:function(e){return t.fetchData()}},model:{value:t.end_date,callback:function(e){t.end_date=e},expression:"end_date"}})],1)],1),e(n["a"],[e(M["a"],{attrs:{items:t.paymentMethods,dense:"","item-text":"text","item-value":"value",label:"ເລືອກປະເພດການຈ່າຍ",outlined:""},on:{change:function(e){return t.fetchData()}},model:{value:t.selectedPaymentMethod,callback:function(e){t.selectedPaymentMethod=e},expression:"selectedPaymentMethod"}})],1),e(n["a"],[e(f["a"],{attrs:{items:t.sales,dense:"","item-text":"name","item-value":"id",label:"ເລືອກເຊວທີ່ກ່ຽວຂ້ອງ",outlined:""},model:{value:t.selectedSale,callback:function(e){t.selectedSale=e},expression:"selectedSale"}})],1),e(n["a"],[e(v["a"],{attrs:{color:"green",dark:""},on:{click:t.handleExport}},[t._v(" Export ")])],1)],1),e(o["a"],[e(n["a"],[e(a["a"],{attrs:{outlined:""}},[e(i["c"],[t._v("ລວມທັງໝົດ")]),e(i["b"],[e("span",{staticClass:"text-subtitle-1 mt-2"},[t._v("ທີ່ລູກຄ້າຈ່າຍແລ້ວ")]),e("RowSection",{attrs:{cards:t.sectionSuccess}}),e("span",{staticClass:"text-subtitle-1 mt-2"},[t._v("ທີ່ລູກຄ້າຍັງບໍ່ທັນຈ່າຍ")]),e("RowSection",{attrs:{cards:t.sectionPending}})],1)],1)],1)],1),e(o["a"],[e(n["a"],[e(a["a"],{attrs:{outlined:""}},[e(i["c"],[t._v("ແຍກຈາກເຊວ")]),e(i["b"],[e(o["a"],[e(n["a"],{on:{click:function(e){return t.changeSaleMode("sale")}}},[e("span",{staticClass:"text-title mt-2 font-weight-bold"},[t._v("ບິນທີ່ເປັນຂອງເຊວ")]),e("RowSection",{attrs:{cards:t.sectionSale}})],1),e(n["a"],{on:{click:function(e){return t.changeSaleMode("not_sale")}}},[e("span",{staticClass:"text-title mt-2"},[t._v("ບິນທີ່ບໍ່ເປັນຂອງເຊວ")]),e("RowSection",{attrs:{cards:t.sectionNotSale}})],1)],1)],1)],1)],1)],1),e(o["a"],[e(n["a"],[e(a["a"],{attrs:{outlined:""}},[e(i["c"],[e(o["a"],[e(n["a"],[t._v("ລາຍການບິນທັງໝົດ "),e("strong",[t._v(t._s(t.sale_mode?"sale"==t.sale_mode?"ທີ່ເປັນຂອງເຊວ":"ທີ່ບໍ່ເປັນຂອງເຊວ":""))])]),e(n["a"],[e(m["a"],{attrs:{"append-icon":"mdi-magnify","hide-details":"",placeholder:"ຊື່ຫົວບິນ, ລູກຄ້າ...","single-line":""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetchData.apply(null,arguments)}},model:{value:t.billingListsearch,callback:function(e){t.billingListsearch=e},expression:"billingListsearch"}})],1)],1)],1),e(i["b"],[e(o["a"],[e(n["a"],[e(x["a"],{attrs:{headers:t.billingListHeader,items:t.billings.data.data,"items-per-page":100,"hide-default-footer":""},scopedSlots:t._u([{key:"item.status",fn:function({item:s}){return[e(b["a"],{attrs:{color:t.getBgColorFunc(s.status),dark:""}},[t._v(" "+t._s(t.getLaoStatusFunc(s.status))+" ")])]}},{key:"item.total",fn:function({item:e}){return[t._v(" "+t._s(t.formatNumber(e.total))+" ")]}},{key:"item.paided_by_user.full_name",fn:function({item:s}){return[s.paided_by_user?e("p",{class:s.paided_by_user&&s.paided_by_user.roles&&s.paided_by_user.roles.length?"":"text-decoration-line-through"},[t._v(" "+t._s(s.paided_by_user.full_name)+" ")]):t._e()]}},{key:"item.user.customer.package",fn:function({item:e}){return[t._v(" "+t._s(""+e.user.customer.package.name)+" ")]}},{key:"item.billingable.start_month",fn:function({item:s}){return[e(b["a"],{attrs:{color:"green",dark:""}},[t._v(" "+t._s(s.billingable.start_month)+" ")])]}},{key:"item.billingable.end_month",fn:function({item:s}){return[e(b["a"],{attrs:{color:"red",dark:""}},[t._v(" "+t._s(s.billingable.end_month)+" ")])]}},{key:"item.custom_type",fn:function({item:s}){return["home"==t.customerType(s)?e("span",[t._v("ຄົວເຮືອນ")]):t._e(),"company"==t.customerType(s)?e("span",[t._v("ທຸລະກິດ")]):t._e(),t.customerType(s)?t._e():e("span",[t._v("ທົ່ວໄປ")])]}},{key:"item.action",fn:function({item:s}){return[e(v["a"],{staticClass:"btn elevation-0",attrs:{color:"info",small:""},on:{click:function(e){return t.ViewInvoice(s.id)}}},[e(S["a"],{staticClass:"mr-1",attrs:{small:""}},[t._v(" mdi-eye ")])],1)]}}])})],1)],1),e(o["a"],[e(n["a"],[e(I,{staticClass:"my-4",attrs:{length:t.billings.data.pagination.total_pages},model:{value:t.current_page,callback:function(e){t.current_page=e},expression:"current_page"}})],1)],1)],1)],1)],1)],1)],1)},ct=[],dt={name:"ReportBillingType",title(){return"Vientiane Waste Co-Dev|Report Invoice"},components:{RowSection:T["a"]},data(){return{loading:!1,sale_mode:"",paymentMethods:P["f"],selectedPaymentMethod:"",billingListsearch:"",exportMode:"",start_date:""+(new Date).toISOString().substr(0,10),end_date:"",start_menu:!1,end_menu:!1,villages:[],selectedVillage:"",districts:[],selectedDistrict:null,selectedSale:null,salesData:[],current_page:1,billings:{summary:[],data:{data:[],pagination:{total:0,count:0,per_page:100,current_page:null,total_pages:0}}},selectedBillDate:"paided_at",billingListHeader:[{text:"ໄອດີ",value:"billing_display_id"},{text:"ຊື່ຫົວບິນ",align:"start",value:"content",width:"150px"},{text:"ສະຖານະ",value:"status"},{text:"ປະເພດການຈ່າຍ",value:"payment_method_la"},{text:"ຜູ້ຈ່າຍ",value:"paided_by_user.full_name"},{text:"ຈຳນວນ",value:"total"},{text:"ລູກຄ້າ",value:"display_customer_name"},{text:"ປະເພດລູກຄ້າ",value:"custom_type",width:"100px"},{text:"ບ້ານ",value:"display_customer_village",width:"100px"},{text:"ເມືອງ",value:"display_customer_district"},{text:"action",value:"action"}],lastMonthBill:localStorage.getItem("lastMonthBill"),lastMonthBillPaid:localStorage.getItem("lastMonthBillPaid")}},computed:{lastMonthCreated(){return""},lastMonthBillCreated(){return""},billDates(){return V["a"]},sales(){const t=[];for(const e of this.salesData){let s="";e.name&&(s+=e.name+" "),e.phone&&(s+=e.phone+" "),e.emp_name&&(s+=e.emp_name+" "),e.emp_surname&&(s+=e.emp_surname+" "),e.emp_card_id&&(s+=e.emp_card_id),t.push({name:s,id:e.id})}return t},villageList(){return this.selectedDistrict?this.selectedDistrict.villages:[]},summaryDetails(){const t=[];for(const e of this.billings.details){const s={package_name:e.package_name,count_billing:e.count_billing};for(const t of e.total)s[t.status_la]={count_billing:t.count_billing,total:t.total};t.push(s)}return t},detailStatuses(){const t=[];if(this.summaryDetails.length)for(const[e,s]of Object.entries(this.summaryDetails[0]))void 0!==s.count_billing&&t.push({text:e,value:e+".total"});return t},headers(){let t=[{text:"ປະເພດບິນ",align:"start",value:"package_name"}];return this.detailStatuses.length&&(t=[t,...this.detailStatuses]),t},defaultStatus(){return{status:"",status_la:"",total:0,count_billing:0,bg_color:""}},sectionSuccess(){return[this.successStatus,this.toConfirmPaymentStatus,this.rejectedStatus]},sectionSale(){let t=this.defaultStatus;return this.billings.sum_sale&&(t=this.billings.sum_sale.find(t=>"success"==t.status)),[{...t,bg_color:"teal"}]},sectionNotSale(){let t=this.defaultStatus;return this.billings.sum_not_sale&&(t=this.billings.sum_not_sale.find(t=>"success"==t.status)),[{...t,bg_color:"teal darken-4"}]},sectionPending(){return[this.approvedStatus,this.createdStatus]},successStatus(){return this.getCard("success")},createdStatus(){return this.getCard("created")},cancelStatus(){return this.getCard("cancel")},rejectedStatus(){return this.getCard("rejected")},toConfirmPaymentStatus(){return this.getCard("to_confirm_payment")},approvedStatus(){return this.getCard("approved")}},watch:{lastMonthCreated(){this.fetchData()},lastMonthBillCreated(){this.fetchData()},billDates(){this.fetchData()},selectedDistrict(t,e){e!=t&&(this.selectedVillage=""),this.fetchData()},selectedVillage(){this.fetchData()},exportMode(){this.fetchData()},selectedBillDate(){(this.start_date||this.end_date)&&this.fetchData()},selectedSale(){this.fetchData()},current_page(){this.fetchData(this.current_page)}},created(){this.fetchDistrict(),this.fetchData(),this.fetchSale()},methods:{changeSaleMode(t){this.sale_mode=t,this.fetchData()},handleExport(){this.exportMode="excel"},customerType(t){return!(!t.user||!t.user.customer)&&(!!t.user.customer.customer_type&&t.user.customer.customer_type)},async fetchDistrict(){try{const t=await this.$axios.get("info/district",{params:{province_id:1}});this.districts=t.data.data}catch(t){console.log(t)}},fetchData(t=1){this.start_menu=!1,this.end_menu=!1;const e=[{per_page:100},{page:t},{sale_id:this.selectedSale},{payment_method:this.selectedPaymentMethod},{date_method:this.selectedBillDate},{start_date:this.start_date},{end_date:this.end_date},{download:this.exportMode},{created_month:this.lastMonthCreated},{bill_month:this.lastMonthBillCreated},{without_customer_activity:!0},{without_month_info:!0},{sale_mode:this.sale_mode},{filter:this.billingListsearch}];this.selectedVillage?e.push({village_id:this.selectedVillage}):this.selectedDistrict&&e.push({district_id:this.selectedDistrict}),this.$store.commit("Loading_State",!0),this.$axios.get("v2/report-billing-future-invoice",{params:Object(N["a"])(e)}).then(t=>{200==t.data.code&&setTimeout(()=>{this.$store.commit("Loading_State",!1),this.exportMode="",t.data.data.download_link?window.open(t.data.data.download_link):(this.billings=t.data.data,this.billings.data.pagination.current_page)},300)}).catch(t=>{if(this.$store.commit("Loading_State",!1),t.response&&422==t.response.status){const e=t.response.data.errors;for(const[t,s]of Object.entries(e))this.server_errors[t]=s[0]}})},fetchSale(){this.$store.commit("Loading_State",!0),this.$axios.get("user-setting/user",{params:Object(N["a"])([{roles:["sale","sale_admin","sale_register","sale_partner","sale_editor"]},{order_by:"newest"}])}).then(t=>{200===t.data.code&&(this.$store.commit("Loading_State",!1),this.$store.commit("Loading_State",!1),this.salesData=t.data.data)}).catch(t=>{if(this.$store.commit("Loading_State",!1),t.response&&422===t.response.status){const e=t.response.data.errors;for(const[t,s]of Object.entries(e))this.server_errors[t]=s[0]}})},ViewInvoice(t){const e=this.$router.resolve({name:"billing-detail",params:{id:t}});window.open(e.href,"_blank")},getCard(t){const e=this.billings.summary.find(e=>e.status==t);if(e){const s=this.$router.resolve({path:"/billing",query:{tab:t}});e.route=s,e.bg_color=Object(P["a"])(e.status)}return e||this.defaultStatus},getBgColorFunc(t){return Object(P["a"])(t)},getLaoStatusFunc(t){return Object(P["d"])(t)},getLaoCompanyCostByFunc(t){return Object(V["g"])(t)},formatNumber(t){return R(t)}}},ut=dt,ht=(s("877d"),Object(F["a"])(ut,ot,ct,!1,null,null,null)),mt=ht.exports,pt=function(){var t=this,e=t._self._c;return e(y["a"],[e(o["a"],[e("span",{staticClass:"text-h5"},[t._v("ບິນຍ້ອນຫຼັງ")])]),e(o["a"],[e(n["a"],[e(f["a"],{attrs:{items:t.districts,dense:"","item-text":"name","item-value":"id",label:"District *",outlined:"",required:"","return-object":""},model:{value:t.selectedDistrict,callback:function(e){t.selectedDistrict=e},expression:"selectedDistrict"}})],1),e(n["a"],[e(f["a"],{attrs:{items:t.villageList,dense:"","item-text":"name","item-value":"id",label:"Village *",outlined:"",required:""},model:{value:t.selectedVillage,callback:function(e){t.selectedVillage=e},expression:"selectedVillage"}})],1),e(n["a"],[e(f["a"],{attrs:{items:t.billDates,clearable:"","item-text":"text","item-value":"value",label:"ເລືອກປະເພດວັນທີ",outlined:""},model:{value:t.selectedBillDate,callback:function(e){t.selectedBillDate=e},expression:"selectedBillDate"}})],1),e(n["a"],[e(r["a"],{attrs:{"close-on-content-click":!1,"nudge-right":40,"min-width":"auto","offset-y":"",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(m["a"],t._g(t._b({attrs:{dense:"",label:"ເລີ່ມວັນທີ",outlined:"",readonly:""},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}},"v-text-field",a,!1),s))]}}]),model:{value:t.start_menu,callback:function(e){t.start_menu=e},expression:"start_menu"}},[e(l["a"],{on:{input:function(e){return t.fetchData()}},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}})],1)],1),e(n["a"],[e(r["a"],{attrs:{"close-on-content-click":!1,"nudge-right":40,"min-width":"auto","offset-y":"",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(m["a"],t._g(t._b({attrs:{dense:"",label:"ຫາວັນທີ",outlined:"",readonly:""},model:{value:t.end_date,callback:function(e){t.end_date=e},expression:"end_date"}},"v-text-field",a,!1),s))]}}]),model:{value:t.end_menu,callback:function(e){t.end_menu=e},expression:"end_menu"}},[e(l["a"],{on:{input:function(e){return t.fetchData()}},model:{value:t.end_date,callback:function(e){t.end_date=e},expression:"end_date"}})],1)],1),e(n["a"],[e(M["a"],{attrs:{items:t.paymentMethods,dense:"","item-text":"text","item-value":"value",label:"ເລືອກປະເພດການຈ່າຍ",outlined:""},on:{change:function(e){return t.fetchData()}},model:{value:t.selectedPaymentMethod,callback:function(e){t.selectedPaymentMethod=e},expression:"selectedPaymentMethod"}})],1),e(n["a"],[e(f["a"],{attrs:{items:t.sales,dense:"","item-text":"name","item-value":"id",label:"ເລືອກເຊວທີ່ກ່ຽວຂ້ອງ",outlined:""},model:{value:t.selectedSale,callback:function(e){t.selectedSale=e},expression:"selectedSale"}})],1),e(n["a"],[e(v["a"],{attrs:{color:"green",dark:""},on:{click:t.handleExport}},[t._v(" Export ")])],1)],1),e(o["a"],[e(n["a"],[e(a["a"],{attrs:{outlined:""}},[e(i["c"],[t._v("ລວມທັງໝົດ")]),e(i["b"],[e("span",{staticClass:"text-subtitle-1 mt-2"},[t._v("ທີ່ລູກຄ້າຈ່າຍແລ້ວ")]),e("RowSection",{attrs:{cards:t.sectionSuccess}}),e("span",{staticClass:"text-subtitle-1 mt-2"},[t._v("ທີ່ລູກຄ້າຍັງບໍ່ທັນຈ່າຍ")]),e("RowSection",{attrs:{cards:t.sectionPending}})],1)],1)],1)],1),e(o["a"],[e(n["a"],[e(a["a"],{attrs:{outlined:""}},[e(i["c"],[t._v("ແຍກຈາກເຊວ")]),e(i["b"],[e(o["a"],[e(n["a"],{on:{click:function(e){return t.changeSaleMode("sale")}}},[e("span",{staticClass:"text-title mt-2 font-weight-bold"},[t._v("ບິນທີ່ເປັນຂອງເຊວ")]),e("RowSection",{attrs:{cards:t.sectionSale}})],1),e(n["a"],{on:{click:function(e){return t.changeSaleMode("not_sale")}}},[e("span",{staticClass:"text-title mt-2"},[t._v("ບິນທີ່ບໍ່ເປັນຂອງເຊວ")]),e("RowSection",{attrs:{cards:t.sectionNotSale}})],1)],1)],1)],1)],1)],1),e(o["a"],[e(n["a"],[e(a["a"],{attrs:{outlined:""}},[e(i["c"],[e(o["a"],[e(n["a"],[t._v("ລາຍການບິນທັງໝົດ "),e("strong",[t._v(t._s(t.sale_mode?"sale"==t.sale_mode?"ທີ່ເປັນຂອງເຊວ":"ທີ່ບໍ່ເປັນຂອງເຊວ":""))])]),e(n["a"],[e(m["a"],{attrs:{"append-icon":"mdi-magnify","hide-details":"",placeholder:"ຊື່ຫົວບິນ, ລູກຄ້າ...","single-line":""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetchData.apply(null,arguments)}},model:{value:t.billingListsearch,callback:function(e){t.billingListsearch=e},expression:"billingListsearch"}})],1)],1)],1),e(i["b"],[e(o["a"],[e(n["a"],[e(x["a"],{attrs:{headers:t.billingListHeader,items:t.billings.data.data,"items-per-page":100,"hide-default-footer":""},scopedSlots:t._u([{key:"item.status",fn:function({item:s}){return[e(b["a"],{attrs:{color:t.getBgColorFunc(s.status),dark:""}},[t._v(" "+t._s(t.getLaoStatusFunc(s.status))+" ")])]}},{key:"item.total",fn:function({item:e}){return[t._v(" "+t._s(t.formatNumber(e.total))+" ")]}},{key:"item.paided_by_user.full_name",fn:function({item:s}){return[s.paided_by_user?e("p",{class:s.paided_by_user&&s.paided_by_user.roles&&s.paided_by_user.roles.length?"":"text-decoration-line-through"},[t._v(" "+t._s(s.paided_by_user.full_name)+" ")]):t._e()]}},{key:"item.user.customer.package",fn:function({item:e}){return[t._v(" "+t._s(""+e.user.customer.package.name)+" ")]}},{key:"item.billingable.start_month",fn:function({item:s}){return[e(b["a"],{attrs:{color:"green",dark:""}},[t._v(" "+t._s(s.billingable.start_month)+" ")])]}},{key:"item.billingable.end_month",fn:function({item:s}){return[e(b["a"],{attrs:{color:"red",dark:""}},[t._v(" "+t._s(s.billingable.end_month)+" ")])]}},{key:"item.custom_type",fn:function({item:s}){return["home"==t.customerType(s)?e("span",[t._v("ຄົວເຮືອນ")]):t._e(),"company"==t.customerType(s)?e("span",[t._v("ທຸລະກິດ")]):t._e(),t.customerType(s)?t._e():e("span",[t._v("ທົ່ວໄປ")])]}},{key:"item.action",fn:function({item:s}){return[e(v["a"],{staticClass:"btn elevation-0",attrs:{color:"info",small:""},on:{click:function(e){return t.ViewInvoice(s.id)}}},[e(S["a"],{staticClass:"mr-1",attrs:{small:""}},[t._v(" mdi-eye ")])],1)]}}])})],1)],1),e(o["a"],[e(n["a"],[e(I,{staticClass:"my-4",attrs:{length:t.billings.data.pagination.total_pages},model:{value:t.current_page,callback:function(e){t.current_page=e},expression:"current_page"}})],1)],1)],1)],1)],1)],1)],1)},_t=[],gt={name:"ReportBillingType",title(){return"Vientiane Waste Co-Dev|Report Invoice"},components:{RowSection:T["a"]},data(){return{loading:!1,sale_mode:"",paymentMethods:P["f"],selectedPaymentMethod:"",billingListsearch:"",exportMode:"",start_date:""+(new Date).toISOString().substr(0,10),end_date:"",start_menu:!1,end_menu:!1,villages:[],selectedVillage:"",districts:[],selectedDistrict:null,selectedSale:null,salesData:[],current_page:1,billings:{summary:[],data:{data:[],pagination:{total:0,count:0,per_page:100,current_page:null,total_pages:0}}},selectedBillDate:"paided_at",billingListHeader:[{text:"ໄອດີ",value:"billing_display_id"},{text:"ຊື່ຫົວບິນ",align:"start",value:"content",width:"150px"},{text:"ສະຖານະ",value:"status"},{text:"ປະເພດການຈ່າຍ",value:"payment_method_la"},{text:"ຜູ້ຈ່າຍ",value:"paided_by_user.full_name"},{text:"ຫົວຂໍ້",value:"billingable.title"},{text:"ລາຍລະອຽດ",value:"billingable.description"},{text:"ຈຳນວນ",value:"total"},{text:"ລູກຄ້າ",value:"display_customer_name"},{text:"ປະເພດລູກຄ້າ",value:"custom_type",width:"100px"},{text:"ບ້ານ",value:"display_customer_village",width:"100px"},{text:"ເມືອງ",value:"display_customer_district"},{text:"action",value:"action"}],lastMonthBill:localStorage.getItem("lastMonthBill"),lastMonthBillPaid:localStorage.getItem("lastMonthBillPaid")}},computed:{lastMonthCreated(){return""},lastMonthBillCreated(){return""},billDates(){return V["a"]},sales(){const t=[];for(const e of this.salesData){let s="";e.name&&(s+=e.name+" "),e.phone&&(s+=e.phone+" "),e.emp_name&&(s+=e.emp_name+" "),e.emp_surname&&(s+=e.emp_surname+" "),e.emp_card_id&&(s+=e.emp_card_id),t.push({name:s,id:e.id})}return t},villageList(){return this.selectedDistrict?this.selectedDistrict.villages:[]},summaryDetails(){const t=[];for(const e of this.billings.details){const s={package_name:e.package_name,count_billing:e.count_billing};for(const t of e.total)s[t.status_la]={count_billing:t.count_billing,total:t.total};t.push(s)}return t},detailStatuses(){const t=[];if(this.summaryDetails.length)for(const[e,s]of Object.entries(this.summaryDetails[0]))void 0!==s.count_billing&&t.push({text:e,value:e+".total"});return t},headers(){let t=[{text:"ປະເພດບິນ",align:"start",value:"package_name"}];return this.detailStatuses.length&&(t=[t,...this.detailStatuses]),t},defaultStatus(){return{status:"",status_la:"",total:0,count_billing:0,bg_color:""}},sectionSuccess(){return[this.successStatus,this.toConfirmPaymentStatus,this.rejectedStatus]},sectionSale(){let t=this.defaultStatus;return this.billings.sum_sale&&(t=this.billings.sum_sale.find(t=>"success"==t.status)),[{...t,bg_color:"teal"}]},sectionNotSale(){let t=this.defaultStatus;return this.billings.sum_not_sale&&(t=this.billings.sum_not_sale.find(t=>"success"==t.status)),[{...t,bg_color:"teal darken-4"}]},sectionPending(){return[this.approvedStatus,this.createdStatus]},successStatus(){return this.getCard("success")},createdStatus(){return this.getCard("created")},cancelStatus(){return this.getCard("cancel")},rejectedStatus(){return this.getCard("rejected")},toConfirmPaymentStatus(){return this.getCard("to_confirm_payment")},approvedStatus(){return this.getCard("approved")}},watch:{lastMonthCreated(){this.fetchData()},lastMonthBillCreated(){this.fetchData()},billDates(){this.fetchData()},selectedDistrict(t,e){e!=t&&(this.selectedVillage=""),this.fetchData()},selectedVillage(){this.fetchData()},exportMode(){this.fetchData()},selectedBillDate(){(this.start_date||this.end_date)&&this.fetchData()},selectedSale(){this.fetchData()},current_page(){this.fetchData(this.current_page)}},created(){this.fetchDistrict(),this.fetchData(),this.fetchSale()},methods:{changeSaleMode(t){this.sale_mode=t,this.fetchData()},handleExport(){this.exportMode="excel"},customerType(t){return!(!t.user||!t.user.customer)&&(!!t.user.customer.customer_type&&t.user.customer.customer_type)},async fetchDistrict(){try{const t=await this.$axios.get("info/district",{params:{province_id:1}});this.districts=t.data.data}catch(t){console.log(t)}},fetchData(t=1){this.start_menu=!1,this.end_menu=!1;const e=[{per_page:100},{page:t},{sale_id:this.selectedSale},{payment_method:this.selectedPaymentMethod},{date_method:this.selectedBillDate},{start_date:this.start_date},{end_date:this.end_date},{download:this.exportMode},{created_month:this.lastMonthCreated},{bill_month:this.lastMonthBillCreated},{without_customer_activity:!0},{without_month_info:!0},{sale_mode:this.sale_mode},{filter:this.billingListsearch}];this.selectedVillage?e.push({village_id:this.selectedVillage}):this.selectedDistrict&&e.push({district_id:this.selectedDistrict}),this.$store.commit("Loading_State",!0),this.$axios.get("v2/report-billing-custom-bill",{params:Object(N["a"])(e)}).then(t=>{200==t.data.code&&setTimeout(()=>{this.$store.commit("Loading_State",!1),this.exportMode="",t.data.data.download_link?window.open(t.data.data.download_link):(this.billings=t.data.data,this.billings.data.pagination.current_page)},300)}).catch(t=>{if(this.$store.commit("Loading_State",!1),t.response&&422==t.response.status){const e=t.response.data.errors;for(const[t,s]of Object.entries(e))this.server_errors[t]=s[0]}})},fetchSale(){this.$store.commit("Loading_State",!0),this.$axios.get("user-setting/user",{params:Object(N["a"])([{roles:["sale","sale_admin","sale_register","sale_partner","sale_editor"]},{order_by:"newest"}])}).then(t=>{200===t.data.code&&(this.$store.commit("Loading_State",!1),this.$store.commit("Loading_State",!1),this.salesData=t.data.data)}).catch(t=>{if(this.$store.commit("Loading_State",!1),t.response&&422===t.response.status){const e=t.response.data.errors;for(const[t,s]of Object.entries(e))this.server_errors[t]=s[0]}})},ViewInvoice(t){const e=this.$router.resolve({name:"billing-detail",params:{id:t}});window.open(e.href,"_blank")},getCard(t){const e=this.billings.summary.find(e=>e.status==t);if(e){const s=this.$router.resolve({path:"/billing",query:{tab:t}});e.route=s,e.bg_color=Object(P["a"])(e.status)}return e||this.defaultStatus},getBgColorFunc(t){return Object(P["a"])(t)},getLaoStatusFunc(t){return Object(P["d"])(t)},getLaoCompanyCostByFunc(t){return Object(V["g"])(t)},formatNumber(t){return R(t)}}},ft=gt,vt=(s("5c4f"),Object(F["a"])(ft,pt,_t,!1,null,null,null)),bt=vt.exports,yt={components:{ReportBillingType:z,ReportBillingCompany:Y,ReportBillingHome:et,ReportBillingCollectionEvent:rt,ReportBillingFutureInvoice:mt,ReportBillingCustomBill:bt},data(){return{tab:null,items:[{tab:"ທັງໝົດ",content:"ReportBillingType"},{tab:"ຫົວໜ່ວຍທຸລະກິດ",content:"ReportBillingCompany"},{tab:"ຄົວເຮືອນ",content:"ReportBillingHome"},{tab:"ຖ້ຽວພິເສດ",content:"ReportBillingCollectionEvent"}],lastMonthBill:"",lastMonthBillPaid:"",start_menu_created:!1,start_menu:!1}},computed:{},created(){this.$route.query.from_sale?this.lastMonthBillPaid=(new Date).toISOString().substr(0,7):this.lastMonthBillPaid=""},watch:{}},xt=yt,St=Object(F["a"])(xt,p,_,!1,null,null,null);e["default"]=St.exports},"0af3":function(t,e,s){"use strict";var a=s("1455");e["a"]=a["a"].extend({name:"v-tab-item",props:{id:String},methods:{genWindowItem(){const t=a["a"].options.methods.genWindowItem.call(this);return t.data.domProps=t.data.domProps||{},t.data.domProps.id=this.id||this.value,t}}})},"0fdf":function(t,e,s){},1455:function(t,e,s){"use strict";var a=s("59f4"),i=s("c91b"),n=s("385b"),l=s("dd08"),r=s("9c0c");const o=Object(r["a"])(a["a"],Object(i["a"])("windowGroup","v-window-item","v-window"));e["a"]=o.extend().extend().extend({name:"v-window-item",directives:{Touch:n["a"]},props:{disabled:Boolean,reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},value:{required:!1}},data(){return{isActive:!1,inTransition:!1}},computed:{classes(){return this.groupClasses},computedTransition(){return this.windowGroup.internalReverse?"undefined"!==typeof this.reverseTransition?this.reverseTransition||"":this.windowGroup.computedTransition:"undefined"!==typeof this.transition?this.transition||"":this.windowGroup.computedTransition}},methods:{genDefaultSlot(){return this.$slots.default},genWindowItem(){return this.$createElement("div",{staticClass:"v-window-item",class:this.classes,directives:[{name:"show",value:this.isActive}],on:this.$listeners},this.genDefaultSlot())},onAfterTransition(){this.inTransition&&(this.inTransition=!1,this.windowGroup.transitionCount>0&&(this.windowGroup.transitionCount--,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=void 0)))},onBeforeTransition(){this.inTransition||(this.inTransition=!0,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=Object(l["h"])(this.windowGroup.$el.clientHeight)),this.windowGroup.transitionCount++)},onTransitionCancelled(){this.onAfterTransition()},onEnter(t){this.inTransition&&this.$nextTick(()=>{this.computedTransition&&this.inTransition&&(this.windowGroup.transitionHeight=Object(l["h"])(t.clientHeight))})}},render(t){return t("transition",{props:{name:this.computedTransition},on:{beforeEnter:this.onBeforeTransition,afterEnter:this.onAfterTransition,enterCancelled:this.onTransitionCancelled,beforeLeave:this.onBeforeTransition,afterLeave:this.onAfterTransition,leaveCancelled:this.onTransitionCancelled,enter:this.onEnter}},this.showLazyContent(()=>[this.genWindowItem()]))}})},"22aa":function(t,e,s){"use strict";s.d(e,"a",(function(){return a})),s.d(e,"d",(function(){return i})),s.d(e,"b",(function(){return n})),s.d(e,"c",(function(){return l})),s.d(e,"f",(function(){return r})),s.d(e,"e",(function(){return o})),s.d(e,"g",(function(){return c})),s.d(e,"h",(function(){return d}));const a=function(t){switch(t){case"created":case"ລໍຖ້າອະນຸມັດ":return"#73b8fd";case"approved":case"ອະນຸມັດແລ້ວ":return"#0080fc";case"canceled":case"ບິນຖືກຍົກເລີກ":return"#eb004c";case"rejected":case"ການຈ່າຍຖືກປະຕິເສດ":return"#740127";case"to_confirm_payment":case"ຈ່າຍແລ້ວ ລໍຖ້າກວດສອບ":return"#9c540d";case"success":case"ຈ່າຍແລ້ວ ກວດສອບສຳເລັດ":return"#02a38a"}},i=function(t){switch(t){case"created":return"ລໍຖ້າອະນຸມັດ";case"approved":return"ອະນຸມັດແລ້ວ";case"canceled":return"ບິນຖືກຍົກເລີກ";case"rejected":return"ການຈ່າຍຖືກປະຕິເສດ";case"to_confirm_payment":return"ຈ່າຍແລ້ວ ລໍຖ້າກວດສອບ";case"success":return"ຈ່າຍແລ້ວ ກວດສອບສຳເລັດ";case"cash":return"ຊຳລະເງິນສົດ";case"bcel":return"BCEL";default:return t}},n=function(t){switch(t){case"CustomBill":return"ບິນຍ້ອນຫຼັງ";case"NewCollectionEvent":return"ບີນບໍລີການຂີ້ເຫຍື້ອພິເສດ";case"FutureInvoice":return"ບິນບໍລິການລ່ວງໜ້າ";case"NewInvoice":return"ບິນບໍລິການປະຈຳເດືອນ";default:return t}},l=function(t){switch(t){case"requested":return"ລູກຄ້າຮ້ອງຂໍເຂົ້າມາ";case"rejected":return"ປະຕິເສດລູກຄ້າແລ້ວ";case"approved":return"ອະນຸມັດແລ້ວ ລໍຖ້າລົງເກັບ";case"collected":return"ເກັບແລ້ວ ລໍຖ້າຢືນຢັນ";case"collect_confirm":return"ລູກຄ້າຢືນຢັນການເກັບແລ້ວ";case"collect_reject":return"ລູກຄ້າປະຕິເສດການເກັບ";default:return t}},r=[{value:"cash",text:"ເງິນສົດ"},{value:"bcel",text:"ເງິນໂອນ"},{value:"bcel_online",text:"bcel bill payments"}],o=["created","approved","to_confirm_payment","success"],c=["rejected","canceled"],d=["kg","ຖົງ","container","ຄັ້ງ"]},"29b3":function(t,e,s){},"2f5e":function(t,e,s){"use strict";var a=s("c91b"),i=s("c4d0"),n=s("710c"),l=s("dd08"),r=s("9c0c");const o=Object(r["a"])(i["a"],Object(a["a"])("tabsBar"),n["a"]);e["a"]=o.extend().extend().extend({name:"v-tab",props:{ripple:{type:[Boolean,Object],default:!0},tabValue:{required:!1}},data:()=>({proxyClass:"v-tab--active"}),computed:{classes(){return{"v-tab":!0,...i["a"].options.computed.classes.call(this),"v-tab--disabled":this.disabled,...this.groupClasses}},value(){if(null!=this.tabValue)return this.tabValue;let t=this.to||this.href;if(null==t)return t;if(this.$router&&this.to===Object(this.to)){const e=this.$router.resolve(this.to,this.$route,this.append);t=e.href}return t.replace("#","")}},methods:{click(t){this.disabled?t.preventDefault():(this.href&&this.href.indexOf("#")>-1&&t.preventDefault(),t.detail&&this.$el.blur(),this.$emit("click",t),this.to||this.toggle())},toggle(){this.isActive&&(this.tabsBar.mandatory||this.to)||this.$emit("change")}},render(t){const{tag:e,data:s}=this.generateRouteLink();return s.attrs={...s.attrs,"aria-selected":String(this.isActive),role:"tab",tabindex:this.disabled?-1:0},s.on={...s.on,keydown:t=>{t.keyCode===l["y"].enter&&this.click(t),this.$emit("keydown",t)}},t(e,s,this.$slots.default)}})},"398d":function(t,e,s){"use strict";var a=s("1da9"),i=s("d62f"),n=function(){var t=this,e=t._self._c;return e(i["a"],t._l(t.cards,(function(t,s){return e(a["a"],{key:s},[e("MoneyCard",{attrs:{title:t.status_la||t.title||t.display_type_la,total:t.total,billing_count:t.count_billing,bg_color:t.bg_color,route:t.route,icon:t.icon,icon_color:t.icon_color,unit_count:t.unit_count}})],1)})),1)},l=[],r=s("ca79"),o={components:{MoneyCard:r["a"]},props:["cards"],data(){return{}}},c=o,d=s("4a4e"),u=Object(d["a"])(c,n,l,!1,null,null,null);e["a"]=u.exports},"51b4":function(t,e,s){},"54da":function(t,e,s){"use strict";e["a"]=function(t){const e={};if(!t[0]){for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(void 0!==t[e]&&null!==t[e]&&""!==t[e]||delete t[e]);return t}for(const s of t)1==Object.keys(s).length&&s[Object.keys(s)]&&(e[Object.keys(s)]=s[Object.keys(s)]);return e}},"5c4f":function(t,e,s){"use strict";s("9d26")},"6d87":function(t,e,s){"use strict";s.d(e,"a",(function(){return p}));s("794a");var a=s("2dec"),i=s("078d"),n=s("b5e5"),l=s("f506"),r=s("3870"),o=s("385b"),c=s("9c0c"),d=s("dd08");function u(t){const e=.501,s=Math.abs(t);return Math.sign(t)*(s/((1/e-2)*(1-s)+1))}function h(t,e,s,a){const i=t.clientWidth,n=s?e.content-t.offsetLeft-i:t.offsetLeft;s&&(a=-a);const l=e.wrapper+a,r=i+n,o=.4*i;return n<=a?a=Math.max(n-o,0):l<=r&&(a=Math.min(a-(l-r-o),e.content-e.wrapper)),s?-a:a}function m(t,e,s){const{offsetLeft:a,clientWidth:i}=t;if(s){const t=e.content-a-i/2-e.wrapper/2;return-Math.min(e.content-e.wrapper,Math.max(0,t))}{const t=a+i/2-e.wrapper/2;return Math.min(e.content-e.wrapper,Math.max(0,t))}}const p=Object(c["a"])(n["a"],l["a"]).extend({name:"base-slide-group",directives:{Resize:r["a"],Touch:o["a"]},props:{activeClass:{type:String,default:"v-slide-item--active"},centerActive:Boolean,nextIcon:{type:String,default:"$next"},prevIcon:{type:String,default:"$prev"},showArrows:{type:[Boolean,String],validator:t=>"boolean"===typeof t||["always","never","desktop","mobile"].includes(t)}},data:()=>({isOverflowing:!1,resizeTimeout:0,startX:0,isSwipingHorizontal:!1,isSwiping:!1,scrollOffset:0,widths:{content:0,wrapper:0}}),computed:{canTouch(){return"undefined"!==typeof window},__cachedNext(){return this.genTransition("next")},__cachedPrev(){return this.genTransition("prev")},classes(){return{...n["a"].options.computed.classes.call(this),"v-slide-group":!0,"v-slide-group--has-affixes":this.hasAffixes,"v-slide-group--is-overflowing":this.isOverflowing}},hasAffixes(){switch(this.showArrows){case"always":return!0;case"desktop":return!this.isMobile;case!0:return this.isOverflowing||Math.abs(this.scrollOffset)>0;case"mobile":return this.isMobile||this.isOverflowing||Math.abs(this.scrollOffset)>0;case"never":return!1;default:return!this.isMobile&&(this.isOverflowing||Math.abs(this.scrollOffset)>0)}},hasNext(){if(!this.hasAffixes)return!1;const{content:t,wrapper:e}=this.widths;return t>Math.abs(this.scrollOffset)+e},hasPrev(){return this.hasAffixes&&0!==this.scrollOffset}},watch:{internalValue:"setWidths",isOverflowing:"setWidths",scrollOffset(t){this.$vuetify.rtl&&(t=-t);let e=t<=0?u(-t):t>this.widths.content-this.widths.wrapper?-(this.widths.content-this.widths.wrapper)+u(this.widths.content-this.widths.wrapper-t):-t;this.$vuetify.rtl&&(e=-e),this.$refs.content.style.transform=`translateX(${e}px)`}},mounted(){if("undefined"!==typeof ResizeObserver){const t=new ResizeObserver(()=>{this.onResize()});t.observe(this.$el),t.observe(this.$refs.content),this.$on("hook:destroyed",()=>{t.disconnect()})}else{let t=0;this.$on("hook:beforeUpdate",()=>{var e;t=((null===(e=this.$refs.content)||void 0===e?void 0:e.children)||[]).length}),this.$on("hook:updated",()=>{var e;t!==((null===(e=this.$refs.content)||void 0===e?void 0:e.children)||[]).length&&this.setWidths()})}},methods:{onScroll(){this.$refs.wrapper.scrollLeft=0},onFocusin(t){if(this.isOverflowing)for(const e of Object(d["g"])(t))for(const t of this.items)if(t.$el===e)return void(this.scrollOffset=h(t.$el,this.widths,this.$vuetify.rtl,this.scrollOffset))},genNext(){const t=this.$scopedSlots.next?this.$scopedSlots.next({}):this.$slots.next||this.__cachedNext;return this.$createElement("div",{staticClass:"v-slide-group__next",class:{"v-slide-group__next--disabled":!this.hasNext},on:{click:()=>this.onAffixClick("next")},key:"next"},[t])},genContent(){return this.$createElement("div",{staticClass:"v-slide-group__content",ref:"content",on:{focusin:this.onFocusin}},this.$slots.default)},genData(){return{class:this.classes,directives:[{name:"resize",value:this.onResize}]}},genIcon(t){let e=t;this.$vuetify.rtl&&"prev"===t?e="next":this.$vuetify.rtl&&"next"===t&&(e="prev");const s=`${t[0].toUpperCase()}${t.slice(1)}`,i=this["has"+s];return this.showArrows||i?this.$createElement(a["a"],{props:{disabled:!i}},this[e+"Icon"]):null},genPrev(){const t=this.$scopedSlots.prev?this.$scopedSlots.prev({}):this.$slots.prev||this.__cachedPrev;return this.$createElement("div",{staticClass:"v-slide-group__prev",class:{"v-slide-group__prev--disabled":!this.hasPrev},on:{click:()=>this.onAffixClick("prev")},key:"prev"},[t])},genTransition(t){return this.$createElement(i["d"],[this.genIcon(t)])},genWrapper(){return this.$createElement("div",{staticClass:"v-slide-group__wrapper",directives:[{name:"touch",value:{start:t=>this.overflowCheck(t,this.onTouchStart),move:t=>this.overflowCheck(t,this.onTouchMove),end:t=>this.overflowCheck(t,this.onTouchEnd)}}],ref:"wrapper",on:{scroll:this.onScroll}},[this.genContent()])},calculateNewOffset(t,e,s,a){const i=s?-1:1,n=i*a+("prev"===t?-1:1)*e.wrapper;return i*Math.max(Math.min(n,e.content-e.wrapper),0)},onAffixClick(t){this.$emit("click:"+t),this.scrollTo(t)},onResize(){this._isDestroyed||this.setWidths()},onTouchStart(t){const{content:e}=this.$refs;this.startX=this.scrollOffset+t.touchstartX,e.style.setProperty("transition","none"),e.style.setProperty("willChange","transform")},onTouchMove(t){if(this.canTouch){if(!this.isSwiping){const e=t.touchmoveX-t.touchstartX,s=t.touchmoveY-t.touchstartY;this.isSwipingHorizontal=Math.abs(e)>Math.abs(s),this.isSwiping=!0}this.isSwipingHorizontal&&(this.scrollOffset=this.startX-t.touchmoveX,document.documentElement.style.overflowY="hidden")}},onTouchEnd(){if(!this.canTouch)return;const{content:t,wrapper:e}=this.$refs,s=t.clientWidth-e.clientWidth;t.style.setProperty("transition",null),t.style.setProperty("willChange",null),this.$vuetify.rtl?this.scrollOffset>0||!this.isOverflowing?this.scrollOffset=0:this.scrollOffset<=-s&&(this.scrollOffset=-s):this.scrollOffset<0||!this.isOverflowing?this.scrollOffset=0:this.scrollOffset>=s&&(this.scrollOffset=s),this.isSwiping=!1,document.documentElement.style.removeProperty("overflow-y")},overflowCheck(t,e){t.stopPropagation(),this.isOverflowing&&e(t)},scrollIntoView(){if(!this.selectedItem&&this.items.length){const t=this.items[this.items.length-1].$el.getBoundingClientRect(),e=this.$refs.wrapper.getBoundingClientRect();(this.$vuetify.rtl&&e.right<t.right||!this.$vuetify.rtl&&e.left>t.left)&&this.scrollTo("prev")}this.selectedItem&&(0===this.selectedIndex||!this.centerActive&&!this.isOverflowing?this.scrollOffset=0:this.centerActive?this.scrollOffset=m(this.selectedItem.$el,this.widths,this.$vuetify.rtl):this.isOverflowing&&(this.scrollOffset=h(this.selectedItem.$el,this.widths,this.$vuetify.rtl,this.scrollOffset)))},scrollTo(t){this.scrollOffset=this.calculateNewOffset(t,{content:this.$refs.content?this.$refs.content.clientWidth:0,wrapper:this.$refs.wrapper?this.$refs.wrapper.clientWidth:0},this.$vuetify.rtl,this.scrollOffset)},setWidths(){window.requestAnimationFrame(()=>{if(this._isDestroyed)return;const{content:t,wrapper:e}=this.$refs;this.widths={content:t?t.clientWidth:0,wrapper:e?e.clientWidth:0},this.isOverflowing=this.widths.wrapper+1<this.widths.content,this.scrollIntoView()})}},render(t){return t("div",this.genData(),[this.genPrev(),this.genWrapper(),this.genNext()])}});p.extend({name:"v-slide-group",provide(){return{slideGroup:this}}})},7286:function(t,e,s){"use strict";s("fd49");var a=s("8ec7"),i=s("1822"),n=s("2dec"),l=s("9a1f"),r=s("710c"),o=s("f0b4"),c=s("9c0c"),d=s("4190");e["a"]=Object(c["a"])(a["a"],l["a"],o["a"]).extend({name:"v-alert",props:{border:{type:String,validator(t){return["top","right","bottom","left"].includes(t)}},closeLabel:{type:String,default:"$vuetify.close"},coloredBorder:Boolean,dense:Boolean,dismissible:Boolean,closeIcon:{type:String,default:"$cancel"},icon:{default:"",type:[Boolean,String],validator(t){return"string"===typeof t||!1===t}},outlined:Boolean,prominent:Boolean,text:Boolean,type:{type:String,validator(t){return["info","error","success","warning"].includes(t)}},value:{type:Boolean,default:!0}},computed:{__cachedBorder(){if(!this.border)return null;let t={staticClass:"v-alert__border",class:{["v-alert__border--"+this.border]:!0}};return this.coloredBorder&&(t=this.setBackgroundColor(this.computedColor,t),t.class["v-alert__border--has-color"]=!0),this.$createElement("div",t)},__cachedDismissible(){if(!this.dismissible)return null;const t=this.iconColor;return this.$createElement(i["a"],{staticClass:"v-alert__dismissible",props:{color:t,icon:!0,small:!0},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:()=>this.isActive=!1}},[this.$createElement(n["a"],{props:{color:t}},this.closeIcon)])},__cachedIcon(){return this.computedIcon?this.$createElement(n["a"],{staticClass:"v-alert__icon",props:{color:this.iconColor}},this.computedIcon):null},classes(){const t={...a["a"].options.computed.classes.call(this),"v-alert--border":Boolean(this.border),"v-alert--dense":this.dense,"v-alert--outlined":this.outlined,"v-alert--prominent":this.prominent,"v-alert--text":this.text};return this.border&&(t["v-alert--border-"+this.border]=!0),t},computedColor(){return this.color||this.type},computedIcon(){return!1!==this.icon&&("string"===typeof this.icon&&this.icon?this.icon:!!["error","info","success","warning"].includes(this.type)&&"$"+this.type)},hasColoredIcon(){return this.hasText||Boolean(this.border)&&this.coloredBorder},hasText(){return this.text||this.outlined},iconColor(){return this.hasColoredIcon?this.computedColor:void 0},isDark(){return!(!this.type||this.coloredBorder||this.outlined)||r["a"].options.computed.isDark.call(this)}},created(){this.$attrs.hasOwnProperty("outline")&&Object(d["a"])("outline","outlined",this)},methods:{genWrapper(){const t=[this.$slots.prepend||this.__cachedIcon,this.genContent(),this.__cachedBorder,this.$slots.append,this.$scopedSlots.close?this.$scopedSlots.close({toggle:this.toggle}):this.__cachedDismissible],e={staticClass:"v-alert__wrapper"};return this.$createElement("div",e,t)},genContent(){return this.$createElement("div",{staticClass:"v-alert__content"},this.$slots.default)},genAlert(){let t={staticClass:"v-alert",attrs:{role:"alert"},on:this.listeners$,class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};if(!this.coloredBorder){const e=this.hasText?this.setTextColor:this.setBackgroundColor;t=e(this.computedColor,t)}return this.$createElement("div",t,[this.genWrapper()])},toggle(){this.isActive=!this.isActive}},render(t){const e=this.genAlert();return this.transition?t("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[e]):e}})},7660:function(t,e,s){"use strict";s.d(e,"g",(function(){return a})),s.d(e,"c",(function(){return i})),s.d(e,"h",(function(){return n})),s.d(e,"e",(function(){return l})),s.d(e,"f",(function(){return r})),s.d(e,"a",(function(){return o})),s.d(e,"b",(function(){return c})),s.d(e,"d",(function(){return d}));s("558b");const a=function(t){switch(t){case"container":return"ຄອນເທນເນີ";case"fix_cost":return"ເປັນຖ້ຽວ";case"chartered":return"ມອບເໝົາ";case"bag":return"ບໍລິມາດ";case"infect":return"ຂີ້ເຫຍື້ອຕິດເຊື້ອ";case"32km":return"ຫຼັກ32";default:return t}},i=[{en:"container",la:"ຄອນເທນເນີ"},{en:"fix_cost",la:"ເປັນຖ້ຽວ"},{en:"chartered",la:"ມອບເໝົາ"},{en:"bag",la:"ບໍລິມາດ"},{en:"infect",la:"ຂີ້ເຫຍື້ອຕິດເຊື້ອ"},{en:"32km",la:"ຫຼັກ32"}],n=function(t){switch(t){case"company":return"ຫົວໜ່ວຍທຸລະກິດ";case"home":return"ຄົວເຮືອນ";default:return t}},l=function(t){switch(t){case"bag":case"chartered":case"32km":case"infect":return"ຖົງ";case"container":return"ຄອນເທນເນີ";case"fix_cost":return"ຖ້ຽວ";default:return t}},r=[{en:"requested",la:"ລູກຄ້າຮ້ອງຂໍເຂົ້າມາ",color:"#34495e"},{en:"rejected",la:"ປະຕິເສດລູກຄ້າແລ້ວ",color:"#eff3f5"},{en:"approved",la:"ອະນຸມັດແລ້ວ ລໍຖ້າລົງເກັບ",color:"#54a0ff"},{en:"collected",la:"ເກັບແລ້ວ ລໍຖ້າຢືນຢັນ",color:"#c1c40f"},{en:"collect_confirm",la:"ລູກຄ້າຢືນຢັນການເກັບແລ້ວ",color:"#30cb83"},{en:"collect_reject",la:"ລູກຄ້າປະຕິເສດການເກັບ",color:"#e74c3c"}],o=[{text:"ວັນທີຈ່າຍບິນ",value:"paided_at"},{text:"ວັນທີສ້າງບິນ",value:"created_at"},{text:"ວັນທີອະນຸມັດບິນ",value:"approved_at"},{text:"ວັນທີກວດສອບບິນສຳເລັດ",value:"confirmed_payment_at"}],c=(t=[])=>{const e=[];for(const s of t)e.push({id:s.id,name:`${s.name} (${Intl.NumberFormat().format(s.price)} ກີບ)`});return e},d=[{value:"",text:"ທັງໝົດ"},{value:"can",text:"ເກັບໄດ້"},{value:"not",text:"ເກັບບໍ່ໄດ້"}]},"76f6":function(t,e,s){},"794a":function(t,e,s){},"83dc":function(t,e,s){"use strict";s("c8e5")},"877d":function(t,e,s){"use strict";s("b1f0")},"9d26":function(t,e,s){},a151:function(t,e,s){"use strict";s("558b"),s("edc4");var a=s("6d87"),i=s("710c"),n=s("ae2a"),l=s("9c0c"),r=Object(l["a"])(a["a"],n["a"],i["a"]).extend({name:"v-tabs-bar",provide(){return{tabsBar:this}},computed:{classes(){return{...a["a"].options.computed.classes.call(this),"v-tabs-bar":!0,"v-tabs-bar--is-mobile":this.isMobile,"v-tabs-bar--show-arrows":this.showArrows,...this.themeClasses}}},watch:{items:"callSlider",internalValue:"callSlider",$route:"onRouteChange"},methods:{callSlider(){this.isBooted&&this.$emit("call:slider")},genContent(){const t=a["a"].options.methods.genContent.call(this);return t.data=t.data||{},t.data.staticClass+=" v-tabs-bar__content",t},onRouteChange(t,e){if(this.mandatory)return;const s=this.items,a=t.path,i=e.path;let n=!1,l=!1;for(const r of s)if(r.to===i?l=!0:r.to===a&&(n=!0),n&&l)break;!n&&l&&(this.internalValue=void 0)}},render(t){const e=a["a"].options.render.call(this,t);return e.data.attrs={role:"tablist"},e}}),o=s("e28e"),c=s("d799"),d=Object(l["a"])(c["a"]).extend({name:"v-tabs-slider",render(t){return t("div",this.setBackgroundColor(this.color,{staticClass:"v-tabs-slider"}))}}),u=s("456b"),h=s("3870"),m=s("dd08");const p=Object(l["a"])(c["a"],u["a"],i["a"]);e["a"]=p.extend().extend({name:"v-tabs",directives:{Resize:h["a"]},props:{activeClass:{type:String,default:""},alignWithTitle:Boolean,backgroundColor:String,centerActive:Boolean,centered:Boolean,fixedTabs:Boolean,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,iconsAndText:Boolean,mobileBreakpoint:[String,Number],nextIcon:{type:String,default:"$next"},optional:Boolean,prevIcon:{type:String,default:"$prev"},right:Boolean,showArrows:[Boolean,String],sliderColor:String,sliderSize:{type:[Number,String],default:2},vertical:Boolean},data(){return{resizeTimeout:0,slider:{height:null,left:null,right:null,top:null,width:null},transitionTime:300}},computed:{classes(){return{"v-tabs--align-with-title":this.alignWithTitle,"v-tabs--centered":this.centered,"v-tabs--fixed-tabs":this.fixedTabs,"v-tabs--grow":this.grow,"v-tabs--icons-and-text":this.iconsAndText,"v-tabs--right":this.right,"v-tabs--vertical":this.vertical,...this.themeClasses}},isReversed(){return this.$vuetify.rtl&&this.vertical},sliderStyles(){return{height:Object(m["h"])(this.slider.height),left:this.isReversed?void 0:Object(m["h"])(this.slider.left),right:this.isReversed?Object(m["h"])(this.slider.right):void 0,top:this.vertical?Object(m["h"])(this.slider.top):void 0,transition:null!=this.slider.left?null:"none",width:Object(m["h"])(this.slider.width)}},computedColor(){return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"}},watch:{alignWithTitle:"callSlider",centered:"callSlider",centerActive:"callSlider",fixedTabs:"callSlider",grow:"callSlider",iconsAndText:"callSlider",right:"callSlider",showArrows:"callSlider",vertical:"callSlider","$vuetify.application.left":"onResize","$vuetify.application.right":"onResize","$vuetify.rtl":"onResize"},mounted(){if("undefined"!==typeof ResizeObserver){const t=new ResizeObserver(()=>{this.onResize()});t.observe(this.$el),this.$on("hook:destroyed",()=>{t.disconnect()})}this.$nextTick(()=>{window.setTimeout(this.callSlider,30)})},methods:{callSlider(){return!this.hideSlider&&this.$refs.items&&this.$refs.items.selectedItems.length?(this.$nextTick(()=>{const t=this.$refs.items.selectedItems[0];if(!t||!t.$el)return this.slider.width=0,void(this.slider.left=0);const e=t.$el;this.slider={height:this.vertical?e.scrollHeight:Number(this.sliderSize),left:this.vertical?0:e.offsetLeft,right:this.vertical?0:e.offsetLeft+e.offsetWidth,top:e.offsetTop,width:this.vertical?Number(this.sliderSize):e.scrollWidth}}),!0):(this.slider.width=0,!1)},genBar(t,e){const s={style:{height:Object(m["h"])(this.height)},props:{activeClass:this.activeClass,centerActive:this.centerActive,dark:this.dark,light:this.light,mandatory:!this.optional,mobileBreakpoint:this.mobileBreakpoint,nextIcon:this.nextIcon,prevIcon:this.prevIcon,showArrows:this.showArrows,value:this.internalValue},on:{"call:slider":this.callSlider,change:t=>{this.internalValue=t}},ref:"items"};return this.setTextColor(this.computedColor,s),this.setBackgroundColor(this.backgroundColor,s),this.$createElement(r,s,[this.genSlider(e),t])},genItems(t,e){return t||(e.length?this.$createElement(o["a"],{props:{value:this.internalValue},on:{change:t=>{this.internalValue=t}}},e):null)},genSlider(t){return this.hideSlider?null:(t||(t=this.$createElement(d,{props:{color:this.sliderColor}})),this.$createElement("div",{staticClass:"v-tabs-slider-wrapper",style:this.sliderStyles},[t]))},onResize(){this._isDestroyed||(clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(this.callSlider,0))},parseNodes(){let t=null,e=null;const s=[],a=[],i=this.$slots.default||[],n=i.length;for(let l=0;l<n;l++){const n=i[l];if(n.componentOptions)switch(n.componentOptions.Ctor.options.name){case"v-tabs-slider":e=n;break;case"v-tabs-items":t=n;break;case"v-tab-item":s.push(n);break;default:a.push(n)}else a.push(n)}return{tab:a,slider:e,items:t,item:s}}},render(t){const{tab:e,slider:s,items:a,item:i}=this.parseNodes();return t("div",{staticClass:"v-tabs",class:this.classes,directives:[{name:"resize",modifiers:{quiet:!0},value:this.onResize}]},[this.genBar(e,s),this.genItems(a,i)])}})},a412:function(t,e,s){"use strict";s("29b3")},a892:function(t,e,s){"use strict";s("0fdf");var a=s("26bf"),i=s("9b44"),n=s("ed44"),l=s("dd08");const r={...a["b"],offsetY:!0,offsetOverflow:!0,transition:!1};e["a"]=a["a"].extend({name:"v-autocomplete",props:{autoSelectFirst:{type:Boolean,default:!1},filter:{type:Function,default:(t,e,s)=>s.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>-1},hideNoData:Boolean,menuProps:{type:a["a"].options.props.menuProps.type,default:()=>r},noFilter:Boolean,searchInput:{type:String}},data(){return{lazySearch:this.searchInput}},computed:{classes(){return{...a["a"].options.computed.classes.call(this),"v-autocomplete":!0,"v-autocomplete--is-selecting-index":this.selectedIndex>-1}},computedItems(){return this.filteredItems},selectedValues(){return this.selectedItems.map(t=>this.getValue(t))},hasDisplayedItems(){return this.hideSelected?this.filteredItems.some(t=>!this.hasItem(t)):this.filteredItems.length>0},currentRange(){return null==this.selectedItem?0:String(this.getText(this.selectedItem)).length},filteredItems(){return!this.isSearching||this.noFilter||null==this.internalSearch?this.allItems:this.allItems.filter(t=>{const e=Object(l["r"])(t,this.itemText),s=null!=e?String(e):"";return this.filter(t,String(this.internalSearch),s)})},internalSearch:{get(){return this.lazySearch},set(t){this.lazySearch!==t&&(this.lazySearch=t,this.$emit("update:search-input",t))}},isAnyValueAllowed(){return!1},isDirty(){return this.searchIsDirty||this.selectedItems.length>0},isSearching(){return this.multiple&&this.searchIsDirty||this.searchIsDirty&&this.internalSearch!==this.getText(this.selectedItem)},menuCanShow(){return!!this.isFocused&&(this.hasDisplayedItems||!this.hideNoData)},$_menuProps(){const t=a["a"].options.computed.$_menuProps.call(this);return t.contentClass=("v-autocomplete__content "+(t.contentClass||"")).trim(),{...r,...t}},searchIsDirty(){return null!=this.internalSearch&&""!==this.internalSearch},selectedItem(){return this.multiple?null:this.selectedItems.find(t=>this.valueComparator(this.getValue(t),this.getValue(this.internalValue)))},listData(){const t=a["a"].options.computed.listData.call(this);return t.props={...t.props,items:this.virtualizedItems,noFilter:this.noFilter||!this.isSearching||!this.filteredItems.length,searchInput:this.internalSearch},t}},watch:{filteredItems:"onFilteredItemsChanged",internalValue:"setSearch",isFocused(t){t?(document.addEventListener("copy",this.onCopy),this.$refs.input&&this.$refs.input.select()):(document.removeEventListener("copy",this.onCopy),this.blur(),this.updateSelf())},isMenuActive(t){!t&&this.hasSlot&&(this.lazySearch=null)},items(t,e){e&&e.length||!this.hideNoData||!this.isFocused||this.isMenuActive||!t.length||this.activateMenu()},searchInput(t){this.lazySearch=t},internalSearch:"onInternalSearchChanged",itemText:"updateSelf"},created(){this.setSearch()},destroyed(){document.removeEventListener("copy",this.onCopy)},methods:{onFilteredItemsChanged(t,e){if(t!==e){if(!this.autoSelectFirst){const s=e[this.$refs.menu.listIndex];s?this.setMenuIndex(t.findIndex(t=>t===s)):this.setMenuIndex(-1),this.$emit("update:list-index",this.$refs.menu.listIndex)}this.$nextTick(()=>{this.internalSearch&&(1===t.length||this.autoSelectFirst)&&(this.$refs.menu.getTiles(),this.autoSelectFirst&&t.length&&(this.setMenuIndex(0),this.$emit("update:list-index",this.$refs.menu.listIndex)))})}},onInternalSearchChanged(){this.updateMenuDimensions()},updateMenuDimensions(){this.isMenuActive&&this.$refs.menu&&this.$refs.menu.updateDimensions()},changeSelectedIndex(t){this.searchIsDirty||(this.multiple&&t===l["y"].left?-1===this.selectedIndex?this.selectedIndex=this.selectedItems.length-1:this.selectedIndex--:this.multiple&&t===l["y"].right?this.selectedIndex>=this.selectedItems.length-1?this.selectedIndex=-1:this.selectedIndex++:t!==l["y"].backspace&&t!==l["y"].delete||this.deleteCurrentItem())},deleteCurrentItem(){const t=this.selectedIndex,e=this.selectedItems[t];if(!this.isInteractive||this.getDisabled(e))return;const s=this.selectedItems.length-1;if(-1===this.selectedIndex&&0!==s)return void(this.selectedIndex=s);const a=this.selectedItems.length,i=t!==a-1?t:t-1,n=this.selectedItems[i];n?this.selectItem(e):this.setValue(this.multiple?[]:null),this.selectedIndex=i},clearableCallback(){this.internalSearch=null,a["a"].options.methods.clearableCallback.call(this)},genInput(){const t=i["a"].options.methods.genInput.call(this);return t.data=Object(n["a"])(t.data,{attrs:{"aria-activedescendant":Object(l["p"])(this.$refs.menu,"activeTile.id"),autocomplete:Object(l["p"])(t.data,"attrs.autocomplete","off")},domProps:{value:this.internalSearch}}),t},genInputSlot(){const t=a["a"].options.methods.genInputSlot.call(this);return t.data.attrs.role="combobox",t},genSelections(){return this.hasSlot||this.multiple?a["a"].options.methods.genSelections.call(this):[]},onClick(t){this.isInteractive&&(this.selectedIndex>-1?this.selectedIndex=-1:this.onFocus(),this.isAppendInner(t.target)||this.activateMenu())},onInput(t){if(this.selectedIndex>-1||!t.target)return;const e=t.target,s=e.value;e.value&&this.activateMenu(),this.multiple||""!==s||this.deleteCurrentItem(),this.internalSearch=s,this.badInput=e.validity&&e.validity.badInput},onKeyDown(t){const e=t.keyCode;!t.ctrlKey&&[l["y"].home,l["y"].end].includes(e)||a["a"].options.methods.onKeyDown.call(this,t),this.changeSelectedIndex(e)},onSpaceDown(t){},onTabDown(t){a["a"].options.methods.onTabDown.call(this,t),this.updateSelf()},onUpDown(t){t.preventDefault(),this.activateMenu()},selectItem(t){a["a"].options.methods.selectItem.call(this,t),this.setSearch()},setSelectedItems(){a["a"].options.methods.setSelectedItems.call(this),this.isFocused||this.setSearch()},setSearch(){this.$nextTick(()=>{this.multiple&&this.internalSearch&&this.isMenuActive||(this.internalSearch=!this.selectedItems.length||this.multiple||this.hasSlot?null:this.getText(this.selectedItem))})},updateSelf(){(this.searchIsDirty||this.internalValue)&&(this.multiple||this.valueComparator(this.internalSearch,this.getValue(this.internalValue))||this.setSearch())},hasItem(t){return this.selectedValues.indexOf(this.getValue(t))>-1},onCopy(t){var e,s;if(-1===this.selectedIndex)return;const a=this.selectedItems[this.selectedIndex],i=this.getText(a);null===(e=t.clipboardData)||void 0===e||e.setData("text/plain",i),null===(s=t.clipboardData)||void 0===s||s.setData("text/vnd.vuetify.autocomplete.item+plain",i),t.preventDefault()}}})},b1f0:function(t,e,s){},b2e9:function(t,e,s){"use strict";s("558b"),s("00c4");var a=s("385b"),i=s("1822"),n=s("2dec"),l=s("b5e5");e["a"]=l["a"].extend({name:"v-window",directives:{Touch:a["a"]},provide(){return{windowGroup:this}},props:{activeClass:{type:String,default:"v-window-item--active"},continuous:Boolean,mandatory:{type:Boolean,default:!0},nextIcon:{type:[Boolean,String],default:"$next"},prevIcon:{type:[Boolean,String],default:"$prev"},reverse:Boolean,showArrows:Boolean,showArrowsOnHover:Boolean,touch:Object,touchless:Boolean,value:{required:!1},vertical:Boolean},data(){return{changedByDelimiters:!1,internalHeight:void 0,transitionHeight:void 0,transitionCount:0,isBooted:!1,isReverse:!1}},computed:{isActive(){return this.transitionCount>0},classes(){return{...l["a"].options.computed.classes.call(this),"v-window--show-arrows-on-hover":this.showArrowsOnHover}},computedTransition(){if(!this.isBooted)return"";const t=this.vertical?"y":"x",e=this.internalReverse?!this.isReverse:this.isReverse,s=e?"-reverse":"";return`v-window-${t}${s}-transition`},hasActiveItems(){return Boolean(this.items.find(t=>!t.disabled))},hasNext(){return this.continuous||this.internalIndex<this.items.length-1},hasPrev(){return this.continuous||this.internalIndex>0},internalIndex(){return this.items.findIndex((t,e)=>this.internalValue===this.getValue(t,e))},internalReverse(){return this.$vuetify.rtl?!this.reverse:this.reverse}},watch:{internalIndex(t,e){this.isReverse=this.updateReverse(t,e)}},mounted(){window.requestAnimationFrame(()=>this.isBooted=!0)},methods:{genDefaultSlot(){return this.$slots.default},genContainer(){const t=[this.genDefaultSlot()];return this.showArrows&&t.push(this.genControlIcons()),this.$createElement("div",{staticClass:"v-window__container",class:{"v-window__container--is-active":this.isActive},style:{height:this.internalHeight||this.transitionHeight}},t)},genIcon(t,e,s){var a,l,r;const o={click:t=>{t.stopPropagation(),this.changedByDelimiters=!0,s()}},c={"aria-label":this.$vuetify.lang.t("$vuetify.carousel."+t)},d=null!==(r=null===(l=(a=this.$scopedSlots)[t])||void 0===l?void 0:l.call(a,{on:o,attrs:c}))&&void 0!==r?r:[this.$createElement(i["a"],{props:{icon:!0},attrs:c,on:o},[this.$createElement(n["a"],{props:{large:!0}},e)])];return this.$createElement("div",{staticClass:"v-window__"+t},d)},genControlIcons(){const t=[],e=this.$vuetify.rtl?this.nextIcon:this.prevIcon;if(this.hasPrev&&e&&"string"===typeof e){const s=this.genIcon("prev",e,this.prev);s&&t.push(s)}const s=this.$vuetify.rtl?this.prevIcon:this.nextIcon;if(this.hasNext&&s&&"string"===typeof s){const e=this.genIcon("next",s,this.next);e&&t.push(e)}return t},getNextIndex(t){const e=(t+1)%this.items.length,s=this.items[e];return s.disabled?this.getNextIndex(e):e},getPrevIndex(t){const e=(t+this.items.length-1)%this.items.length,s=this.items[e];return s.disabled?this.getPrevIndex(e):e},next(){if(!this.hasActiveItems||!this.hasNext)return;const t=this.getNextIndex(this.internalIndex),e=this.items[t];this.internalValue=this.getValue(e,t)},prev(){if(!this.hasActiveItems||!this.hasPrev)return;const t=this.getPrevIndex(this.internalIndex),e=this.items[t];this.internalValue=this.getValue(e,t)},updateReverse(t,e){const s=this.items.length,a=s-1;return s<=2?t<e:t===a&&0===e||(0!==t||e!==a)&&t<e}},render(t){const e={staticClass:"v-window",class:this.classes,directives:[]};if(!this.touchless){const t=this.touch||{left:()=>{this.$vuetify.rtl?this.prev():this.next()},right:()=>{this.$vuetify.rtl?this.next():this.prev()},end:t=>{t.stopPropagation()},start:t=>{t.stopPropagation()}};e.directives.push({name:"touch",value:t})}return t("div",e,[this.genContainer()])}})},c8e5:function(t,e,s){},ca79:function(t,e,s){"use strict";var a=s("db5a"),i=s("0f35"),n=s("28e8"),l=s("1d7d"),r=s("e9ef"),o=function(){var t=this,e=t._self._c;return e(a["a"],{attrs:{outlined:"","min-width":"200px"},on:{click:function(e){return t.openNewTab(t.route)}}},[t.title?t._e():e(r["a"],{staticClass:"mx-auto",attrs:{"max-width":"300",type:"card"}}),e(i["c"],{staticClass:"d-flex justify-between w-full text-wrap",staticStyle:{position:"relative"}},[t.icon?e(n["a"],{staticClass:"text-caption text-wrap",attrs:{color:t.icon_color,dark:""}},[e(l["a"],{attrs:{"x-small":!0}},[t._v(" "+t._s(t.icon)+" ")]),e("div",{staticClass:"ml-1 text-caption",attrs:{color:t.icon_color}},[e("p",{staticClass:"ma-0"},[t._v(" "+t._s(t.title)+" ")])])],1):e(n["a"],{staticClass:"text-caption text-wrap",attrs:{color:t.bg_color,dark:t.isContrastingWithWhite(t.bg_color)}},[e("p",{staticClass:"ma-0"},[t._v(" "+t._s(t.title)+" ")])]),null!=t.billing_count&&""!=t.billing_count&&void 0!=t.billing_count?e(n["a"],{staticClass:"text-caption text-wrap",staticStyle:{position:"absolute",right:"10px"},attrs:{color:t.bg_color,outlined:""}},[e("p",{staticClass:"ma-0"},[t._v(" "+t._s(Intl.NumberFormat().format(t.billing_count))+" "+t._s(t.unit_count?t.unit_count:"ບິນ")+" ")])]):t._e()],1),t.total?e(i["b"],[e("p",{staticClass:"ma-0 text-h4 font-weight-bold"},[t._v(" "+t._s(Intl.NumberFormat().format(t.total))+" "+t._s(t.unit_total?t.unit_total:"k")+" ")])]):t._e()],1)},c=[],d={props:["title","billing_count","total","bg_color","route","icon","icon_color","unit_count","unit_total","loading"],data(){return{}},created(){},beforeUpdate(){this.$store.commit("Loading_State",!0)},updated(){this.$store.commit("Loading_State",!1)},methods:{getColor(t){return"background-color: "+t},openNewTab(t){t&&window.open(t.href,"_blank")},isContrastingWithWhite(t){if(t){const e=t=>{const[e,s,a]=t.match(/\w\w/g).map(t=>parseInt(t,16)/255),i=t=>t<=.03928?t/12.92:((t+.055)/1.055)**2.4;return.2126*i(e)+.7152*i(s)+.0722*i(a)},s=Math.abs(e(t)-e("#ffffff"));return s>=.5}}}},u=d,h=s("4a4e"),m=Object(h["a"])(u,o,c,!1,null,null,null);e["a"]=m.exports},ccb0:function(t,e,s){"use strict";s("76f6")},e28e:function(t,e,s){"use strict";var a=s("b2e9"),i=s("b5e5");e["a"]=a["a"].extend({name:"v-tabs-items",props:{mandatory:{type:Boolean,default:!1}},computed:{classes(){return{...a["a"].options.computed.classes.call(this),"v-tabs-items":!0}},isDark(){return this.rootIsDark}},methods:{getValue(t,e){return t.id||i["a"].options.methods.getValue.call(this,t,e)}}})},e9ef:function(t,e,s){"use strict";s("558b"),s("ff56");var a=s("18e5"),i=s("c6cf"),n=s("710c"),l=s("9c0c"),r=s("dd08");e["a"]=Object(l["a"])(a["a"],i["a"],n["a"]).extend({name:"VSkeletonLoader",props:{boilerplate:Boolean,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},tile:Boolean,transition:String,type:String,types:{type:Object,default:()=>({})}},computed:{attrs(){return this.isLoading?{"aria-busy":!this.boilerplate||void 0,"aria-live":this.boilerplate?void 0:"polite","aria-label":this.boilerplate?void 0:this.$vuetify.lang.t(this.loadingText),role:this.boilerplate?void 0:"alert",...this.$attrs}:this.$attrs},classes(){return{"v-skeleton-loader--boilerplate":this.boilerplate,"v-skeleton-loader--is-loading":this.isLoading,"v-skeleton-loader--tile":this.tile,...this.themeClasses,...this.elevationClasses}},isLoading(){return!("default"in this.$scopedSlots)||this.loading},rootTypes(){return{actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, card-heading","card-avatar":"image, list-item-avatar","card-heading":"heading",chip:"chip","date-picker":"list-item, card-heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",paragraph:"text@3",sentences:"text@2",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"heading, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"table-cell@6","table-cell":"text","table-tfoot":"text@2, avatar@2",text:"text",...this.types}}},methods:{genBone(t,e){return this.$createElement("div",{staticClass:`v-skeleton-loader__${t} v-skeleton-loader__bone`},e)},genBones(t){const[e,s]=t.split("@"),a=()=>this.genStructure(e);return Array.from({length:s}).map(a)},genStructure(t){let e=[];t=t||this.type||"";const s=this.rootTypes[t]||"";if(t===s);else{if(t.indexOf(",")>-1)return this.mapBones(t);if(t.indexOf("@")>-1)return this.genBones(t);s.indexOf(",")>-1?e=this.mapBones(s):s.indexOf("@")>-1?e=this.genBones(s):s&&e.push(this.genStructure(s))}return[this.genBone(t,e)]},genSkeleton(){const t=[];return this.isLoading?t.push(this.genStructure()):t.push(Object(r["s"])(this)),this.transition?this.$createElement("transition",{props:{name:this.transition},on:{afterEnter:this.resetStyles,beforeEnter:this.onBeforeEnter,beforeLeave:this.onBeforeLeave,leaveCancelled:this.resetStyles}},t):t},mapBones(t){return t.replace(/\s/g,"").split(",").map(this.genStructure)},onBeforeEnter(t){this.resetStyles(t),this.isLoading&&(t._initialStyle={display:t.style.display,transition:t.style.transition},t.style.setProperty("transition","none","important"))},onBeforeLeave(t){t.style.setProperty("display","none","important")},resetStyles(t){t._initialStyle&&(t.style.display=t._initialStyle.display||"",t.style.transition=t._initialStyle.transition,delete t._initialStyle)}},render(t){return t("div",{staticClass:"v-skeleton-loader",attrs:this.attrs,on:this.$listeners,class:this.classes,style:this.isLoading?this.measurableStyles:void 0},[this.genSkeleton()])}})},ec0a:function(t,e,s){"use strict";s("51b4")},edc4:function(t,e,s){},f81c:function(t,e,s){},fd49:function(t,e,s){},ff56:function(t,e,s){}}]);
//# sourceMappingURL=chunk-3532c19f.a36c4c12.js.map