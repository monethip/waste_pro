{"version":3,"sources":["webpack:///./src/views/routeplan/ExportPlan.vue?da28","webpack:///./src/assets/pin1.svg","webpack:///./src/assets/pin3.svg","webpack:///./node_modules/core-js/modules/es.object.entries.js","webpack:///./src/Helpers/GetValue.js","webpack:///./src/views/routeplan/ExportPlan.vue?5aae","webpack:///src/views/routeplan/ExportPlan.vue","webpack:///./src/views/routeplan/ExportPlan.vue?02a1","webpack:///./src/views/routeplan/ExportPlan.vue?ae65","webpack:///./src/assets/pin2.svg"],"names":["module","exports","$","$entries","entries","target","stat","O","GetOldValueOnInput","context","search","oldVal","pagination","current_page","fetchData","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","staticStyle","latlng","_l","getMarkers","m","index","key","ref","refInFor","position","markerOptions","on","$event","onLocation","createPage","_v","type","indexOf","_k","keyCode","Search","model","value","callback","$$v","expression","headers","customers","scopedSlots","_u","fn","item","img","thumb","_e","role","_s","name","ps","viewPage","id","editPage","deleteItem","total_pages","offset","closeDelete","loading","deleteItemConfirm","staticRenderFns","data","tab","customerId","per_page","toast","color","msg","toast_error","lat","lng","markers","places","currentPlace","url","zoomControl","mapTypeControl","scaleControl","streetViewControl","rotateControl","fullscreenControl","disableDefaultUi","size","width","height","f","b","scaledSize","methods","$store","commit","$axios","$router","push","params","console","log","createNewAddressName","isCreate","evt","latLng","address","setPlace","place","placeMarker","addMarker","geometry","location","marker","animateMarker","$refs","searchInput","$el","onDataChange","geolocate","navigator","geolocation","getCurrentPosition","coords","latitude","longitude","$emit","onSave","currentAddress","tempLatLong","i","title","icon","getSiteIcon","status","watch","mounted","created","component","VAvatar","VBtn","VCard","VCardActions","VCardText","VCol","VContainer","VDataTable","VIcon","VRow","VSpacer","VTextField"],"mappings":"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","file":"js/chunk-fa2335d6.505cd449.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExportPlan.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/pin1.d74f27bd.svg\";","module.exports = __webpack_public_path__ + \"img/pin3.0a255abf.svg\";","var $ = require('../internals/export');\nvar $entries = require('../internals/object-to-array').entries;\n\n// `Object.entries` method\n// https://tc39.es/ecma262/#sec-object.entries\n$({ target: 'Object', stat: true }, {\n  entries: function entries(O) {\n    return $entries(O);\n  }\n});\n","export const GetOldValueOnInput = (context) => {\n    if (context.search !== '') {\n        if (context.oldVal !== '') {\n            if (context.oldVal !== context.search) {\n                context.oldVal = context.search;\n                context.pagination.current_page = 1;\n                context.fetchData();\n            }\n        } else {\n            if (context.search !== '') {\n                context.pagination.current_page = 1;\n                context.fetchData();\n            }\n            context.oldVal = context.search;\n        }\n    } else {\n        context.oldVal = '';\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[_c('v-row',[_c('v-col',{staticClass:\"mb-4\",attrs:{\"cols\":\"12\"}},[_c('GmapMap',{staticStyle:{\"width\":\"100%\",\"height\":\"450px\"},attrs:{\"center\":_vm.latlng,\"zoom\":16,\"disableDefaultUI\":true}},_vm._l((_vm.getMarkers()),function(m,index){return _c('GmapMarker',{key:index,ref:\"markers\",refInFor:true,attrs:{\"position\":m.position,\"draggable\":true,\"icon\":_vm.markerOptions,\"animation\":2},on:{\"click\":function($event){_vm.latlng = m.position},\"dragend\":_vm.onLocation}})}),1)],1)],1),_c('v-row',{staticClass:\"mb-n6\"},[_c('v-col',[_c('v-btn',{staticClass:\"btn-primary\",on:{\"click\":function($event){return _vm.createPage()}}},[_c('v-icon',[_vm._v(\"mdi-plus\")])],1)],1),_c('v-col',[_c('v-text-field',{attrs:{\"outlined\":\"\",\"dense\":\"\",\"clearable\":\"\",\"prepend-inner-icon\":\"mdi-magnify\",\"label\":\"ຊື່ລູກຄ້າ\",\"type\":\"text\"},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.Search()}},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1)],1),_c('div',[_c('v-card',[_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-card-text',[_c('v-data-table',{attrs:{\"headers\":_vm.headers,\"items\":_vm.customers,\"search\":_vm.search,\"disable-pagination\":true,\"hide-default-footer\":\"\"},scopedSlots:_vm._u([{key:\"item.media\",fn:function(ref){\nvar item = ref.item;\nreturn _vm._l((item.media),function(img,index){return _c('v-avatar',{key:index,attrs:{\"size\":\"36px\"}},[(img.thumb)?_c('img',{attrs:{\"src\":img.thumb}}):_vm._e()])})}},{key:\"item.roles\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',_vm._l((item.roles),function(role,index){return _c('span',{key:index},[_vm._v(\" \"+_vm._s(role.name)+\", \")])}),0)]}},{key:\"item.permissions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',_vm._l((item.permissions),function(ps,index){return _c('span',{key:index},[_c('span',[_vm._v(_vm._s(ps.name)+\", \")])])}),0)]}},{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-icon',{staticClass:\"mr-2\",attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.viewPage(item.id)}}},[_vm._v(\" mdi-eye \")]),_c('v-icon',{staticClass:\"mr-2\",attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.editPage(item.id)}}},[_vm._v(\" mdi-pencil \")]),_c('v-icon',{attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.deleteItem(item.id)}}},[_vm._v(\" mdi-delete \")])]}}])}),_c('br'),[(_vm.pagination.total_pages > 1)?_c('Pagination',{attrs:{\"pagination\":_vm.pagination,\"offset\":_vm.offset},on:{\"paginate\":function($event){return _vm.fetchData()}}}):_vm._e()]],2)],1)],1)],1),_c('ModalDelete',[[_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":_vm.closeDelete}},[_vm._v(\"Cancel\")]),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\",\"loading\":_vm.loading,\"disabled\":_vm.loading},on:{\"click\":_vm.deleteItemConfirm}},[_vm._v(\"OK\")]),_c('v-spacer')],1)]],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container>\n    <v-row>\n      <v-col cols=\"12\" class=\"mb-4\">\n        <GmapMap\n          :center=\"latlng\"\n          :zoom=\"16\"\n          style=\"width: 100%; height: 450px\"\n          :disableDefaultUI=\"true\"\n        >\n          <GmapMarker\n            :key=\"index\"\n            v-for=\"(m, index) in getMarkers()\"\n            :position=\"m.position\"\n            @click=\"latlng = m.position\"\n            :draggable=\"true\"\n            @dragend=\"onLocation\"\n            :icon=\"markerOptions\"\n            :animation=\"2\"\n            ref=\"markers\"\n          />\n        </GmapMap>\n      </v-col>\n    </v-row>\n    <v-row class=\"mb-n6\">\n      <v-col>\n        <v-btn class=\"btn-primary\" @click=\"createPage()\"\n          ><v-icon>mdi-plus</v-icon>\n        </v-btn>\n      </v-col>\n      <v-col>\n        <v-text-field\n          outlined\n          dense\n          clearable\n          prepend-inner-icon=\"mdi-magnify\"\n          label=\"ຊື່ລູກຄ້າ\"\n          type=\"text\"\n          v-model=\"search\"\n          @keyup.enter=\"Search()\"\n        >\n        </v-text-field>\n      </v-col>\n    </v-row>\n    <div>\n      <v-card>\n        <v-card flat>\n          <v-card-text>\n            <v-data-table\n              :headers=\"headers\"\n              :items=\"customers\"\n              :search=\"search\"\n              :disable-pagination=\"true\"\n              hide-default-footer\n            >\n              <template v-slot:item.media=\"{ item }\">\n                <v-avatar\n                  size=\"36px\"\n                  v-for=\"(img, index) in item.media\"\n                  :key=\"index\"\n                >\n                  <img v-if=\"img.thumb\" :src=\"img.thumb\" />\n                </v-avatar>\n              </template>\n              <!--Role -->\n              <template v-slot:item.roles=\"{ item }\">\n                <div>\n                  <span v-for=\"(role, index) in item.roles\" :key=\"index\">\n                    {{ role.name }},\n                  </span>\n                </div>\n              </template>\n              <!--Permission -->\n              <template v-slot:item.permissions=\"{ item }\">\n                <div>\n                  <span v-for=\"(ps, index) in item.permissions\" :key=\"index\">\n                    <span>{{ ps.name }}, </span>\n                  </span>\n                </div>\n              </template>\n\n              <template v-slot:item.actions=\"{ item }\">\n                <v-icon small class=\"mr-2\" @click=\"viewPage(item.id)\">\n                  mdi-eye\n                </v-icon>\n                <v-icon small class=\"mr-2\" @click=\"editPage(item.id)\">\n                  mdi-pencil\n                </v-icon>\n                <v-icon small @click=\"deleteItem(item.id)\"> mdi-delete </v-icon>\n              </template> </v-data-table\n            ><br />\n            <template>\n              <Pagination\n                v-if=\"pagination.total_pages > 1\"\n                :pagination=\"pagination\"\n                :offset=\"offset\"\n                @paginate=\"fetchData()\"\n              ></Pagination>\n            </template>\n          </v-card-text>\n        </v-card>\n      </v-card>\n    </div>\n\n    <!--Delete Modal-->\n    <ModalDelete>\n      <template>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"blue darken-1\" text @click=\"closeDelete\">Cancel</v-btn>\n          <v-btn\n            color=\"blue darken-1\"\n            text\n            :loading=\"loading\"\n            :disabled=\"loading\"\n            @click=\"deleteItemConfirm\"\n            >OK</v-btn\n          >\n          <v-spacer></v-spacer>\n        </v-card-actions>\n      </template>\n    </ModalDelete>\n  </v-container>\n</template>\n\n<script>\nimport { GetOldValueOnInput } from \"@/Helpers/GetValue\";\nexport default {\n  name: \"Customer\",\n  data() {\n    return {\n      tab: null,\n      customers: [],\n      loading: false,\n      customerId: \"\",\n      //Pagination\n      offset: 12,\n      pagination: {},\n      per_page: 15,\n      search: \"\",\n      oldVal: \"\",\n\n      headers: [\n        { text: \"ຊື່\", value: \"name\" },\n        { text: \"ນາມສະກຸນ\", value: \"surname\" },\n        { text: \"Phone\", value: \"user.phone\", sortable: false },\n        { text: \"Email\", value: \"user.email\", sortable: false },\n        { text: \"ເຮືອນເລກທີ\", value: \"house_number\", sortable: false },\n        { text: \"Image\", value: \"media\" },\n        { text: \"\", value: \"actions\", sortable: false },\n      ],\n      toast: {\n        value: true,\n        color: \"success\",\n        msg: \"\",\n      },\n      toast_error: {\n        value: true,\n        color: \"error\",\n        msg: \"Something when wrong!\",\n      },\n\n      //Map\n      latlng: {\n        lat: 18.1189434,\n        lng: 102.290218,\n      },\n      markers: [],\n      places: [],\n      currentPlace: null,\n      markerOptions: {\n        // eslint-disable-next-line global-require\n        url: require(\"@coms/../../src/assets/pin1.svg\"),\n        zoomControl: true,\n        mapTypeControl: false,\n        scaleControl: false,\n        streetViewControl: false,\n        rotateControl: false,\n        fullscreenControl: false,\n        disableDefaultUi: false,\n        size: {\n          width: 35,\n          height: 55,\n          f: \"px\",\n          b: \"px\",\n        },\n        scaledSize: {\n          width: 35,\n          height: 55,\n          f: \"px\",\n          b: \"px\",\n        },\n      },\n    };\n  },\n  methods: {\n    fetchData() {\n      this.$store.commit(\"Loading_State\", true);\n      this.$axios\n        .get(\"customer\", {\n          params: {\n            page: this.pagination.current_page,\n            per_page: this.per_page,\n            filter: this.search,\n          },\n        })\n        .then((res) => {\n          if (res.data.code == 200) {\n            setTimeout(() => {\n              this.$store.commit(\"Loading_State\", false);\n              this.customers = res.data.data.data;\n              this.pagination = res.data.data.pagination;\n            }, 300);\n          }\n        })\n        .catch((error) => {\n          this.$store.commit(\"Loading_State\", false);\n          this.fetchData();\n          if (error.response.status == 422) {\n            var obj = error.response.data.errors;\n            for (let [key, message] of Object.entries(obj)) {\n              this.server_errors[key] = message[0];\n            }\n          }\n        });\n    },\n    closeDelete() {\n      this.$store.commit(\"modalDelete_State\", false);\n    },\n    deleteItem(id) {\n      this.customerId = id;\n      this.$store.commit(\"modalDelete_State\", true);\n    },\n\n    deleteItemConfirm() {\n      this.loading = true;\n      this.$axios\n        .delete(\"customer/\" + this.customerId)\n        .then((res) => {\n          if (res.data.code == 200) {\n            setTimeout(() => {\n              this.loading = false;\n              this.toast.msg = res.data.message;\n              this.$store.commit(\"Toast_State\", this.toast);\n              this.$store.commit(\"modalDelete_State\", false);\n              this.fetchData();\n            }, 300);\n          }\n        })\n        .catch(() => {\n          this.fetchData();\n          this.$store.commit(\"Toast_State\", this.toast_error);\n          this.$store.commit(\"modalDelete_State\", false);\n          this.loading = false;\n        });\n    },\n    createPage() {\n      this.$router.push({\n        name: \"CreateCustomer\",\n      });\n    },\n    editPage(id) {\n      this.$router.push({\n        name: \"EditCustomer\",\n        params: { id },\n      });\n    },\n    viewPage(id) {\n      console.log(id);\n      this.$router.push({\n        name: \"ViewCustomer\",\n        params: { id },\n      });\n    },\n    Search() {\n      GetOldValueOnInput(this);\n    },\n\n    //Google map\n\n    //Set Googlemap Api\n    createNewAddressName() {\n      const CUSTOMIZE = \"#CUSTOM ADDRESS:\";\n      return this.isCreate\n        ? this.currentAddress\n        : `${CUSTOMIZE} ${this.latlng.lat}, ${this.latlng.lng}`;\n    },\n    onLocation(evt) {\n      this.latlng.lat = evt.latLng.lat();\n      this.latlng.lng = evt.latLng.lng();\n      this.address = this.createNewAddressName();\n      console.log(this.latlng);\n      //   this.customer_edit.latitude = this.center.lat;\n      //   this.customer_edit.longitude = this.center.lng;\n    },\n    setPlace(place) {\n      this.currentPlace = place;\n      this.placeMarker();\n    },\n    addMarker() {\n      console.log(\"Heee\");\n      if (this.currentPlace) {\n        const marker = {\n          lat: this.currentPlace.geometry.location.lat(),\n          lng: this.currentPlace.geometry.location.lng(),\n        };\n        this.markers.push({ position: marker });\n        this.places.push(this.currentPlace);\n        this.latlng = marker;\n        this.currentPlace = null;\n      }\n    },\n    placeMarker() {\n      this.markers = [];\n      this.places = [];\n      if (this.currentPlace) {\n        const marker = {\n          lat: this.currentPlace.geometry.location.lat(),\n          lng: this.currentPlace.geometry.location.lng(),\n        };\n        this.markers.push({ position: marker });\n        this.latlng = marker;\n        this.animateMarker();\n      } else {\n        const marker = {\n          lat: this.latlng.lat,\n          lng: this.latlng.lng,\n        };\n        this.markers.push({ position: marker });\n        this.animateMarker();\n      }\n      // set address\n      if (this.$refs.searchInput) {\n        this.address = this.$refs.searchInput.$el.value;\n      } else {\n        // this.address = this.currentPlace.formatted_address;\n      }\n      this.onDataChange();\n    },\n\n    geolocate() {\n      navigator.geolocation.getCurrentPosition((position) => {\n        this.latlng = {\n          lat: position.coords.latitude,\n          lng: position.coords.longitude,\n        };\n        this.placeMarker();\n      });\n    },\n    onDataChange() {\n      this.$emit(\"onDataChange\", {\n        address: this.address,\n        position: this.latlng,\n      });\n      // console.log(this.center);\n    },\n\n    onSave() {\n      this.$emit(\"onSave\", {\n        address: this.address || this.currentAddress || \"Unnamed Location\",\n        position: this.latlng,\n        isCreate: this.isCreate,\n      });\n    },\n\n    getMarkers() {\n      // generating markers for site map\n      var markers = [];\n      // remove this after lat long received from api.\n      const tempLatLong = [\n        { lat: 18.1189434, lng: 102.290218 },\n        { lat: 18.1189434, lng: 102.240218 },\n        { lat: 18.1189434, lng: 102.230218 },\n        { lat: 18.1189434, lng: 102.220218 },\n        { lat: 18.1189434, lng: 102.210218 },\n        { lat: 18.1189434, lng: 102.200218 },\n        { lat: 18.1189434, lng: 102.190218 },\n        { lat: 18.1189434, lng: 102.180218 },\n      ];\n\n      for (let i = 0; i < tempLatLong.length; i++) {\n        markers.push({\n          position: tempLatLong[i],\n          title: \"test title\",\n          icon: this.getSiteIcon(1), // if you want to show different as per the condition.\n        });\n      }\n      return markers;\n    },\n    getSiteIcon(status) {\n      try {\n        switch (status) {\n          case 1:\n            return require(\"@coms/../../src/assets/pin1.svg\");\n\n          case 2:\n            return require(\"@coms/../../src/assets/pin2.svg\");\n\n          case 3:\n            return require(\"@coms/../../src/assets/pin3.svg\");\n\n          default:\n            return require(\"@coms/../../src/assets/pin1.svg\");\n        }\n      } catch (e) {\n        return null;\n      }\n    },\n  },\n  watch: {\n    search: function (value) {\n      if (value == \"\") {\n        this.fetchData();\n      }\n    },\n  },\n  mounted() {\n    this.geolocate();\n  },\n  created() {\n    this.fetchData();\n    this.getMarkers();\n    console.log(this.getMarkers());\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"../../../public/scss/main.scss\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExportPlan.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExportPlan.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ExportPlan.vue?vue&type=template&id=3bff57e7&\"\nimport script from \"./ExportPlan.vue?vue&type=script&lang=js&\"\nexport * from \"./ExportPlan.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ExportPlan.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VAvatar,VBtn,VCard,VCardActions,VCardText,VCol,VContainer,VDataTable,VIcon,VRow,VSpacer,VTextField})\n","module.exports = __webpack_public_path__ + \"img/pin2.b23d8eec.svg\";"],"sourceRoot":""}