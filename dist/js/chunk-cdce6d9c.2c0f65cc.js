(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cdce6d9c"],{6421:function(t,e,a){"use strict";a("f9e8")},"6eceb":function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));a("ac1f"),a("841c");var o=function(t){""!==t.search?""!==t.oldVal?t.oldVal!==t.search&&(t.oldVal=t.search,t.pagination.current_page=1,t.fetchData()):(""!==t.search&&(t.pagination.current_page=1,t.fetchData()),t.oldVal=t.search):t.oldVal=""}},e8d1:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-breadcrumbs",{staticClass:"pt-0",attrs:{large:""}},[t._v("ລາຍງານຂໍ້ມູນບິນເກັບຂີ້ເຫື້ອຍພິເສດ")]),a("v-row",{staticClass:"mb-n6"},[a("v-col",[a("v-btn",{staticClass:"btn-primary",on:{click:function(e){return t.exportData()}}},[t._v("Export ")])],1),a("v-col",[a("v-select",{attrs:{outlined:"",dense:"",items:t.duration,"item-text":"name","item-value":"duration",label:"ຊ່ວງເວລາ"},model:{value:t.selectedDuration,callback:function(e){t.selectedDuration=e},expression:"selectedDuration"}})],1),"year"==t.selectedDuration?a("v-col",[a("section",[a("date-picker",{staticStyle:{height:"40px"},attrs:{type:"year",placeholder:"ເລີ່ມປີ"},model:{value:t.year_from,callback:function(e){t.year_from=e},expression:"year_from"}})],1)]):t._e(),"year"==t.selectedDuration?a("v-col",[a("section",[a("date-picker",{attrs:{type:"year",placeholder:"ຫາປີ"},model:{value:t.year_to,callback:function(e){t.year_to=e},expression:"year_to"}})],1)]):t._e(),"month"==t.selectedDuration?a("v-col",[a("section",[a("date-picker",{attrs:{type:"month",placeholder:"ເລີ່ມເດືອນ"},model:{value:t.month_from,callback:function(e){t.month_from=e},expression:"month_from"}})],1)]):t._e(),"month"==t.selectedDuration?a("v-col",[a("section",[a("date-picker",{attrs:{type:"month",placeholder:"ຫາເດືອນ"},model:{value:t.month_to,callback:function(e){t.month_to=e},expression:"month_to"}})],1)]):t._e()],1),a("v-row",[a("v-col",{attrs:{cols:""}},[a("v-select",{attrs:{outlined:"",dense:"",items:t.collectionStatus,"item-text":"dis_play","item-value":"name",label:"ສະຖານະບໍລິການ",multiple:"",clearable:""},model:{value:t.selectedCollectionStatus,callback:function(e){t.selectedCollectionStatus=e},expression:"selectedCollectionStatus"}})],1),a("v-col",{attrs:{col:""}},[a("v-select",{attrs:{outlined:"",dense:"",items:t.paymentStatus,"item-text":"dis_play","item-value":"name",label:"ສະຖານະການຊຳລະ",multiple:"",clearable:""},model:{value:t.selectedPaymentStatus,callback:function(e){t.selectedPaymentStatus=e},expression:"selectedPaymentStatus"}})],1)],1),a("div",[t._l(t.summary,(function(e,o){return a("v-row",{key:o},[a("v-col",[a("p",[t._v("ປີ "+t._s(e.year))])]),a("v-col",[a("p",[t._v(" ອະນຸມັດ "),a("span",{staticClass:"success--text"},[t._v(t._s(Intl.NumberFormat().format(e.approved_total)))])])]),a("v-col",[a("p",[t._v(" ຍົກເລີກ "),a("span",{staticClass:"success--text"},[t._v(t._s(Intl.NumberFormat().format(e.rejected_total)))])])]),a("v-col",[a("p",[t._v(" ການຊຳລະທີ່ລໍຖ້າຢືນຢັນ "),a("span",{staticClass:"success--text"},[t._v(t._s(Intl.NumberFormat().format(e.to_confirm_payment_total)))])])]),a("v-col",[a("p",[t._v(" ສຳເລັດ "),a("span",{staticClass:"success--text"},[t._v(t._s(Intl.NumberFormat().format(e.success_total)))])])]),a("v-col",[a("p",[t._v(" ລໍຖ້າການອານຸມັດ "),a("span",{staticClass:"success--text"},[t._v(t._s(Intl.NumberFormat().format(e.pending_total))+" ")])])])],1)})),a("v-card",[a("v-card-text",[a("v-data-table",{attrs:{headers:t.headers,items:t.invoices,search:t.search,"disable-pagination":!0,"hide-default-footer":""},scopedSlots:t._u([{key:"item.sub_total",fn:function(e){var o=e.item;return[a("div",[t._v(" "+t._s(Intl.NumberFormat().format(o.sub_total))+" ")])]}},{key:"item.total",fn:function(e){var o=e.item;return[a("div",[t._v(" "+t._s(Intl.NumberFormat().format(o.total))+" ")])]}},{key:"item.status",fn:function(e){var o=e.item;return[a("v-chip",{attrs:{label:"",color:t.statusColor(o.payment_status)}},[t._v(t._s(t.paymentStatusText(o.payment_status)))])]}},{key:"item.created_at",fn:function(e){var o=e.item;return[a("div",[a("span",[t._v(t._s(t.moment(o.created_at).format("DD-MM-YY")))])])]}}])})],1)],1),a("br"),[t.pagination.total_pages>1?a("Pagination",{attrs:{pagination:t.pagination,offset:t.offset},on:{paginate:function(e){return t.fetchData()}}}):t._e()]],2)],1)},n=[],i=a("6eceb"),s=a("c1df"),r=a.n(s),c={title:function(){return"Vientiane Waste Co-Dev|Report Invoice"},data:function(){return{tab:"tab-1",customers:[],loading:!1,customerId:"",year_from:"",year_to:"",month_from:"",month_to:"",offset:12,pagination:{},per_page:15,search:"",oldVal:"",invoices:[],summary:{},selectedDuration:"year",duration:[{name:"ປີ",duration:"year"},{name:"ເດືອນ",duration:"month"}],invoiceType:"home",selectedCollectionStatus:[],collectionStatus:[{id:1,name:"requested",dis_play:"ຮ້ອງຂໍເກັບຂີ້ເຫື້ອຍ"},{id:2,name:"rejected",dis_play:"ປະຕິເສດເກັບຂີ້ເຫື້ອຍ"},{id:3,name:"approved",dis_play:"ອະນຸມັດເກັບຂີ້ເຫື້ອຍ"},{id:4,name:"collected",dis_play:"ເກັບຂີເຫື້ອຍສຳເລັດ"},{id:5,name:"collect_confirm",dis_play:"ລູກຄ້າຢືນຢັນການເກັບ"},{id:5,name:"collect_reject",dis_play:"ການເກັບຖືກປະຕິເສດ"}],selectedPaymentStatus:[],paymentStatus:[{id:1,name:"pending",dis_play:"ລໍຖ້າເກັບເງິນ"},{id:2,name:"to_confirm_payment",dis_play:"ລໍຖ້າຢືນຢັນຊຳລະ"},{id:3,name:"rejected",dis_play:"ປະຕິເສດການຊຳລະ"},{id:4,name:"success",dis_play:"ຊຳລະສຳເລັດ"}]}},methods:{fetchData:function(){var t=this,e=new FormData;e.append("page",this.pagination.current_page),e.append("per_page",this.per_page),e.append("duration",this.selectedDuration),""!==this.year_from&&""!==this.year_to&&"year"==this.selectedDuration&&(e.append("year_from",this.moment(this.year_from).format("YYYY")),e.append("year_to",this.moment(this.year_to).format("YYYY"))),""!==this.month_from&&""!==this.month_to&&"month"==this.selectedDuration&&(e.append("month_from",this.moment(this.month_from).format("YYYY-MM")),e.append("month_to",this.moment(this.month_to).format("YYYY-MM"))),e.append("collect_status",this.selectedCollectionStatus),e.append("payment_status",this.selectedPaymentStatus),this.$store.commit("Loading_State",!0),this.$axios.post("report-event-collection-payment",e).then((function(e){200==e.data.code&&setTimeout((function(){t.$store.commit("Loading_State",!1),t.invoices=e.data.data.details.data,t.summary=e.data.data.summary,console.log(t.invoices),console.log(t.summary),t.pagination=e.data.data.details.pagination}),300)})).catch((function(e){t.$store.commit("Loading_State",!1),t.$store.commit("Toast_State",{value:!0,color:"error",msg:e.response.data.message})}))},exportData:function(){var t=this,e=new FormData;e.append("type",this.invoiceType),e.append("duration",this.selectedDuration),e.append("download",1),""!==this.year_from&&""!==this.year_to&&"year"==this.selectedDuration&&(e.append("year_from",this.moment(this.year_from).format("YYYY")),e.append("year_to",this.moment(this.year_to).format("YYYY"))),""!==this.month_from&&""!==this.month_to&&"month"==this.selectedDuration&&(e.append("month_from",this.moment(this.month_from).format("YYYY-MM")),e.append("month_to",this.moment(this.month_to).format("YYYY-MM"))),e.append("collect_status",this.selectedCollectionStatus),e.append("payment_status",this.selectedPaymentStatus),this.loading=!0,this.$axios.post("report-event-collection-payment",e).then((function(e){200==e.status&&(null!=e.data.data.download_link&&window.open(e.data.data.download_link),t.loading=!1)})).catch((function(e){t.$store.commit("Toast_State",{value:!0,color:"error",msg:e.response.data.message}),t.loading=!1}))},editPage:function(t){this.$router.push({name:"InvoiceDetail",params:{id:t}})},viewPage:function(t){this.$router.push({name:"InvoiceDetail",params:{id:t}})},Search:function(){Object(i["a"])(this)}},watch:{selectedPaymentStatus:function(){this.pagination.current_page="",this.fetchData()},selectedCollectionStatus:function(){this.pagination.current_page="",this.fetchData()},selectedDuration:function(){this.pagination.current_page="",this.fetchData()},search:function(t){this.pagination.current_page="",""==t&&this.fetchData()},year_from:function(t){var e=r()(t).format("YYYY"),a=r()(this.year_to).format("YYYY");this.pagination.current_page="",""!==e&&""!==a&&e>a&&(this.year_from=""),this.fetchData()},year_to:function(t){var e=r()(t).format("YYYY"),a=r()(this.year_from).format("YYYY");this.pagination.current_page="",""!==e&&""!==a&&e<a&&(this.year_to=""),this.fetchData()},month_from:function(t){var e=r()(t).format("YYYY-MM"),a=r()(this.month_to).format("YYYY-MM");""!==e&&""!==a&&e>a&&(this.month_from=""),this.pagination.current_page="",this.fetchData()},month_to:function(t){var e=r()(this.month_from).format("YYYY-MM"),a=r()(t).format("YYYY-MM");this.pagination.current_page="",""!==e&&""!==a&&a<e&&(this.month_to=""),this.pagination.current_page="",this.fetchData()},tab:function(t){"tab-1"==t?(this.fetchData(),this.invoiceType="home",this.$router.push({name:"Report-Invoice",query:{tab:"home"}}).catch((function(){}))):"tab-2"==t&&(this.fetchData(),this.invoiceType="company",this.$router.push({name:"Report-Invoice",query:{tab:"company"}}).catch((function(){})))}},created:function(){"home"==this.$route.query.tab?(this.tab="tab-1",this.invoiceType="home",this.fetchData()):"company"==this.$route.query.tab&&(this.tab="tab-2",this.invoiceType="company",this.fetchData()),this.pagination=[]}},l={mixins:[c],name:"InvoiceCollectionEvent",title:function(){return"Vientiane Waste Co-Dev|Report Invoice Collection Event"},data:function(){return{customers:[],loading:!1,customerId:"",offset:12,pagination:{},per_page:15,search:"",oldVal:"",headers:[{text:"ວັນທີ",value:"date",sortable:!1},{text:"ລູກຄ້າ",value:"full_name"},{text:"ສ່ວນຫຼຸດ",value:"discount"},{text:"SubTotal",value:"sub_total",sortable:!1},{text:"Total",value:"total",sortable:!1},{text:"ຊຳລະ",value:"status",sortable:!1},{text:"Type",value:"type",sortable:!1}]}},methods:{Search:function(){Object(i["a"])(this)},statusColor:function(t){return"success"==t?"success":"pending"==t?"primary":"rejected"==t?"error":"info"},paymentStatusText:function(t){return"pending"==t?"ລໍຖ້າເກັບເງິນ":"to_confirm_payment"==t?"ລໍຖ້າຢືນຢັນຊຳລະ":"rejected"==t?"ປະຕິເສດການຊຳລະ":"success"==t?"ຊຳລະສຳເລັດ":""}},watch:{tab:function(){this.tab}},created:function(){this.fetchData()}},m=l,u=(a("6421"),a("2877")),d=a("6544"),p=a.n(d),h=a("2bc5"),_=a("8336"),f=a("b0af"),v=a("99d9"),y=a("cc20"),Y=a("62ad"),b=a("a523"),g=a("8fea"),D=a("0fd9"),x=a("b974"),S=Object(u["a"])(m,o,n,!1,null,null,null);e["default"]=S.exports;p()(S,{VBreadcrumbs:h["a"],VBtn:_["a"],VCard:f["a"],VCardText:v["b"],VChip:y["a"],VCol:Y["a"],VContainer:b["a"],VDataTable:g["a"],VRow:D["a"],VSelect:x["a"]})},f9e8:function(t,e,a){}}]);
//# sourceMappingURL=chunk-cdce6d9c.2c0f65cc.js.map